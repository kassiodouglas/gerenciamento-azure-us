var JS=Object.defineProperty,YS=Object.defineProperties;var ZS=Object.getOwnPropertyDescriptors;var ta=Object.getOwnPropertySymbols;var Im=Object.prototype.hasOwnProperty,bm=Object.prototype.propertyIsEnumerable;var Tm=(n,e,t)=>e in n?JS(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,U=(n,e)=>{for(var t in e||={})Im.call(e,t)&&Tm(n,t,e[t]);if(ta)for(var t of ta(e))bm.call(e,t)&&Tm(n,t,e[t]);return n},oe=(n,e)=>YS(n,ZS(e));var zu=(n,e)=>{var t={};for(var r in n)Im.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&ta)for(var r of ta(n))e.indexOf(r)<0&&bm.call(n,r)&&(t[r]=n[r]);return t};var Ze=null,na=!1,Ju=1,QS=null,rt=Symbol("SIGNAL");function $(n){let e=Ze;return Ze=n,e}function ia(){return Ze}var li={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Do(n){if(na)throw new Error("");if(Ze===null)return;Ze.consumerOnSignalRead(n);let e=Ze.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Ze.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Ze.producers,t!==void 0&&t.producer===n)){Ze.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Ze&&(!r||ew(i,Ze)))return;let o=ui(Ze),s={producer:n,consumer:Ze,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Ze.producersTail=s,e!==void 0?e.nextProducer=s:Ze.producers=s,o&&Rm(n,s)}function Am(){Ju++}function Yu(n){if(!(ui(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Ju)){if(!n.producerMustRecompute(n)&&!wo(n)){Ku(n);return}n.producerRecomputeValue(n),Ku(n)}}function Zu(n){if(n.consumers===void 0)return;let e=na;na=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||XS(r)}}finally{na=e}}function Qu(){return Ze?.consumerAllowSignalWrites!==!1}function XS(n){n.dirty=!0,Zu(n),n.consumerMarkedDirty?.(n)}function Ku(n){n.dirty=!1,n.lastCleanEpoch=Ju}function ci(n){return n&&Mm(n),$(n)}function Mm(n){n.producersTail=void 0,n.recomputing=!0}function So(n,e){$(e),n&&xm(n)}function xm(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(ui(n))do t=Xu(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function wo(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Yu(t),r!==t.version))return!0}return!1}function gr(n){if(ui(n)){let e=n.producers;for(;e!==void 0;)e=Xu(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function Rm(n,e){let t=n.consumersTail,r=ui(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)Rm(i.producer,i)}function Xu(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!ui(e)){let o=e.producers;for(;o!==void 0;)o=Xu(o)}return t}function ui(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function ed(n){QS?.(n)}function ew(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function td(n,e){return Object.is(n,e)}function oa(n,e){let t=Object.create(tw);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Yu(t),Do(t),t.value===ra)throw t.error;return t.value};return r[rt]=t,ed(t),r}var Wu=Symbol("UNSET"),ju=Symbol("COMPUTING"),ra=Symbol("ERRORED"),tw=oe(U({},li),{value:Wu,dirty:!0,error:null,equal:td,kind:"computed",producerMustRecompute(n){return n.value===Wu||n.value===ju},producerRecomputeValue(n){if(n.value===ju)throw new Error("");let e=n.value;n.value=ju;let t=ci(n),r,i=!1;try{r=n.computation(),$(null),i=e!==Wu&&e!==ra&&r!==ra&&n.equal(e,r)}catch(o){r=ra,n.error=o}finally{So(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function nw(){throw new Error}var Nm=nw;function km(n){Nm(n)}function nd(n){Nm=n}var rw=null;function rd(n,e){let t=Object.create(sa);t.value=n,e!==void 0&&(t.equal=e);let r=()=>Pm(t);return r[rt]=t,ed(t),[r,s=>To(t,s),s=>Fm(t,s)]}function Pm(n){return Do(n),n.value}function To(n,e){Qu()||km(n),n.equal(n.value,e)||(n.value=e,iw(n))}function Fm(n,e){Qu()||km(n),To(n,e(n.value))}var sa=oe(U({},li),{equal:td,value:void 0,kind:"signal"});function iw(n){n.version++,Am(),Zu(n),rw?.(n)}function id(n){let e=$(null);try{return n()}finally{$(e)}}var od=oe(U({},li),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function sd(n){if(n.dirty=!1,n.version>0&&!wo(n))return;n.version++;let e=ci(n);try{n.cleanup(),n.fn()}finally{So(n,e)}}function ee(n){return typeof n=="function"}function aa(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var la=aa(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function mr(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var De=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ee(r))try{r()}catch(o){e=o instanceof la?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Om(o)}catch(s){e=e??[],s instanceof la?e=[...e,...s.errors]:e.push(s)}}if(e)throw new la(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Om(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&mr(t,e)}remove(e){let{_finalizers:t}=this;t&&mr(t,e),e instanceof n&&e._removeParent(this)}};De.EMPTY=(()=>{let n=new De;return n.closed=!0,n})();var ad=De.EMPTY;function ca(n){return n instanceof De||n&&"closed"in n&&ee(n.remove)&&ee(n.add)&&ee(n.unsubscribe)}function Om(n){ee(n)?n():n.unsubscribe()}var qt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var di={setTimeout(n,e,...t){let{delegate:r}=di;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=di;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ua(n){di.setTimeout(()=>{let{onUnhandledError:e}=qt;if(e)e(n);else throw n})}function Io(){}var Lm=ld("C",void 0,void 0);function Vm(n){return ld("E",void 0,n)}function Bm(n){return ld("N",n,void 0)}function ld(n,e,t){return{kind:n,value:e,error:t}}var yr=null;function fi(n){if(qt.useDeprecatedSynchronousErrorHandling){let e=!yr;if(e&&(yr={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=yr;if(yr=null,t)throw r}}else n()}function Um(n){qt.useDeprecatedSynchronousErrorHandling&&yr&&(yr.errorThrown=!0,yr.error=n)}var vr=class extends De{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ca(e)&&e.add(this)):this.destination=aw}static create(e,t,r){return new pi(e,t,r)}next(e){this.isStopped?ud(Bm(e),this):this._next(e)}error(e){this.isStopped?ud(Vm(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ud(Lm,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},ow=Function.prototype.bind;function cd(n,e){return ow.call(n,e)}var dd=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){da(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){da(r)}else da(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){da(t)}}},pi=class extends vr{constructor(e,t,r){super();let i;if(ee(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&qt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&cd(e.next,o),error:e.error&&cd(e.error,o),complete:e.complete&&cd(e.complete,o)}):i=e}this.destination=new dd(i)}};function da(n){qt.useDeprecatedSynchronousErrorHandling?Um(n):ua(n)}function sw(n){throw n}function ud(n,e){let{onStoppedNotification:t}=qt;t&&di.setTimeout(()=>t(n,e))}var aw={closed:!0,next:Io,error:sw,complete:Io};var hi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function gi(n){return n}function Hm(n){return n.length===0?gi:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ce=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=cw(t)?t:new pi(t,r,i);return fi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=$m(r),new r((i,o)=>{let s=new pi({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[hi](){return this}pipe(...t){return Hm(t)(this)}toPromise(t){return t=$m(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function $m(n){var e;return(e=n??qt.Promise)!==null&&e!==void 0?e:Promise}function lw(n){return n&&ee(n.next)&&ee(n.error)&&ee(n.complete)}function cw(n){return n&&n instanceof vr||lw(n)&&ca(n)}function uw(n){return ee(n?.lift)}function Se(n){return e=>{if(uw(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Te(n,e,t,r,i){return new fd(n,e,t,r,i)}var fd=class extends vr{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var mi={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame,{delegate:r}=mi;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);let i=e(o=>{t=void 0,n(o)});return new De(()=>t?.(i))},requestAnimationFrame(...n){let{delegate:e}=mi;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){let{delegate:e}=mi;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var Gm=aa(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=(()=>{class n extends ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new fa(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Gm}next(t){fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?ad:(this.currentObservers=null,o.push(t),new De(()=>{this.currentObservers=null,mr(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ce;return t.source=this,t}}return n.create=(e,t)=>new fa(e,t),n})(),fa=class extends se{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:ad}};var _r=class extends se{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var pd={now(){return(pd.delegate||Date).now()},delegate:void 0};var pa=class extends De{constructor(e,t){super()}schedule(e,t=0){return this}};var bo={setInterval(n,e,...t){let{delegate:r}=bo;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=bo;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var yi=class extends pa{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return bo.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&bo.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,mr(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var vi=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};vi.now=pd.now;var _i=class extends vi{constructor(e,t=vi.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Ao=new _i(yi),qm=Ao;var ha=class extends yi{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return r!==null&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=mi.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(r!=null?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);let{actions:o}=e;t!=null&&t===e._scheduled&&((i=o[o.length-1])===null||i===void 0?void 0:i.id)!==t&&(mi.cancelAnimationFrame(t),e._scheduled=void 0)}};var ga=class extends _i{flush(e){this._active=!0;let t;e?t=e.id:(t=this._scheduled,this._scheduled=void 0);let{actions:r}=this,i;e=e||r.shift();do if(i=e.execute(e.state,e.delay))break;while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}};var ma=new ga(ha);var ya=new ce(n=>n.complete());function va(n){return n&&ee(n.schedule)}function hd(n){return n[n.length-1]}function zm(n){return ee(hd(n))?n.pop():void 0}function Wn(n){return va(hd(n))?n.pop():void 0}function Wm(n,e){return typeof hd(n)=="number"?n.pop():e}function Km(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(f){try{u(r.next(f))}catch(p){s(p)}}function l(f){try{u(r.throw(f))}catch(p){s(p)}}function u(f){f.done?o(f.value):i(f.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function jm(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Er(n){return this instanceof Er?(this.v=n,this):new Er(n)}function Jm(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(g){return function(m){return Promise.resolve(m).then(g,p)}}function a(g,m){r[g]&&(i[g]=function(y){return new Promise(function(_,E){o.push([g,y,_,E])>1||l(g,y)})},m&&(i[g]=m(i[g])))}function l(g,m){try{u(r[g](m))}catch(y){h(o[0][3],y)}}function u(g){g.value instanceof Er?Promise.resolve(g.value.v).then(f,p):h(o[0][2],g)}function f(g){l("next",g)}function p(g){l("throw",g)}function h(g,m){g(m),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Ym(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof jm=="function"?jm(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}}var _a=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ea(n){return ee(n?.then)}function Ca(n){return ee(n[hi])}function Da(n){return Symbol.asyncIterator&&ee(n?.[Symbol.asyncIterator])}function Sa(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function dw(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var wa=dw();function Ta(n){return ee(n?.[wa])}function Ia(n){return Jm(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Er(t.read());if(i)return yield Er(void 0);yield yield Er(r)}}finally{t.releaseLock()}})}function ba(n){return ee(n?.getReader)}function ke(n){if(n instanceof ce)return n;if(n!=null){if(Ca(n))return fw(n);if(_a(n))return pw(n);if(Ea(n))return hw(n);if(Da(n))return Zm(n);if(Ta(n))return gw(n);if(ba(n))return mw(n)}throw Sa(n)}function fw(n){return new ce(e=>{let t=n[hi]();if(ee(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function pw(n){return new ce(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function hw(n){return new ce(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ua)})}function gw(n){return new ce(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Zm(n){return new ce(e=>{yw(n,e).catch(t=>e.error(t))})}function mw(n){return Zm(Ia(n))}function yw(n,e){var t,r,i,o;return Km(this,void 0,void 0,function*(){try{for(t=Ym(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Nt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Aa(n,e=0){return Se((t,r)=>{t.subscribe(Te(r,i=>Nt(r,n,()=>r.next(i),e),()=>Nt(r,n,()=>r.complete(),e),i=>Nt(r,n,()=>r.error(i),e)))})}function Ma(n,e=0){return Se((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Qm(n,e){return ke(n).pipe(Ma(e),Aa(e))}function Xm(n,e){return ke(n).pipe(Ma(e),Aa(e))}function ey(n,e){return new ce(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function ty(n,e){return new ce(t=>{let r;return Nt(t,e,()=>{r=n[wa](),Nt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ee(r?.return)&&r.return()})}function xa(n,e){if(!n)throw new Error("Iterable cannot be null");return new ce(t=>{Nt(t,e,()=>{let r=n[Symbol.asyncIterator]();Nt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function ny(n,e){return xa(Ia(n),e)}function ry(n,e){if(n!=null){if(Ca(n))return Qm(n,e);if(_a(n))return ey(n,e);if(Ea(n))return Xm(n,e);if(Da(n))return xa(n,e);if(Ta(n))return ty(n,e);if(ba(n))return ny(n,e)}throw Sa(n)}function An(n,e){return e?ry(n,e):ke(n)}function Ee(...n){let e=Wn(n);return An(n,e)}function iy(n){return n instanceof Date&&!isNaN(n)}function Ie(n,e){return Se((t,r)=>{let i=0;t.subscribe(Te(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:vw}=Array;function _w(n,e){return vw(e)?n(...e):n(e)}function oy(n){return Ie(e=>_w(n,e))}var{isArray:Ew}=Array,{getPrototypeOf:Cw,prototype:Dw,keys:Sw}=Object;function sy(n){if(n.length===1){let e=n[0];if(Ew(e))return{args:e,keys:null};if(ww(e)){let t=Sw(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function ww(n){return n&&typeof n=="object"&&Cw(n)===Dw}function ay(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ly(n,e,t,r,i,o,s,a){let l=[],u=0,f=0,p=!1,h=()=>{p&&!l.length&&!u&&e.complete()},g=y=>u<r?m(y):l.push(y),m=y=>{o&&e.next(y),u++;let _=!1;ke(t(y,f++)).subscribe(Te(e,E=>{i?.(E),o?g(E):e.next(E)},()=>{_=!0},void 0,()=>{if(_)try{for(u--;l.length&&u<r;){let E=l.shift();s?Nt(e,s,()=>m(E)):m(E)}h()}catch(E){e.error(E)}}))};return n.subscribe(Te(e,g,()=>{p=!0,h()})),()=>{a?.()}}function Ei(n,e,t=1/0){return ee(e)?Ei((r,i)=>Ie((o,s)=>e(r,o,i,s))(ke(n(r,i))),t):(typeof e=="number"&&(t=e),Se((r,i)=>ly(r,i,n,t)))}function Ra(n=1/0){return Ei(gi,n)}function cy(){return Ra(1)}function gd(...n){return cy()(An(n,Wn(n)))}function md(...n){let e=zm(n),{args:t,keys:r}=sy(n),i=new ce(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),l=s,u=s;for(let f=0;f<s;f++){let p=!1;ke(t[f]).subscribe(Te(o,h=>{p||(p=!0,u--),a[f]=h},()=>l--,void 0,()=>{(!l||!p)&&(u||o.next(r?ay(r,a):a),o.complete())}))}});return e?i.pipe(oy(e)):i}function Na(n=0,e,t=qm){let r=-1;return e!=null&&(va(e)?t=e:r=e),new ce(i=>{let o=iy(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function yd(n=0,e=Ao){return n<0&&(n=0),Na(n,n,e)}function Mo(...n){let e=Wn(n),t=Wm(n,1/0),r=n;return r.length?r.length===1?ke(r[0]):Ra(t)(An(r,e)):ya}function xo(n,e){return Se((t,r)=>{let i=0;t.subscribe(Te(r,o=>n.call(e,o,i++)&&r.next(o)))})}function uy(n){return Se((e,t)=>{let r=!1,i=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,r){r=!1;let u=i;i=null,t.next(u)}s&&t.complete()},l=()=>{o=null,s&&t.complete()};e.subscribe(Te(t,u=>{r=!0,i=u,o||ke(n(u)).subscribe(o=Te(t,a,l))},()=>{s=!0,(!r||!o||o.closed)&&t.complete()}))})}function ka(n,e=Ao){return uy(()=>Na(n,e))}function zt(n){return Se((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Te(t,void 0,void 0,s=>{o=ke(n(s,zt(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function vd(n,e){return ee(e)?Ei(n,e,1):Ei(n,1)}function _d(n){return n<=0?()=>ya:Se((e,t)=>{let r=0;e.subscribe(Te(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Pa(n){return Se((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ro(...n){let e=Wn(n);return Se((t,r)=>{(e?gd(n,t,e):gd(n,t)).subscribe(r)})}function Mn(n,e){return Se((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Te(r,l=>{i?.unsubscribe();let u=0,f=o++;ke(n(l,f)).subscribe(i=Te(r,p=>r.next(e?e(l,p,f,u++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Cr(n){return Se((e,t)=>{ke(n).subscribe(Te(t,()=>t.complete(),Io)),!t.closed&&e.subscribe(t)})}function Ci(n,e,t){let r=ee(n)||e||t?{next:n,error:e,complete:t}:n;return r?Se((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Te(o,l=>{var u;(u=r.next)===null||u===void 0||u.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,l),o.error(l)},()=>{var l,u;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):gi}var Ed;function Fa(){return Ed}function dn(n){let e=Ed;return Ed=n,e}var dy=Symbol("NotFound");function Di(n){return n===dy||n?.name==="\u0275NotFound"}var $a="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",M=class extends Error{code;constructor(e,t){super(br(e,t)),this.code=e}};function Tw(n){return`NG0${Math.abs(n)}`}function br(n,e){return`${Tw(n)}${e?": "+e:""}`}var Ar=globalThis;function _e(n){for(let e in n)if(n[e]===_e)return e;throw Error("")}function my(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function jn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(jn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Ga(n,e){return n?e?`${n} ${e}`:n:e||""}var Iw=_e({__forward_ref__:_e});function gt(n){return n.__forward_ref__=gt,n.toString=function(){return jn(this())},n}function Ke(n){return kd(n)?n():n}function kd(n){return typeof n=="function"&&n.hasOwnProperty(Iw)&&n.__forward_ref__===gt}function R(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ot(n){return{providers:n.providers||[],imports:n.imports||[]}}function qa(n){return bw(n,za)}function bw(n,e){return n.hasOwnProperty(e)&&n[e]||null}function Aw(n){let e=n?.[za]??null;return e||null}function Dd(n){return n&&n.hasOwnProperty(La)?n[La]:null}var za=_e({\u0275prov:_e}),La=_e({\u0275inj:_e}),F=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=R({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Pd(n){return n&&!!n.\u0275providers}var Fd=_e({\u0275cmp:_e}),Od=_e({\u0275dir:_e}),Ld=_e({\u0275pipe:_e});var ko=_e({\u0275fac:_e}),Mr=_e({__NG_ELEMENT_ID__:_e}),fy=_e({__NG_ENV_ID__:_e});function Yn(n){return Bd(n,"@Component"),n[Fd]||null}function Vd(n){return Bd(n,"@Directive"),n[Od]||null}function yy(n){return Bd(n,"@Pipe"),n[Ld]||null}function Bd(n,e){if(n==null)throw new M(-919,!1)}function wi(n){return typeof n=="string"?n:n==null?"":String(n)}var vy=_e({ngErrorCode:_e}),Mw=_e({ngErrorMessage:_e}),xw=_e({ngTokenPath:_e});function Ud(n,e){return _y("",-200,e)}function Wa(n,e){throw new M(-201,!1)}function _y(n,e,t){let r=new M(e,n);return r[vy]=e,r[Mw]=n,t&&(r[xw]=t),r}function Rw(n){return n[vy]}var Sd;function Ey(){return Sd}function It(n){let e=Sd;return Sd=n,e}function Hd(n,e,t){let r=qa(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Wa(n,"")}var Nw={},Dr=Nw,kw="__NG_DI_FLAG__",wd=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Sr(t)||0;try{return this.injector.get(e,r&8?null:Dr,r)}catch(i){if(Di(i))return i;throw i}}};function Pw(n,e=0){let t=Fa();if(t===void 0)throw new M(-203,!1);if(t===null)return Hd(n,void 0,e);{let r=Fw(e),i=t.retrieve(n,r);if(Di(i)){if(r.optional)return null;throw i}return i}}function Z(n,e=0){return(Ey()||Pw)(Ke(n),e)}function S(n,e){return Z(n,Sr(e))}function Sr(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Fw(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Td(n){let e=[];for(let t=0;t<n.length;t++){let r=Ke(n[t]);if(Array.isArray(r)){if(r.length===0)throw new M(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],l=Ow(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(Z(i,o))}else e.push(Z(r))}return e}function Ow(n){return n[kw]}function wr(n,e){let t=n.hasOwnProperty(ko);return t?n[ko]:null}function ja(n,e){n.forEach(t=>Array.isArray(t)?ja(t,e):e(t))}function $d(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Vo(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Cy(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function Dy(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Ka(n,e,t){let r=Ti(n,e);return r>=0?n[r|1]=t:(r=~r,Dy(n,r,e,t)),r}function Ja(n,e){let t=Ti(n,e);if(t>=0)return n[t|1]}function Ti(n,e){return Lw(n,e,1)}function Lw(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Zn={},it=[],Bo=new F(""),Gd=new F("",-1),qd=new F(""),Po=class{get(e,t=Dr){if(t===Dr){let i=_y("",-201);throw i.name="\u0275NotFound",i}return t}};function Uo(n){return{\u0275providers:n}}function Sy(...n){return{\u0275providers:zd(!0,n),\u0275fromNgModule:!0}}function zd(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return ja(e,s=>{let a=s;Va(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&wy(i,o),t}function wy(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Wd(i,o=>{e(o,r)})}}function Va(n,e,t,r){if(n=Ke(n),!n)return!1;let i=null,o=Dd(n),s=!o&&Yn(n);if(!o&&!s){let l=n.ngModule;if(o=Dd(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)Va(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;ja(o.imports,f=>{Va(f,e,t,r)&&(u||=[],u.push(f))}),u!==void 0&&wy(u,e)}if(!a){let u=wr(i)||(()=>new i);e({provide:i,useFactory:u,deps:it},i),e({provide:qd,useValue:i,multi:!0},i),e({provide:Bo,useValue:()=>Z(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let u=n;Wd(l,f=>{e(f,u)})}}else return!1;return i!==n&&n.providers!==void 0}function Wd(n,e){for(let t of n)Pd(t)&&(t=t.\u0275providers),Array.isArray(t)?Wd(t,e):e(t)}var Vw=_e({provide:String,useValue:_e});function Ty(n){return n!==null&&typeof n=="object"&&Vw in n}function Bw(n){return!!(n&&n.useExisting)}function Uw(n){return!!(n&&n.useFactory)}function Tr(n){return typeof n=="function"}function Iy(n){return!!n.useClass}var Ho=new F(""),Oa={},py={},Cd;function Ii(){return Cd===void 0&&(Cd=new Po),Cd}var Je=class{},Ir=class extends Je{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,bd(e,s=>this.processProvider(s)),this.records.set(Gd,Si(void 0,this)),i.has("environment")&&this.records.set(Je,Si(void 0,this));let o=this.records.get(Ho);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(qd,it,{self:!0}))}retrieve(e,t){let r=Sr(t)||0;try{return this.get(e,Dr,r)}catch(i){if(Di(i))return i;throw i}}destroy(){No(this),this._destroyed=!0;let e=$(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),$(e)}}onDestroy(e){return No(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){No(this);let t=dn(this),r=It(void 0),i;try{return e()}finally{dn(t),It(r)}}get(e,t=Dr,r){if(No(this),e.hasOwnProperty(fy))return e[fy](this);let i=Sr(r),o,s=dn(this),a=It(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let f=zw(e)&&qa(e);f&&this.injectableDefInScope(f)?u=Si(Id(e),Oa):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,i)}let l=i&2?Ii():this.parent;return t=i&8&&t===Dr?null:t,l.get(e,t)}catch(l){let u=Rw(l);throw u===-200||u===-201?new M(u,null):l}finally{It(a),dn(s)}}resolveInjectorInitializers(){let e=$(null),t=dn(this),r=It(void 0),i;try{let o=this.get(Bo,it,{self:!0});for(let s of o)s()}finally{dn(t),It(r),$(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(jn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ke(e);let t=Tr(e)?e:Ke(e&&e.provide),r=$w(e);if(!Tr(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Si(void 0,Oa,!0),i.factory=()=>Td(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=$(null);try{if(t.value===py)throw Ud(jn(e));return t.value===Oa&&(t.value=py,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&qw(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{$(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ke(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Id(n){let e=qa(n),t=e!==null?e.factory:wr(n);if(t!==null)return t;if(n instanceof F)throw new M(204,!1);if(n instanceof Function)return Hw(n);throw new M(204,!1)}function Hw(n){if(n.length>0)throw new M(204,!1);let t=Aw(n);return t!==null?()=>t.factory(n):()=>new n}function $w(n){if(Ty(n))return Si(void 0,n.useValue);{let e=jd(n);return Si(e,Oa)}}function jd(n,e,t){let r;if(Tr(n)){let i=Ke(n);return wr(i)||Id(i)}else if(Ty(n))r=()=>Ke(n.useValue);else if(Uw(n))r=()=>n.useFactory(...Td(n.deps||[]));else if(Bw(n))r=(i,o)=>Z(Ke(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ke(n&&(n.useClass||n.provide));if(Gw(n))r=()=>new i(...Td(n.deps));else return wr(i)||Id(i)}return r}function No(n){if(n.destroyed)throw new M(205,!1)}function Si(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Gw(n){return!!n.deps}function qw(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function zw(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function bd(n,e){for(let t of n)Array.isArray(t)?bd(t,e):t&&Pd(t)?bd(t.\u0275providers,e):e(t)}function bi(n,e){let t;n instanceof Ir?(No(n),t=n):t=new wd(n);let r,i=dn(t),o=It(void 0);try{return e()}finally{dn(i),It(o)}}function by(){return Ey()!==void 0||Fa()!=null}var Wt=0,W=1,z=2,We=3,Pt=4,st=5,xr=6,Ai=7,Oe=8,Nn=9,fn=10,be=11,Mi=12,Kd=13,Rr=14,at=15,Nr=16,kr=17,Pr=18,kn=19,Jd=20,xn=21,Ya=22,Kn=23,bt=24,Fr=25,Or=26,Ge=27,Ay=1,Yd=6,Qn=7,$o=8,Go=9,Le=10;function pn(n){return Array.isArray(n)&&typeof n[Ay]=="object"}function jt(n){return Array.isArray(n)&&n[Ay]===!0}function Zd(n){return(n.flags&4)!==0}function Xn(n){return n.componentOffset>-1}function qo(n){return(n.flags&1)===1}function hn(n){return!!n.template}function xi(n){return(n[z]&512)!==0}function Lr(n){return(n[z]&256)===256}var Qd="svg",My="math";function Ft(n){for(;Array.isArray(n);)n=n[Wt];return n}function Xd(n,e){return Ft(e[n])}function Kt(n,e){return Ft(e[n.index])}function zo(n,e){return n.data[e]}function Ot(n,e){let t=e[n];return pn(t)?t:t[Wt]}function Za(n){return(n[z]&128)===128}function xy(n){return jt(n[We])}function gn(n,e){return e==null?null:n[e]}function ef(n){n[kr]=0}function tf(n){n[z]&1024||(n[z]|=1024,Za(n)&&Vr(n))}function Ry(n,e){for(;n>0;)e=e[Rr],n--;return e}function Wo(n){return!!(n[z]&9216||n[bt]?.dirty)}function Qa(n){n[fn].changeDetectionScheduler?.notify(8),n[z]&64&&(n[z]|=1024),Wo(n)&&Vr(n)}function Vr(n){n[fn].changeDetectionScheduler?.notify(0);let e=Jn(n);for(;e!==null&&!(e[z]&8192||(e[z]|=8192,!Za(e)));)e=Jn(e)}function nf(n,e){if(Lr(n))throw new M(911,!1);n[xn]===null&&(n[xn]=[]),n[xn].push(e)}function Ny(n,e){if(n[xn]===null)return;let t=n[xn].indexOf(e);t!==-1&&n[xn].splice(t,1)}function Jn(n){let e=n[We];return jt(e)?e[We]:e}function ky(n){return n[Ai]??=[]}function Py(n){return n.cleanup??=[]}var X={lFrame:Ky(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Ad=!1;function Fy(){return X.lFrame.elementDepthCount}function Oy(){X.lFrame.elementDepthCount++}function Ly(){X.lFrame.elementDepthCount--}function rf(){return X.bindingsEnabled}function of(){return X.skipHydrationRootTNode!==null}function Vy(n){return X.skipHydrationRootTNode===n}function By(){X.skipHydrationRootTNode=null}function ne(){return X.lFrame.lView}function je(){return X.lFrame.tView}function ue(n){return X.lFrame.contextLView=n,n[Oe]}function de(n){return X.lFrame.contextLView=null,n}function mt(){let n=sf();for(;n!==null&&n.type===64;)n=n.parent;return n}function sf(){return X.lFrame.currentTNode}function Uy(){let n=X.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ri(n,e){let t=X.lFrame;t.currentTNode=n,t.isParent=e}function af(){return X.lFrame.isParent}function lf(){X.lFrame.isParent=!1}function cf(){return Ad}function Fo(n){let e=Ad;return Ad=n,e}function Hy(){return X.lFrame.bindingIndex}function $y(n){return X.lFrame.bindingIndex=n}function Br(){return X.lFrame.bindingIndex++}function Xa(n){let e=X.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Gy(){return X.lFrame.inI18n}function qy(n,e){let t=X.lFrame;t.bindingIndex=t.bindingRootIndex=n,el(e)}function zy(){return X.lFrame.currentDirectiveIndex}function el(n){X.lFrame.currentDirectiveIndex=n}function Wy(n){let e=X.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function uf(n){X.lFrame.currentQueryIndex=n}function Ww(n){let e=n[W];return e.type===2?e.declTNode:e.type===1?n[st]:null}function df(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=Ww(o),i===null||(o=o[Rr],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=X.lFrame=jy();return r.currentTNode=e,r.lView=n,!0}function tl(n){let e=jy(),t=n[W];X.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function jy(){let n=X.lFrame,e=n===null?null:n.child;return e===null?Ky(n):e}function Ky(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Jy(){let n=X.lFrame;return X.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var ff=Jy;function nl(){let n=Jy();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Yy(n){return(X.lFrame.contextLView=Ry(n,X.lFrame.contextLView))[Oe]}function mn(){return X.lFrame.selectedIndex}function er(n){X.lFrame.selectedIndex=n}function rl(){let n=X.lFrame;return zo(n.tView,n.selectedIndex)}function ae(){X.lFrame.currentNamespace=Qd}function Ae(){jw()}function jw(){X.lFrame.currentNamespace=null}function Zy(){return X.lFrame.currentNamespace}var Qy=!0;function il(){return Qy}function ol(n){Qy=n}function Md(n,e=null,t=null,r){let i=Xy(n,e,t,r);return i.resolveInjectorInitializers(),i}function Xy(n,e=null,t=null,r,i=new Set){let o=[t||it,Sy(n)];return r=r||(typeof n=="object"?void 0:jn(n)),new Ir(o,e||Ii(),r||null,i)}var Ve=class n{static THROW_IF_NOT_FOUND=Dr;static NULL=new Po;static create(e,t){if(Array.isArray(e))return Md({name:""},t,e,"");{let r=e.name??"";return Md({name:r},e.parent,e.providers,r)}}static \u0275prov=R({token:n,providedIn:"any",factory:()=>Z(Gd)});static __NG_ELEMENT_ID__=-1},Me=new F(""),Lt=(()=>{class n{static __NG_ELEMENT_ID__=Kw;static __NG_ENV_ID__=t=>t}return n})(),Ba=class extends Lt{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Lr(this._lView)}onDestroy(e){let t=this._lView;return nf(t,e),()=>Ny(t,e)}};function Kw(){return new Ba(ne())}var ev=!1,tv=new F(""),Ur=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new _r(!1);debugTaskTracker=S(tv,{optional:!0});get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ce(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),this.debugTaskTracker?.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.debugTaskTracker?.remove(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=R({token:n,providedIn:"root",factory:()=>new n})}return n})(),xd=class extends se{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,by()&&(this.destroyRef=S(Lt,{optional:!0})??void 0,this.pendingTasks=S(Ur,{optional:!0})??void 0)}emit(e){let t=$(null);try{super.next(e)}finally{$(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof De&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},ve=xd;function Ua(...n){}function pf(n){let e,t;function r(){n=Ua;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function nv(n){return queueMicrotask(()=>n()),()=>{n=Ua}}var hf="isAngularZone",Oo=hf+"_ID",Jw=0,xe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ve(!1);onMicrotaskEmpty=new ve(!1);onStable=new ve(!1);onError=new ve(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=ev}=e;if(typeof Zone>"u")throw new M(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Qw(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(hf)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new M(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new M(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Yw,Ua,Ua);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Yw={};function gf(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Zw(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){pf(()=>{n.callbackScheduled=!1,Rd(n),n.isCheckStableRunning=!0,gf(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Rd(n)}function Qw(n){let e=()=>{Zw(n)},t=Jw++;n._inner=n._inner.fork({name:"angular",properties:{[hf]:!0,[Oo]:t,[Oo+t]:!0},onInvokeTask:(r,i,o,s,a,l)=>{if(Xw(l))return r.invokeTask(o,s,a,l);try{return hy(n),r.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),gy(n)}},onInvoke:(r,i,o,s,a,l,u)=>{try{return hy(n),r.invoke(o,s,a,l,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!eT(l)&&e(),gy(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Rd(n),gf(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Rd(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function hy(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function gy(n){n._nesting--,gf(n)}var Lo=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ve;onMicrotaskEmpty=new ve;onStable=new ve;onError=new ve;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Xw(n){return rv(n,"__ignore_ng_zone__")}function eT(n){return rv(n,"__scheduler_tick__")}function rv(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var kt=class{_console=console;handleError(e){this._console.error("ERROR",e)}},tr=new F("",{factory:()=>{let n=S(xe),e=S(Je),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(kt),t.handleError(r))})}}}),iv={provide:Bo,useValue:()=>{let n=S(kt,{optional:!0})},multi:!0};function G(n,e){let[t,r,i]=rd(n,e?.equal),o=t,s=o[rt];return o.set=r,o.update=i,o.asReadonly=mf.bind(o),o}function mf(){let n=this[rt];if(n.readonlyFn===void 0){let e=()=>this();e[rt]=n,n.readonlyFn=e}return n.readonlyFn}var jo=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=tT}return n})();function tT(){return new jo(ne(),mt())}var Rn=class{},Ko=new F("",{factory:()=>!0});var yf=new F(""),Ni=(()=>{class n{internalPendingTasks=S(Ur);scheduler=S(Rn);errorHandler=S(tr);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=R({token:n,providedIn:"root",factory:()=>new n})}return n})(),sl=(()=>{class n{static \u0275prov=R({token:n,providedIn:"root",factory:()=>new Nd})}return n})(),Nd=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},Ha=class{[rt];constructor(e){this[rt]=e}destroy(){this[rt].destroy()}};function ki(n,e){let t=e?.injector??S(Ve),r=e?.manualCleanup!==!0?t.get(Lt):null,i,o=t.get(jo,null,{optional:!0}),s=t.get(Rn);return o!==null?(i=iT(o.view,s,n),r instanceof Ba&&r._lView===o.view&&(r=null)):i=oT(n,t.get(sl),s),i.injector=t,r!==null&&(i.onDestroyFns=[r.onDestroy(()=>i.destroy())]),new Ha(i)}var ov=oe(U({},od),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=Fo(!1);try{sd(this)}finally{Fo(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=$(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],$(n)}}}),nT=oe(U({},ov),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(gr(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),rT=oe(U({},ov),{consumerMarkedDirty(){this.view[z]|=8192,Vr(this.view),this.notifier.notify(13)},destroy(){if(gr(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[Kn]?.delete(this)}});function iT(n,e,t){let r=Object.create(rT);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=sv(r,t),n[Kn]??=new Set,n[Kn].add(r),r.consumerMarkedDirty(r),r}function oT(n,e,t){let r=Object.create(nT);return r.fn=sv(r,n),r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function sv(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}function At(n){return id(n)}function is(n){return{toString:n}.toString()}function hT(n){return typeof n=="function"}function Bv(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var hl=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},Pn=(()=>{let n=()=>Uv;return n.ngInherit=!0,n})();function Uv(n){return n.type.prototype.ngOnChanges&&(n.setInput=mT),gT}function gT(){let n=$v(this),e=n?.current;if(e){let t=n.previous;if(t===Zn)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function mT(n,e,t,r,i){let o=this.declaredInputs[r],s=$v(n)||yT(n,{previous:Zn,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new hl(u&&u.currentValue,t,l===Zn),Bv(n,e,i,t)}var Hv="__ngSimpleChanges__";function $v(n){return n[Hv]||null}function yT(n,e){return n[Hv]=e}var av=[];var he=function(n,e=null,t){for(let r=0;r<av.length;r++){let i=av[r];i(n,e,t)}},le=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(le||{});function vT(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Uv(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Gv(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function dl(n,e,t){qv(n,e,3,t)}function fl(n,e,t,r){(n[z]&3)===t&&qv(n,e,t,r)}function vf(n,e){let t=n[z];(t&3)===e&&(t&=16383,t+=1,n[z]=t)}function qv(n,e,t,r){let i=r!==void 0?n[kr]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(n[kr]+=65536),(a<o||o==-1)&&(_T(n,t,e,l),n[kr]=(n[kr]&4294901760)+l+2),l++}function lv(n,e){he(le.LifecycleHookStart,n,e);let t=$(null);try{e.call(n)}finally{$(t),he(le.LifecycleHookEnd,n,e)}}function _T(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[z]>>14<n[kr]>>16&&(n[z]&3)===e&&(n[z]+=16384,lv(a,o)):lv(a,o)}var Fi=-1,$r=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function ET(n){return(n.flags&8)!==0}function CT(n){return(n.flags&16)!==0}function DT(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];wT(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function ST(n){return n===3||n===4||n===6}function wT(n){return n.charCodeAt(0)===64}function Zo(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?cv(n,t,i,null,e[++r]):cv(n,t,i,null,null))}}return n}function cv(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function zv(n){return n!==Fi}function gl(n){return n&32767}function TT(n){return n>>16}function ml(n,e){let t=TT(n),r=e;for(;t>0;)r=r[Rr],t--;return r}var Mf=!0;function uv(n){let e=Mf;return Mf=n,e}var IT=256,Wv=IT-1,jv=5,bT=0,yn={};function AT(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Mr)&&(r=t[Mr]),r==null&&(r=t[Mr]=bT++);let i=r&Wv,o=1<<i;e.data[n+(i>>jv)]|=o}function yl(n,e){let t=Kv(n,e);if(t!==-1)return t;let r=e[W];r.firstCreatePass&&(n.injectorIndex=e.length,_f(r.data,n),_f(e,null),_f(r.blueprint,null));let i=tp(n,e),o=n.injectorIndex;if(zv(i)){let s=gl(i),a=ml(i,e),l=a[W].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|l[s+u]}return e[o+8]=i,o}function _f(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Kv(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function tp(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Xv(i),r===null)return Fi;if(t++,i=i[Rr],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Fi}function xf(n,e,t){AT(n,e,t)}function Jv(n,e,t){if(t&8||n!==void 0)return n;Wa(e,"NodeInjector")}function Yv(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Nn],o=It(void 0);try{return i?i.get(e,r,t&8):Hd(e,r,t&8)}finally{It(o)}}return Jv(r,e,t)}function Zv(n,e,t,r=0,i){if(n!==null){if(e[z]&2048&&!(r&2)){let s=kT(n,e,t,r,yn);if(s!==yn)return s}let o=Qv(n,e,t,r,yn);if(o!==yn)return o}return Yv(e,t,r,i)}function Qv(n,e,t,r,i){let o=RT(t);if(typeof o=="function"){if(!df(e,n,r))return r&1?Jv(i,t,r):Yv(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Wa(t);else return s}finally{ff()}}else if(typeof o=="number"){let s=null,a=Kv(n,e),l=Fi,u=r&1?e[at][st]:null;for((a===-1||r&4)&&(l=a===-1?tp(n,e):e[a+8],l===Fi||!fv(r,!1)?a=-1:(s=e[W],a=gl(l),e=ml(l,e)));a!==-1;){let f=e[W];if(dv(o,a,f.data)){let p=MT(a,e,t,s,r,u);if(p!==yn)return p}l=e[a+8],l!==Fi&&fv(r,e[W].data[a+8]===u)&&dv(o,a,e)?(s=f,a=gl(l),e=ml(l,e)):a=-1}}return i}function MT(n,e,t,r,i,o){let s=e[W],a=s.data[n+8],l=r==null?Xn(a)&&Mf:r!=s&&(a.type&3)!==0,u=i&1&&o===a,f=xT(a,s,t,l,u);return f!==null?vl(e,s,f,a,i):yn}function xT(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,u=n.directiveEnd,f=o>>20,p=r?a:a+f,h=i?a+f:u;for(let g=p;g<h;g++){let m=s[g];if(g<l&&t===m||g>=l&&m.type===t)return g}if(i){let g=s[l];if(g&&hn(g)&&g.type===t)return l}return null}function vl(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof $r){let a=o;if(a.resolving)throw Ud("");let l=uv(a.canSeeViewProviders);a.resolving=!0;let u=s[t].type||s[t],f,p=a.injectImpl?It(a.injectImpl):null,h=df(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&vT(t,s[t],e)}finally{p!==null&&It(p),uv(l),a.resolving=!1,ff()}}return o}function RT(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Mr)?n[Mr]:void 0;return typeof e=="number"?e>=0?e&Wv:NT:e}function dv(n,e,t){let r=1<<n;return!!(t[e+(n>>jv)]&r)}function fv(n,e){return!(n&2)&&!(n&1&&e)}var Hr=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Zv(this._tNode,this._lView,e,Sr(r),t)}};function NT(){return new Hr(mt(),ne())}function rr(n){return is(()=>{let e=n.prototype.constructor,t=e[ko]||Rf(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[ko]||Rf(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Rf(n){return kd(n)?()=>{let e=Rf(Ke(n));return e&&e()}:wr(n)}function kT(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[z]&2048&&!xi(s);){let a=Qv(o,s,t,r|2,yn);if(a!==yn)return a;let l=o.parent;if(!l){let u=s[Jd];if(u){let f=u.get(t,yn,r);if(f!==yn)return f}l=Xv(s),s=s[Rr]}o=l}return i}function Xv(n){let e=n[W],t=e.type;return t===2?e.declTNode:t===1?n[st]:null}function PT(){return bl(mt(),ne())}function bl(n,e){return new ct(Kt(n,e))}var ct=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=PT}return n})();function e_(n){return(n.flags&128)===128}var np=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(np||{}),t_=new Map,FT=0;function OT(){return FT++}function LT(n){t_.set(n[kn],n)}function Nf(n){t_.delete(n[kn])}var pv="__ngContext__";function Oi(n,e){pn(e)?(n[pv]=e[kn],LT(e)):n[pv]=e}function n_(n){return i_(n[Mi])}function r_(n){return i_(n[Pt])}function i_(n){for(;n!==null&&!jt(n);)n=n[Pt];return n}var kf;function rp(n){kf=n}function o_(){if(kf!==void 0)return kf;if(typeof document<"u")return document;throw new M(210,!1)}var Ui=new F("",{factory:()=>VT}),VT="ng";var Al=new F(""),zr=new F("",{providedIn:"platform",factory:()=>"unknown"}),Ml=new F(""),xl=new F("",{factory:()=>S(Me).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var s_="r";var a_="di";var l_=!1,c_=new F("",{factory:()=>l_});var BT=(n,e,t,r)=>{};function UT(n,e,t,r){BT(n,e,t,r)}function Rl(n){return(n.flags&32)===32}var HT=()=>null;function u_(n,e,t=!1){return HT(n,e,t)}function d_(n,e){let t=n.contentQueries;if(t!==null){let r=$(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];uf(o),a.contentQueries(2,e[s],s)}}}finally{$(r)}}}function Pf(n,e,t){uf(0);let r=$(null);try{e(n,t)}finally{$(r)}}function f_(n,e,t){if(Zd(e)){let r=$(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{$(r)}}}var Zt=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(Zt||{});var al;function $T(){if(al===void 0&&(al=null,Ar.trustedTypes))try{al=Ar.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return al}function Nl(n){return $T()?.createHTML(n)||n}var ll;function GT(){if(ll===void 0&&(ll=null,Ar.trustedTypes))try{ll=Ar.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ll}function hv(n){return GT()?.createHTML(n)||n}var _l=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${$a})`}};function kl(n){return n instanceof _l?n.changingThisBreaksApplicationSecurity:n}function p_(n,e){let t=h_(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${$a})`)}return t===e}function h_(n){return n instanceof _l&&n.getTypeName()||null}function qT(n){let e=new Of(n);return zT()?new Ff(e):e}var Ff=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Nl(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},Of=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Nl(e),t}};function zT(){try{return!!new window.DOMParser().parseFromString(Nl(""),"text/html")}catch{return!1}}var WT=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function g_(n){return n=String(n),n.match(WT)?n:"unsafe:"+n}function Fn(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function os(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var m_=Fn("area,br,col,hr,img,wbr"),y_=Fn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),v_=Fn("rp,rt"),jT=os(v_,y_),KT=os(y_,Fn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),JT=os(v_,Fn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),gv=os(m_,KT,JT,jT),__=Fn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),YT=Fn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ZT=Fn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),QT=os(__,YT,ZT),XT=Fn("script,style,template"),Lf=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=nI(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=tI(t);if(o){t=o;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=mv(e).toLowerCase();if(!gv.hasOwnProperty(t))return this.sanitizedSomething=!0,!XT.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!QT.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;__[a]&&(l=g_(l)),this.buf.push(" ",s,'="',yv(l),'"')}return this.buf.push(">"),!0}endElement(e){let t=mv(e).toLowerCase();gv.hasOwnProperty(t)&&!m_.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(yv(e))}};function eI(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function tI(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw E_(e);return e}function nI(n){let e=n.firstChild;if(e&&eI(n,e))throw E_(e);return e}function mv(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function E_(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var rI=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,iI=/([^\#-~ |!])/g;function yv(n){return n.replace(/&/g,"&amp;").replace(rI,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(iI,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var cl;function C_(n,e){let t=null;try{cl=cl||qT(n);let r=e?String(e):"";t=cl.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=cl.getInertBodyElement(r)}while(r!==o);let a=new Lf().sanitizeChildren(vv(t)||t);return Nl(a)}finally{if(t){let r=vv(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function vv(n){return"content"in n&&oI(n)?n.content:null}function oI(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}function sI(n,e){return n.createText(e)}function aI(n,e,t){n.setValue(e,t)}function D_(n,e,t){return n.createElement(e,t)}function El(n,e,t,r,i){n.insertBefore(e,t,r,i)}function S_(n,e,t){n.appendChild(e,t)}function _v(n,e,t,r,i){r!==null?El(n,e,t,r,i):S_(n,e,t)}function w_(n,e,t,r){n.removeChild(null,e,t,r)}function lI(n,e,t){n.setAttribute(e,"style",t)}function cI(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function T_(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&DT(n,e,r),i!==null&&cI(n,e,i),o!==null&&lI(n,e,o)}var ip=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(ip||{});function Hi(n){let e=uI();return e?hv(e.sanitize(ip.HTML,n)||""):p_(n,"HTML")?hv(kl(n)):C_(o_(),wi(n))}function uI(){let n=ne();return n&&n[fn].sanitizer}function ss(n){return n.ownerDocument}function dI(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var I_="ng-template";function fI(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&dI(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(op(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function op(n){return n.type===4&&n.value!==I_}function pI(n,e,t){let r=n.type===4&&!t?I_:n.value;return e===r}function hI(n,e,t){let r=4,i=n.attrs,o=i!==null?yI(i):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!Jt(r)&&!Jt(l))return!1;if(s&&Jt(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!pI(n,l,t)||l===""&&e.length===1){if(Jt(r))return!1;s=!0}}else if(r&8){if(i===null||!fI(n,i,l,t)){if(Jt(r))return!1;s=!0}}else{let u=e[++a],f=gI(l,i,op(n),t);if(f===-1){if(Jt(r))return!1;s=!0;continue}if(u!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&u!==p){if(Jt(r))return!1;s=!0}}}}return Jt(r)||s}function Jt(n){return(n&1)===0}function gI(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return vI(e,n)}function b_(n,e,t=!1){for(let r=0;r<e.length;r++)if(hI(n,e[r],t))return!0;return!1}function mI(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function yI(n){for(let e=0;e<n.length;e++){let t=n[e];if(ST(t))return e}return n.length}function vI(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function _I(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function Ev(n,e){return n?":not("+e.trim()+")":e}function EI(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Jt(s)&&(e+=Ev(o,i),i=""),r=s,o=o||!Jt(r);t++}return i!==""&&(e+=Ev(o,i)),e}function CI(n){return n.map(EI).join(",")}function DI(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Jt(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Mt={};function sp(n,e,t,r,i,o,s,a,l,u,f){let p=Ge+r,h=p+i,g=SI(p,h),m=typeof u=="function"?u():u;return g[W]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1,ssrId:f}}function SI(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Mt);return t}function wI(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=sp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function ap(n,e,t,r,i,o,s,a,l,u,f){let p=e.blueprint.slice();return p[Wt]=i,p[z]=r|4|128|8|64|1024,(u!==null||n&&n[z]&2048)&&(p[z]|=2048),ef(p),p[We]=p[Rr]=n,p[Oe]=t,p[fn]=s||n&&n[fn],p[be]=a||n&&n[be],p[Nn]=l||n&&n[Nn]||null,p[st]=o,p[kn]=OT(),p[xr]=f,p[Jd]=u,p[at]=e.type==2?n[at]:p,p}function TI(n,e,t){let r=Kt(e,n),i=wI(t),o=n[fn].rendererFactory,s=lp(n,ap(n,i,null,A_(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function A_(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function M_(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function lp(n,e){return n[Mi]?n[Kd][Pt]=e:n[Mi]=e,n[Kd]=e,e}function D(n=1){x_(je(),ne(),mn()+n,!1)}function x_(n,e,t,r){if(!r)if((e[z]&3)===3){let o=n.preOrderCheckHooks;o!==null&&dl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&fl(e,o,0,t)}er(t)}var Pl=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Pl||{});function Vf(n,e,t,r){let i=$(null);try{let[o,s,a]=n.inputs[t],l=null;(s&Pl.SignalBased)!==0&&(l=e[o][rt]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,l,r,t,o):Bv(e,l,o,r)}finally{$(i)}}var vn=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(vn||{}),II;function cp(n,e){return II(n,e)}var Gr=new Set,Fl=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Fl||{}),On=new F(""),Cv=new Set;function En(n){Cv.has(n)||(Cv.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var up=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=R({token:n,providedIn:"root",factory:()=>new n})}return n})(),R_=[0,1,2,3],N_=(()=>{class n{ngZone=S(xe);scheduler=S(Rn);errorHandler=S(kt,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){S(On,{optional:!0})}execute(){let t=this.sequences.size>0;t&&he(le.AfterRenderHooksStart),this.executing=!0;for(let r of R_)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&he(le.AfterRenderHooksEnd)}register(t){let{view:r}=t;r!==void 0?((r[Fr]??=[]).push(t),Vr(r),r[z]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Fl.AFTER_NEXT_RENDER,t):t()}static \u0275prov=R({token:n,providedIn:"root",factory:()=>new n})}return n})(),Cl=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Fr];e&&(this.view[Fr]=e.filter(t=>t!==this))}};function $i(n,e){let t=e?.injector??S(Ve);return En("NgAfterNextRender"),AI(n,t,e,!0)}function bI(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function AI(n,e,t,r){let i=e.get(up);i.impl??=e.get(N_);let o=e.get(On,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Lt):null,a=e.get(jo,null,{optional:!0}),l=new Cl(i.impl,bI(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(l),l}var k_=new F("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:S(Je)})});function P_(n,e,t){let r=n.get(k_);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function MI(n,e){let t=n.get(k_);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)t.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function xI(n,e){for(let[t,r]of e)P_(n,r.animateFns)}function Dv(n,e,t,r){let i=n?.[Or]?.enter;e!==null&&i&&i.has(t.index)&&xI(r,i)}function Pi(n,e,t,r,i,o,s,a){if(i!=null){let l,u=!1;jt(i)?l=i:pn(i)&&(u=!0,i=i[Wt]);let f=Ft(i);n===0&&r!==null?(Dv(a,r,o,t),s==null?S_(e,r,f):El(e,r,f,s||null,!0)):n===1&&r!==null?(Dv(a,r,o,t),El(e,r,f,s||null,!0)):n===2?Sv(a,o,t,p=>{w_(e,f,u,p)}):n===3&&Sv(a,o,t,()=>{e.destroyNode(f)}),l!=null&&HI(e,n,t,l,o,r,s)}}function RI(n,e){F_(n,e),e[Wt]=null,e[st]=null}function NI(n,e,t,r,i,o){r[Wt]=i,r[st]=e,Ll(n,r,t,1,i,o)}function F_(n,e){e[fn].changeDetectionScheduler?.notify(9),Ll(n,e,e[be],2,null,null)}function kI(n){let e=n[Mi];if(!e)return Ef(n[W],n);for(;e;){let t=null;if(pn(e))t=e[Mi];else{let r=e[Le];r&&(t=r)}if(!t){for(;e&&!e[Pt]&&e!==n;)pn(e)&&Ef(e[W],e),e=e[We];e===null&&(e=n),pn(e)&&Ef(e[W],e),t=e&&e[Pt]}e=t}}function dp(n,e){let t=n[Go],r=t.indexOf(e);t.splice(r,1)}function Ol(n,e){if(Lr(e))return;let t=e[be];t.destroyNode&&Ll(n,e,t,3,null,null),kI(e)}function Ef(n,e){if(Lr(e))return;let t=$(null);try{e[z]&=-129,e[z]|=256,e[bt]&&gr(e[bt]),OI(n,e),FI(n,e),e[W].type===1&&e[be].destroy();let r=e[Nr];if(r!==null&&jt(e[We])){r!==e[We]&&dp(r,e);let i=e[Pr];i!==null&&i.detachView(n)}Nf(e)}finally{$(t)}}function Sv(n,e,t,r){let i=n?.[Or];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Gr.add(n[kn]),P_(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let l=0;l<s.animateFns.length;l++){let u=s.animateFns[l],{promise:f}=u();a.push(f)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),PI(n,r)}else n&&Gr.delete(n[kn]),r(!1)},i)}function PI(n,e){let t=n[Or]?.running;if(t){t.then(()=>{n[Or].running=void 0,Gr.delete(n[kn]),e(!0)});return}e(!1)}function FI(n,e){let t=n.cleanup,r=e[Ai];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Ai]=null);let i=e[xn];if(i!==null){e[xn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Kn];if(o!==null){e[Kn]=null;for(let s of o)s.destroy()}}function OI(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof $r)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];he(le.LifecycleHookStart,a,l);try{l.call(a)}finally{he(le.LifecycleHookEnd,a,l)}}else{he(le.LifecycleHookStart,i,o);try{o.call(i)}finally{he(le.LifecycleHookEnd,i,o)}}}}}function O_(n,e,t){return LI(n,e.parent,t)}function LI(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Wt];if(Xn(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Zt.None||i===Zt.Emulated)return null}return Kt(r,t)}function L_(n,e,t){return BI(n,e,t)}function VI(n,e,t){return n.type&40?Kt(n,t):null}var BI=VI,wv;function fp(n,e,t,r){let i=O_(n,r,e),o=e[be],s=r.parent||e[st],a=L_(s,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)_v(o,i,t[l],a,!1);else _v(o,i,t,a,!1);wv!==void 0&&wv(o,r,e,t,i)}function Jo(n,e){if(e!==null){let t=e.type;if(t&3)return Kt(e,n);if(t&4)return Bf(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Jo(n,r);{let i=n[e.index];return jt(i)?Bf(-1,i):Ft(i)}}else{if(t&128)return Jo(n,e.next);if(t&32)return cp(e,n)()||Ft(n[e.index]);{let r=V_(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Jn(n[at]);return Jo(i,r)}else return Jo(n,e.next)}}}return null}function V_(n,e){if(e!==null){let r=n[at][st],i=e.projection;return r.projection[i]}return null}function Bf(n,e){let t=Le+n+1;if(t<e.length){let r=e[t],i=r[W].firstChild;if(i!==null)return Jo(r,i)}return e[Qn]}function pp(n,e,t,r,i,o,s){for(;t!=null;){let a=r[Nn];if(t.type===128){t=t.next;continue}let l=r[t.index],u=t.type;if(s&&e===0&&(l&&Oi(Ft(l),r),t.flags|=2),!Rl(t))if(u&8)pp(n,e,t.child,r,i,o,!1),Pi(e,n,a,i,l,t,o,r);else if(u&32){let f=cp(t,r),p;for(;p=f();)Pi(e,n,a,i,p,t,o,r);Pi(e,n,a,i,l,t,o,r)}else u&16?B_(n,e,r,t,i,o):Pi(e,n,a,i,l,t,o,r);t=s?t.projectionNext:t.next}}function Ll(n,e,t,r,i,o){pp(t,r,n.firstChild,e,i,o,!1)}function UI(n,e,t){let r=e[be],i=O_(n,t,e),o=t.parent||e[st],s=L_(o,t,e);B_(r,0,e,t,i,s)}function B_(n,e,t,r,i,o){let s=t[at],l=s[st].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let f=l[u];Pi(e,n,t[Nn],i,f,r,o,t)}else{let u=l,f=s[We];e_(r)&&(u.flags|=128),pp(n,e,u,f,i,o,!0)}}function HI(n,e,t,r,i,o,s){let a=r[Qn],l=Ft(r);a!==l&&Pi(e,n,t,o,a,i,s);for(let u=Le;u<r.length;u++){let f=r[u];Ll(f[W],f,n,e,o,a)}}function $I(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:vn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=vn.Important),n.setStyle(t,r,i,o))}}function U_(n,e,t,r,i){let o=mn(),s=r&2;try{er(-1),s&&e.length>Ge&&x_(n,e,Ge,!1);let a=s?le.TemplateUpdateStart:le.TemplateCreateStart;he(a,i,t),t(r,i)}finally{er(o);let a=s?le.TemplateUpdateEnd:le.TemplateCreateEnd;he(a,i,t)}}function hp(n,e,t){JI(n,e,t),(t.flags&64)===64&&YI(n,e,t)}function gp(n,e,t=Kt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function GI(n,e,t,r){let o=r.get(c_,l_)||t===Zt.ShadowDom||t===Zt.ExperimentalIsolatedShadowDom,s=n.selectRootElement(e,o);return qI(s),s}function qI(n){zI(n)}var zI=()=>null;function WI(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function H_(n,e,t,r,i,o){let s=e[W];if(mp(n,s,e,t,r)){Xn(n)&&KI(e,n.index);return}n.type&3&&(t=WI(t)),jI(n,e,t,r,i,o)}function jI(n,e,t,r,i,o){if(n.type&3){let s=Kt(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function KI(n,e){let t=Ot(e,n);t[z]&16||(t[z]|=64)}function JI(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Xn(t)&&TI(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||yl(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],l=vl(e,n,s,t);if(Oi(l,e),o!==null&&eb(e,s-r,l,a,t,o),hn(a)){let u=Ot(t.index,e);u[Oe]=vl(e,n,s,t)}}}function YI(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=zy();try{er(o);for(let a=r;a<i;a++){let l=n.data[a],u=e[a];el(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&ZI(l,u)}}finally{er(-1),el(s)}}function ZI(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function $_(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];b_(e,o.selectors,!1)&&(r??=[],hn(o)?r.unshift(o):r.push(o))}return r}function QI(n,e,t,r,i,o){let s=Kt(n,e);XI(e[be],s,o,n.value,t,r,i)}function XI(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?wi(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function eb(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],u=s[a+1];Vf(r,t,l,u)}}function tb(n,e,t,r,i){let o=Ge+t,s=e[W],a=i(s,e,n,r,t);e[o]=a,Ri(n,!0);let l=n.type===2;return l?(T_(e[be],a,n),(Fy()===0||qo(n))&&Oi(a,e),Oy()):Oi(a,e),il()&&(!l||!Rl(n))&&fp(s,e,a,n),n}function nb(n){let e=n;return af()?lf():(e=e.parent,Ri(e,!1)),e}function rb(n,e){let t=n[Nn];if(!t)return;let r;try{r=t.get(tr,null)}catch{r=null}r?.(e)}function mp(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let l=0;l<s.length;l+=2){let u=s[l],f=s[l+1],p=e.data[u];Vf(p,t[u],f,i),a=!0}if(o)for(let l of o){let u=t[l],f=e.data[l];Vf(f,u,r,i),a=!0}return a}function ib(n,e){let t=Ot(e,n),r=t[W];ob(r,t);let i=t[Wt];i!==null&&t[xr]===null&&(t[xr]=u_(i,t[Nn])),he(le.ComponentStart);try{yp(r,t,t[Oe])}finally{he(le.ComponentEnd,t[Oe])}}function ob(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function yp(n,e,t){tl(e);try{let r=n.viewQuery;r!==null&&Pf(1,r,t);let i=n.template;i!==null&&U_(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Pr]?.finishViewCreation(n),n.staticContentQueries&&d_(n,e),n.staticViewQueries&&Pf(2,n.viewQuery,t);let o=n.components;o!==null&&sb(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[z]&=-5,nl()}}function sb(n,e){for(let t=0;t<e.length;t++)ib(n,e[t])}function as(n,e,t,r){let i=$(null);try{let o=e.tView,a=n[z]&4096?4096:16,l=ap(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];l[Nr]=u;let f=n[Pr];return f!==null&&(l[Pr]=f.createEmbeddedView(o)),yp(o,l,t),l}finally{$(i)}}function Li(n,e){return!e||e.firstChild===null||e_(n)}function Qo(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Ft(o)),jt(o)&&G_(o,r);let s=t.type;if(s&8)Qo(n,e,t.child,r);else if(s&32){let a=cp(t,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=V_(e,t);if(Array.isArray(a))r.push(...a);else{let l=Jn(e[at]);Qo(l[W],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function G_(n,e){for(let t=Le;t<n.length;t++){let r=n[t],i=r[W].firstChild;i!==null&&Qo(r[W],r,i,e)}n[Qn]!==n[Wt]&&e.push(n[Qn])}function q_(n){if(n[Fr]!==null){for(let e of n[Fr])e.impl.addSequence(e);n[Fr].length=0}}var z_=[];function ab(n){return n[bt]??lb(n)}function lb(n){let e=z_.pop()??Object.create(ub);return e.lView=n,e}function cb(n){n.lView[bt]!==n&&(n.lView=null,z_.push(n))}var ub=oe(U({},li),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Vr(n.lView)},consumerOnSignalRead(){this.lView[bt]=this}});function db(n){let e=n[bt]??Object.create(fb);return e.lView=n,e}var fb=oe(U({},li),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Jn(n.lView);for(;e&&!W_(e[W]);)e=Jn(e);e&&tf(e)},consumerOnSignalRead(){this.lView[bt]=this}});function W_(n){return n.type!==2}function j_(n){if(n[Kn]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Kn])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[z]&8192)}}var pb=100;function K_(n,e=0){let r=n[fn].rendererFactory,i=!1;i||r.begin?.();try{hb(n,e)}finally{i||r.end?.()}}function hb(n,e){let t=cf();try{Fo(!0),Uf(n,e);let r=0;for(;Wo(n);){if(r===pb)throw new M(103,!1);r++,Uf(n,1)}}finally{Fo(t)}}function gb(n,e,t,r){if(Lr(e))return;let i=e[z],o=!1,s=!1;tl(e);let a=!0,l=null,u=null;o||(W_(n)?(u=ab(e),l=ci(u)):ia()===null?(a=!1,u=db(e),l=ci(u)):e[bt]&&(gr(e[bt]),e[bt]=null));try{ef(e),$y(n.bindingStartIndex),t!==null&&U_(n,e,t,2,r);let f=(i&3)===3;if(!o)if(f){let g=n.preOrderCheckHooks;g!==null&&dl(e,g,null)}else{let g=n.preOrderHooks;g!==null&&fl(e,g,0,null),vf(e,0)}if(s||mb(e),j_(e),J_(e,0),n.contentQueries!==null&&d_(n,e),!o)if(f){let g=n.contentCheckHooks;g!==null&&dl(e,g)}else{let g=n.contentHooks;g!==null&&fl(e,g,1),vf(e,1)}vb(n,e);let p=n.components;p!==null&&Z_(e,p,0);let h=n.viewQuery;if(h!==null&&Pf(2,h,r),!o)if(f){let g=n.viewCheckHooks;g!==null&&dl(e,g)}else{let g=n.viewHooks;g!==null&&fl(e,g,2),vf(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Ya]){for(let g of e[Ya])g();e[Ya]=null}o||(q_(e),e[z]&=-73)}catch(f){throw o||Vr(e),f}finally{u!==null&&(So(u,l),a&&cb(u)),nl()}}function J_(n,e){for(let t=n_(n);t!==null;t=r_(t))for(let r=Le;r<t.length;r++){let i=t[r];Y_(i,e)}}function mb(n){for(let e=n_(n);e!==null;e=r_(e)){if(!(e[z]&2))continue;let t=e[Go];for(let r=0;r<t.length;r++){let i=t[r];tf(i)}}}function yb(n,e,t){he(le.ComponentStart);let r=Ot(e,n);try{Y_(r,t)}finally{he(le.ComponentEnd,r[Oe])}}function Y_(n,e){Za(n)&&Uf(n,e)}function Uf(n,e){let r=n[W],i=n[z],o=n[bt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&wo(o)),s||=!1,o&&(o.dirty=!1),n[z]&=-9217,s)gb(r,n,r.template,n[Oe]);else if(i&8192){let a=$(null);try{j_(n),J_(n,1);let l=r.components;l!==null&&Z_(n,l,1),q_(n)}finally{$(a)}}}function Z_(n,e,t){for(let r=0;r<e.length;r++)yb(n,e[r],t)}function vb(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)er(~i);else{let o=i,s=t[++r],a=t[++r];qy(s,o);let l=e[o];he(le.HostBindingsUpdateStart,l);try{a(2,l)}finally{he(le.HostBindingsUpdateEnd,l)}}}}finally{er(-1)}}function vp(n,e){let t=cf()?64:1088;for(n[fn].changeDetectionScheduler?.notify(e);n;){n[z]|=t;let r=Jn(n);if(xi(n)&&!r)return n;n=r}return null}function Q_(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function X_(n,e){let t=Le+e;if(t<n.length)return n[t]}function ls(n,e,t,r=!0){let i=e[W];if(_b(i,e,n,t),r){let s=Bf(t,n),a=e[be],l=a.parentNode(n[Qn]);l!==null&&NI(i,n[st],a,e,l,s)}let o=e[xr];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function e0(n,e){let t=Xo(n,e);return t!==void 0&&Ol(t[W],t),t}function Xo(n,e){if(n.length<=Le)return;let t=Le+e,r=n[t];if(r){let i=r[Nr];i!==null&&i!==n&&dp(i,r),e>0&&(n[t-1][Pt]=r[Pt]);let o=Vo(n,Le+e);RI(r[W],r);let s=o[Pr];s!==null&&s.detachView(o[W]),r[We]=null,r[Pt]=null,r[z]&=-129}return r}function _b(n,e,t,r){let i=Le+r,o=t.length;r>0&&(t[i-1][Pt]=e),r<o-Le?(e[Pt]=t[i],$d(t,Le+r,e)):(t.push(e),e[Pt]=null),e[We]=t;let s=e[Nr];s!==null&&t!==s&&t0(s,e);let a=e[Pr];a!==null&&a.insertView(n),Qa(e),e[z]|=128}function t0(n,e){let t=n[Go],r=e[We];if(pn(r))n[z]|=2;else{let i=r[We][at];e[at]!==i&&(n[z]|=2)}t===null?n[Go]=[e]:t.push(e)}var nr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[W];return Qo(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Oe]}set context(e){this._lView[Oe]=e}get destroyed(){return Lr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[We];if(jt(e)){let t=e[$o],r=t?t.indexOf(this):-1;r>-1&&(Xo(e,r),Vo(t,r))}this._attachedToViewContainer=!1}Ol(this._lView[W],this._lView)}onDestroy(e){nf(this._lView,e)}markForCheck(){vp(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[z]&=-129}reattach(){Qa(this._lView),this._lView[z]|=128}detectChanges(){this._lView[z]|=1024,K_(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new M(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=xi(this._lView),t=this._lView[Nr];t!==null&&!e&&dp(t,this._lView),F_(this._lView[W],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new M(902,!1);this._appRef=e;let t=xi(this._lView),r=this._lView[Nr];r!==null&&!t&&t0(r,this._lView),Qa(this._lView)}};var Gi=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=Eb;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=as(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new nr(o)}}return n})();function Eb(){return Cb(mt(),ne())}function Cb(n,e){return n.type&4?new Gi(e,n,bl(n,e)):null}function cs(n,e,t,r,i){let o=n.data[e];if(o===null)o=Db(n,e,t,r,i),Gy()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=Uy();o.injectorIndex=s===null?-1:s.injectorIndex}return Ri(o,!0),o}function Db(n,e,t,r,i){let o=sf(),s=af(),a=s?o:o&&o.parent,l=n.data[e]=wb(n,a,t,e,r,i);return Sb(n,l,o,s),l}function Sb(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function wb(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return of()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Tb(n){let e=n[Yd]??[],r=n[We][be],i=[];for(let o of e)o.data[a_]!==void 0?i.push(o):Ib(o,r);n[Yd]=i}function Ib(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[s_];for(;t<i;){let o=r.nextSibling;w_(e,r,!1),r=o,t++}}}var bb=()=>null,Ab=()=>null;function Dl(n,e){return bb(n,e)}function n0(n,e,t){return Ab(n,e,t)}var r0=class{},Vl=class{},Hf=class{resolveComponentFactory(e){throw new M(917,!1)}},Bl=class{static NULL=new Hf},lt=class{},Qt=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>Mb()}return n})();function Mb(){let n=ne(),e=mt(),t=Ot(e.index,n);return(pn(t)?t:n)[be]}var i0=(()=>{class n{static \u0275prov=R({token:n,providedIn:"root",factory:()=>null})}return n})();var pl={},$f=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,pl,r);return i!==pl||t===pl?i:this.parentInjector.get(e,t,r)}};function Tv(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Ga(i,a);else if(o==2){let l=a,u=e[++s];r=Ga(r,l+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function re(n,e=0){let t=ne();if(t===null)return Z(n,e);let r=mt();return Zv(r,t,Ke(n),e)}function o0(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,l=null,u=null;for(let f of s)if(f.resolveHostDirectives!==null){[a,l,u]=f.resolveHostDirectives(s);break}Nb(n,e,t,a,o,l,u)}o!==null&&r!==null&&xb(t,r,o)}function xb(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new M(-301,!1);r.push(e[i],o)}}function Rb(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Nb(n,e,t,r,i,o,s){let a=r.length,l=null;for(let h=0;h<a;h++){let g=r[h];l===null&&hn(g)&&(l=g,Rb(n,t,h)),xf(yl(t,e),n,g.type)}Vb(t,n.data.length,a),l?.viewProvidersResolver&&l.viewProvidersResolver(l);for(let h=0;h<a;h++){let g=r[h];g.providersResolver&&g.providersResolver(g)}let u=!1,f=!1,p=M_(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let h=0;h<a;h++){let g=r[h];if(t.mergedAttrs=Zo(t.mergedAttrs,g.hostAttrs),Pb(n,t,e,p,g),Lb(p,g,i),s!==null&&s.has(g)){let[y,_]=s.get(g);t.directiveToIndex.set(g.type,[p,y+t.directiveStart,_+t.directiveStart])}else(o===null||!o.has(g))&&t.directiveToIndex.set(g.type,p);g.contentQueries!==null&&(t.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(t.flags|=64);let m=g.type.prototype;!u&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!f&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),f=!0),p++}kb(n,t,o)}function kb(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))Iv(0,e,i,r),Iv(1,e,i,r),Av(e,r,!1);else{let o=t.get(i);bv(0,e,o,r),bv(1,e,o,r),Av(e,r,!0)}}}function Iv(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),s0(e,o)}}function bv(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),s0(e,s)}}function s0(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function Av(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||op(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let u=i[l];for(let f of u)if(f===e){s??=[],s.push(l,r[a+1]);break}}else if(t&&o.hasOwnProperty(l)){let u=o[l];for(let f=0;f<u.length;f+=2)if(u[f]===e){s??=[],s.push(u[f+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function Pb(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=wr(i.type,!0)),s=new $r(o,hn(i),re,null);n.blueprint[r]=s,t[r]=s,Fb(n,e,r,M_(n,t,i.hostVars,Mt),i)}function Fb(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;Ob(s)!=a&&s.push(a),s.push(t,r,o)}}function Ob(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Lb(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;hn(e)&&(t[""]=n)}}function Vb(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function a0(n,e,t,r,i,o,s,a){let l=e[W],u=l.consts,f=gn(u,s),p=cs(l,n,t,r,f);return o&&o0(l,e,p,gn(u,a),i),p.mergedAttrs=Zo(p.mergedAttrs,p.attrs),p.attrs!==null&&Tv(p,p.attrs,!1),p.mergedAttrs!==null&&Tv(p,p.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,p),p}function l0(n,e){Gv(n,e),Zd(e)&&n.queries.elementEnd(e)}function _n(n,e,t){if(t===Mt)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Bb(n,e,t,r){let i=_n(n,e,t);return _n(n,e+1,r)||i}function Cf(n,e,t){return function r(i){let o=Xn(n)?Ot(n.index,e):e;vp(o,5);let s=e[Oe],a=Mv(e,s,t,i),l=r.__ngNextListenerFn__;for(;l;)a=Mv(e,s,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function Mv(n,e,t,r){let i=$(null);try{return he(le.OutputStart,e,t),t(r)!==!1}catch(o){return rb(n,o),!1}finally{he(le.OutputEnd,e,t),$(i)}}function Ub(n,e,t,r,i,o,s,a){let l=qo(n),u=!1,f=null;if(!r&&l&&(f=$b(e,t,o,n.index)),f!==null){let p=f.__ngLastListenerFn__||f;p.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,u=!0}else{let p=Kt(n,t),h=r?r(p):p;UT(t,h,o,a);let g=i.listen(h,o,a);if(!Hb(o)){let m=r?y=>r(Ft(y[n.index])):n.index;c0(m,e,t,o,a,g,!1)}}return u}function Hb(n){return n.startsWith("animation")||n.startsWith("transition")}function $b(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Ai],l=i[o+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function c0(n,e,t,r,i,o,s){let a=e.firstCreatePass?Py(e):null,l=ky(t),u=l.length;l.push(i,o),a&&a.push(r,n,u,(u+1)*(s?-1:1))}function xv(n,e,t,r,i,o){let s=e[t],a=e[W],u=a.data[t].outputs[r],p=s[u].subscribe(o);c0(n.index,a,e,i,o,p,!0)}var Gf=Symbol("BINDING");var qf=class extends Bl{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Yn(e);return new Vi(t,this.ngModule)}};function Gb(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Pl.SignalBased)!==0};return i&&(o.transform=i),o})}function qb(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function zb(n,e,t){let r=e instanceof Je?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new $f(t,r):t}function Wb(n){let e=n.get(lt,null);if(e===null)throw new M(407,!1);let t=n.get(i0,null),r=n.get(Rn,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function jb(n,e){let t=u0(n);return D_(e,t,t==="svg"?Qd:t==="math"?My:null)}function u0(n){return(n.selectors[0][0]||"div").toLowerCase()}var Vi=class extends Vl{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Gb(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=qb(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=CI(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){he(le.DynamicComponentStart);let a=$(null);try{let l=this.componentDef,u=Kb(r,l,s,o),f=zb(l,i||this.ngModule,e),p=Wb(f),h=p.rendererFactory.createRenderer(null,l),g=r?GI(h,r,l.encapsulation,f):jb(l,h),m=s?.some(Rv)||o?.some(E=>typeof E!="function"&&E.bindings.some(Rv)),y=ap(null,u,null,512|A_(l),null,null,p,h,f,null,u_(g,f,!0));y[Ge]=g,tl(y);let _=null;try{let E=a0(Ge,y,2,"#host",()=>u.directiveRegistry,!0,0);T_(h,g,E),Oi(g,y),hp(u,y,E),f_(u,E,y),l0(u,E),t!==void 0&&Yb(E,this.ngContentSelectors,t),_=Ot(E.index,y),y[Oe]=_[Oe],yp(u,y,null)}catch(E){throw _!==null&&Nf(_),Nf(y),E}finally{he(le.DynamicComponentEnd),nl()}return new Sl(this.componentType,y,!!m)}finally{$(a)}}};function Kb(n,e,t,r){let i=n?["ng-version","21.1.2"]:DI(e.selectors[0]),o=null,s=null,a=0;if(t)for(let f of t)a+=f[Gf].requiredVars,f.create&&(f.targetIdx=0,(o??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(r)for(let f=0;f<r.length;f++){let p=r[f];if(typeof p!="function")for(let h of p.bindings){a+=h[Gf].requiredVars;let g=f+1;h.create&&(h.targetIdx=g,(o??=[]).push(h)),h.update&&(h.targetIdx=g,(s??=[]).push(h))}}let l=[e];if(r)for(let f of r){let p=typeof f=="function"?f:f.type,h=Vd(p);l.push(h)}return sp(0,null,Jb(o,s),1,a,l,null,null,null,[i],null)}function Jb(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function Rv(n){let e=n[Gf].kind;return e==="input"||e==="twoWay"}var Sl=class extends r0{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=zo(t[W],Ge),this.location=bl(this._tNode,t),this.instance=Ot(this._tNode.index,t)[Oe],this.hostView=this.changeDetectorRef=new nr(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=mp(r,i[W],i,e,t);this.previousInputValues.set(e,t);let s=Ot(r.index,i);vp(s,1)}get injector(){return new Hr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Yb(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Wr=(()=>{class n{static __NG_ELEMENT_ID__=Zb}return n})();function Zb(){let n=mt();return Xb(n,ne())}var Qb=Wr,d0=class extends Qb{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return bl(this._hostTNode,this._hostLView)}get injector(){return new Hr(this._hostTNode,this._hostLView)}get parentInjector(){let e=tp(this._hostTNode,this._hostLView);if(zv(e)){let t=ml(e,this._hostLView),r=gl(e),i=t[W].data[r+8];return new Hr(i,t)}else return new Hr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Nv(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Le}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Dl(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Li(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let l=e&&!hT(e),u;if(l)u=t;else{let _=t||{};u=_.index,r=_.injector,i=_.projectableNodes,o=_.environmentInjector||_.ngModuleRef,s=_.directives,a=_.bindings}let f=l?e:new Vi(Yn(e)),p=r||this.parentInjector;if(!o&&f.ngModule==null){let E=(l?p:this.parentInjector).get(Je,null);E&&(o=E)}let h=Yn(f.componentType??{}),g=Dl(this._lContainer,h?.id??null),m=g?.firstChild??null,y=f.create(p,i,m,o,s,a);return this.insertImpl(y.hostView,u,Li(this._hostTNode,g)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(xy(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[We],u=new d0(l,l[st],l[We]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return ls(s,i,o,r),e.attachToViewContainerRef(),$d(Df(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Nv(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Xo(this._lContainer,t);r&&(Vo(Df(this._lContainer),t),Ol(r[W],r))}detach(e){let t=this._adjustIndex(e,-1),r=Xo(this._lContainer,t);return r&&Vo(Df(this._lContainer),t)!=null?new nr(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Nv(n){return n[$o]}function Df(n){return n[$o]||(n[$o]=[])}function Xb(n,e){let t,r=e[n.index];return jt(r)?t=r:(t=Q_(r,e,null,n),e[n.index]=t,lp(e,t)),tA(t,e,n,r),new d0(t,n,e)}function eA(n,e){let t=n[be],r=t.createComment(""),i=Kt(e,n),o=t.parentNode(i);return El(t,o,r,t.nextSibling(i),!1),r}var tA=iA,nA=()=>!1;function rA(n,e,t){return nA(n,e,t)}function iA(n,e,t,r){if(n[Qn])return;let i;t.type&8?i=Ft(r):i=eA(e,t),n[Qn]=i}var es=class{};var ts=class extends es{injector;componentFactoryResolver=new qf(this);instance=null;constructor(e){super();let t=new Ir([...e.providers,{provide:es,useValue:this},{provide:Bl,useValue:this.componentFactoryResolver}],e.parent||Ii(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function f0(n,e,t=null){return new ts({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var oA=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=zd(!1,t.type),i=r.length>0?f0([r],this._injector,""):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=R({token:n,providedIn:"environment",factory:()=>new n(Z(Je))})}return n})();function yt(n){return is(()=>{let e=p0(n),t=oe(U({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===np.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(oA).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Zt.Emulated,styles:n.styles||it,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&En("NgStandalone"),h0(t);let r=n.dependencies;return t.directiveDefs=kv(r,sA),t.pipeDefs=kv(r,yy),t.id=cA(t),t})}function sA(n){return Yn(n)||Vd(n)}function vt(n){return is(()=>({type:n.type,bootstrap:n.bootstrap||it,declarations:n.declarations||it,imports:n.imports||it,exports:n.exports||it,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function aA(n,e){if(n==null)return Zn;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,l;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,l=i[3]||null):(o=i,s=i,a=Pl.None,l=null),t[o]=[r,a,l],e[o]=s}return t}function lA(n){if(n==null)return Zn;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function we(n){return is(()=>{let e=p0(n);return h0(e),e})}function p0(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Zn,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||it,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:aA(n.inputs,e),outputs:lA(n.outputs),debugInfo:null}}function h0(n){n.features?.forEach(e=>e(n))}function kv(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function cA(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function uA(n){return Object.getPrototypeOf(n.prototype).constructor}function Qe(n){let e=uA(n.type),t=!0,r=[n];for(;e;){let i;if(hn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new M(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Sf(n.inputs),s.declaredInputs=Sf(n.declaredInputs),s.outputs=Sf(n.outputs);let a=i.hostBindings;a&&gA(n,a);let l=i.viewQuery,u=i.contentQueries;if(l&&pA(n,l),u&&hA(n,u),dA(n,i),my(n.outputs,i.outputs),hn(i)&&i.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Qe&&(t=!1)}}e=Object.getPrototypeOf(e)}fA(r)}function dA(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function fA(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Zo(i.hostAttrs,t=Zo(t,i.hostAttrs))}}function Sf(n){return n===Zn?{}:n===it?[]:n}function pA(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function hA(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function gA(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function g0(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=Zo(n.mergedAttrs,n.attrs);let f=n.tView=sp(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),f.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Ri(n,!1);let l=yA(t,e,n,r);il()&&fp(t,e,l,n),Oi(l,e);let u=Q_(l,e,l,n);e[r+Ge]=u,lp(e,u),rA(u,n,e)}function mA(n,e,t,r,i,o,s,a,l,u,f){let p=t+Ge,h;return e.firstCreatePass?(h=cs(e,p,4,s||null,a||null),rf()&&o0(e,n,h,gn(e.consts,u),$_),Gv(e,h)):h=e.data[p],g0(h,n,e,t,r,i,o,l),qo(h)&&hp(e,n,h),u!=null&&gp(n,h,f),h}function ns(n,e,t,r,i,o,s,a,l,u,f){let p=t+Ge,h;if(e.firstCreatePass){if(h=cs(e,p,4,s||null,a||null),u!=null){let g=gn(e.consts,u);h.localNames=[];for(let m=0;m<g.length;m+=2)h.localNames.push(g[m],-1)}}else h=e.data[p];return g0(h,n,e,t,r,i,o,l),u!=null&&gp(n,h,f),h}function Ul(n,e,t,r,i,o,s,a){let l=ne(),u=je(),f=gn(u.consts,o);return mA(l,u,n,e,t,r,i,f,void 0,s,a),Ul}var yA=vA;function vA(n,e,t,r){return ol(!0),e[be].createComment("")}function m0(n){return typeof n=="function"&&n[rt]!==void 0}function _p(n){return m0(n)&&typeof n.set=="function"}var Ep=new F("");function qi(n){return!!n&&typeof n.then=="function"}function Cp(n){return!!n&&typeof n.subscribe=="function"}var y0=new F("");var Dp=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=S(y0,{optional:!0})??[];injector=S(Ve);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=bi(this.injector,i);if(qi(o))t.push(o);else if(Cp(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),v0=new F("");function _0(){nd(()=>{let n="";throw new M(600,n)})}function E0(n){return n.isBoundToModule}var _A=10;var Ln=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=S(tr);afterRenderManager=S(up);zonelessEnabled=S(Ko);rootEffectScheduler=S(sl);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new se;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=S(Ur);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ie(t=>!t))}constructor(){S(On,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=S(Je);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Ve.NULL){return this._injector.get(xe).run(()=>{he(le.BootstrapComponentStart);let s=t instanceof Vl;if(!this._injector.get(Dp).done){let m="";throw new M(405,m)}let l;s?l=t:l=this._injector.get(Bl).resolveComponentFactory(t),this.componentTypes.push(l.componentType);let u=E0(l)?void 0:this._injector.get(es),f=r||l.selector,p=l.create(i,[],f,u),h=p.location.nativeElement,g=p.injector.get(Ep,null);return g?.registerApplication(h),p.onDestroy(()=>{this.detachView(p.hostView),Yo(this.components,p),g?.unregisterApplication(h)}),this._loadComponent(p),he(le.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){he(le.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Fl.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw he(le.ChangeDetectionEnd),new M(101,!1);let t=$(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,$(t),this.afterTick.next(),he(le.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(lt,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<_A;){he(le.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{he(le.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Wo(i))continue;let o=r&&!this.zonelessEnabled?0:1;K_(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Wo(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Yo(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(v0,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Yo(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new M(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Yo(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function us(n,e,t,r){let i=ne(),o=Br();if(_n(i,o,e)){let s=je(),a=rl();QI(a,i,n,e,t,r)}return us}var Jq=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var zf=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function wf(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function EA(n,e,t,r){let i,o,s=0,a=n.length-1,l=void 0;if(Array.isArray(e)){$(r);let u=e.length-1;for($(null);s<=a&&s<=u;){let f=n.at(s),p=e[s],h=wf(s,f,s,p,t);if(h!==0){h<0&&n.updateValue(s,p),s++;continue}let g=n.at(a),m=e[u],y=wf(a,g,u,m,t);if(y!==0){y<0&&n.updateValue(a,m),a--,u--;continue}let _=t(s,f),E=t(a,g),I=t(s,p);if(Object.is(I,E)){let A=t(u,m);Object.is(A,_)?(n.swap(s,a),n.updateValue(a,m),u--,a--):n.move(a,s),n.updateValue(s,p),s++;continue}if(i??=new wl,o??=Fv(n,s,a,t),Wf(n,i,s,I))n.updateValue(s,p),s++,a++;else if(o.has(I))i.set(_,n.detach(s)),a--;else{let A=n.create(s,e[s]);n.attach(s,A),s++,a++}}for(;s<=u;)Pv(n,i,t,s,e[s]),s++}else if(e!=null){$(r);let u=e[Symbol.iterator]();$(null);let f=u.next();for(;!f.done&&s<=a;){let p=n.at(s),h=f.value,g=wf(s,p,s,h,t);if(g!==0)g<0&&n.updateValue(s,h),s++,f=u.next();else{i??=new wl,o??=Fv(n,s,a,t);let m=t(s,h);if(Wf(n,i,s,m))n.updateValue(s,h),s++,a++,f=u.next();else if(!o.has(m))n.attach(s,n.create(s,h)),s++,a++,f=u.next();else{let y=t(s,p);i.set(y,n.detach(s)),a--}}}for(;!f.done;)Pv(n,i,t,n.length,f.value),f=u.next()}for(;s<=a;)n.destroy(n.detach(a--));i?.forEach(u=>{n.destroy(u)})}function Wf(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function Pv(n,e,t,r,i){if(Wf(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function Fv(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var wl=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function ge(n,e,t,r,i,o,s,a){En("NgControlFlow");let l=ne(),u=je(),f=gn(u.consts,o);return ns(l,u,n,e,t,r,i,f,256,s,a),Sp}function Sp(n,e,t,r,i,o,s,a){En("NgControlFlow");let l=ne(),u=je(),f=gn(u.consts,o);return ns(l,u,n,e,t,r,i,f,512,s,a),Sp}function me(n,e){En("NgControlFlow");let t=ne(),r=Br(),i=t[r]!==Mt?t[r]:-1,o=i!==-1?Tl(t,Ge+i):void 0,s=0;if(_n(t,r,n)){let a=$(null);try{if(o!==void 0&&e0(o,s),n!==-1){let l=Ge+n,u=Tl(t,l),f=Yf(t[W],l),p=n0(u,f,t),h=as(t,f,e,{dehydratedView:p});ls(u,h,s,Li(f,p))}}finally{$(a)}}else if(o!==void 0){let a=X_(o,s);a!==void 0&&(a[Oe]=e)}}var jf=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Le}};function zi(n,e){return e}var Kf=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Xe(n,e,t,r,i,o,s,a,l,u,f,p,h){En("NgControlFlow");let g=ne(),m=je(),y=l!==void 0,_=ne(),E=a?s.bind(_[at][Oe]):s,I=new Kf(y,E);_[Ge+n]=I,ns(g,m,n+1,e,t,r,i,gn(m.consts,o),256),y&&ns(g,m,n+2,l,u,f,p,gn(m.consts,h),512)}var Jf=class extends zf{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-Le}at(e){return this.getLView(e)[Oe].$implicit}attach(e,t){let r=t[xr];this.needsIndexUpdate||=e!==this.length,ls(this.lContainer,t,e,Li(this.templateTNode,r)),CA(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,DA(this.lContainer,e),SA(this.lContainer,e)}create(e,t){let r=Dl(this.lContainer,this.templateTNode.tView.ssrId);return as(this.hostLView,this.templateTNode,new jf(this.lContainer,t,e),{dehydratedView:r})}destroy(e){Ol(e[W],e)}updateValue(e,t){this.getLView(e)[Oe].$implicit=t}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Oe].$index=e}getLView(e){return wA(this.lContainer,e)}};function et(n){let e=$(null),t=mn();try{let r=ne(),i=r[W],o=r[t],s=t+1,a=Tl(r,s);if(o.liveCollection===void 0){let u=Yf(i,s);o.liveCollection=new Jf(a,r,u)}else o.liveCollection.reset();let l=o.liveCollection;if(EA(l,n,o.trackByFn,e),l.updateIndexes(),o.hasEmptyBlock){let u=Br(),f=l.length===0;if(_n(r,u,f)){let p=t+2,h=Tl(r,p);if(f){let g=Yf(i,p),m=n0(h,g,r),y=as(r,g,void 0,{dehydratedView:m});ls(h,y,0,Li(g,m))}else i.firstUpdatePass&&Tb(h),e0(h,0)}}}finally{$(e)}}function Tl(n,e){return n[e]}function CA(n,e){if(n.length<=Le)return;let t=Le+e,r=n[t],i=r?r[Or]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[Nn];MI(o,i),Gr.delete(r[kn]),i.detachedLeaveAnimationFns=void 0}}function DA(n,e){if(n.length<=Le)return;let t=Le+e,r=n[t],i=r?r[Or]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function SA(n,e){return Xo(n,e)}function wA(n,e){return X_(n,e)}function Yf(n,e){return zo(n,e)}function J(n,e,t){let r=ne(),i=Br();if(_n(r,i,e)){let o=je(),s=rl();H_(s,r,n,e,r[be],t)}return J}function Zf(n,e,t,r,i){mp(e,n,t,i?"class":"style",r)}function v(n,e,t,r){let i=ne(),o=i[W],s=n+Ge,a=o.firstCreatePass?a0(s,i,2,e,$_,rf(),t,r):o.data[s];if(tb(a,i,n,e,TA),qo(a)){let l=i[W];hp(l,i,a),f_(l,a,i)}return r!=null&&gp(i,a),v}function C(){let n=je(),e=mt(),t=nb(e);return n.firstCreatePass&&l0(n,t),Vy(t)&&By(),Ly(),t.classesWithoutHost!=null&&ET(t)&&Zf(n,t,ne(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&CT(t)&&Zf(n,t,ne(),t.stylesWithoutHost,!1),C}function q(n,e,t,r){return v(n,e,t,r),C(),q}var TA=(n,e,t,r,i)=>(ol(!0),D_(e[be],r,Zy()));function ut(){return ne()}var ds="en-US";var IA=ds;function C0(n){typeof n=="string"&&(IA=n.toLowerCase().replace(/_/g,"-"))}function P(n,e,t){let r=ne(),i=je(),o=mt();return D0(i,r,r[be],o,n,e,t),P}function D0(n,e,t,r,i,o,s){let a=!0,l=null;if((r.type&3||s)&&(l??=Cf(r,e,o),Ub(r,n,e,s,t,i,o,l)&&(a=!1)),a){let u=r.outputs?.[i],f=r.hostDirectiveOutputs?.[i];if(f&&f.length)for(let p=0;p<f.length;p+=2){let h=f[p],g=f[p+1];l??=Cf(r,e,o),xv(r,e,h,g,i,l)}if(u&&u.length)for(let p of u)l??=Cf(r,e,o),xv(r,e,p,i,i,l)}}function V(n=1){return Yy(n)}function bA(n,e){let t=null,r=mI(n);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){t=i;continue}if(r===null?b_(n,o,!0):_I(r,o))return i}return t}function Hl(n){let e=ne()[at][st];if(!e.projection){let t=n?n.length:1,r=e.projection=Cy(t,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=n?bA(o,n):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function Wi(n,e=0,t,r,i,o){let s=ne(),a=je(),l=r?n+1:null;l!==null&&ns(s,a,l,r,i,o,null,t);let u=cs(a,Ge+n,16,null,t||null);u.projection===null&&(u.projection=e),lf();let p=!s[xr]||of();s[at][st].projection[u.projection]===null&&l!==null?AA(s,a,l):p&&!Rl(u)&&UI(a,s,u)}function AA(n,e,t){let r=Ge+t,i=e.data[r],o=n[r],s=Dl(o,i.tView.ssrId),a=as(n,i,void 0,{dehydratedView:s});ls(o,a,0,Li(i,s))}function ul(n,e){return n<<17|e<<2}function qr(n){return n>>17&32767}function MA(n){return(n&2)==2}function xA(n,e){return n&131071|e<<17}function Qf(n){return n|2}function Bi(n){return(n&131068)>>2}function Tf(n,e){return n&-131069|e<<2}function RA(n){return(n&1)===1}function Xf(n){return n|1}function NA(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=qr(s),l=Bi(s);n[r]=t;let u=!1,f;if(Array.isArray(t)){let p=t;f=p[1],(f===null||Ti(p,f)>0)&&(u=!0)}else f=t;if(i)if(l!==0){let h=qr(n[a+1]);n[r+1]=ul(h,a),h!==0&&(n[h+1]=Tf(n[h+1],r)),n[a+1]=xA(n[a+1],r)}else n[r+1]=ul(a,0),a!==0&&(n[a+1]=Tf(n[a+1],r)),a=r;else n[r+1]=ul(l,0),a===0?a=r:n[l+1]=Tf(n[l+1],r),l=r;u&&(n[r+1]=Qf(n[r+1])),Ov(n,f,r,!0),Ov(n,f,r,!1),kA(e,f,n,r,o),s=ul(a,l),o?e.classBindings=s:e.styleBindings=s}function kA(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Ti(o,e)>=0&&(t[r+1]=Xf(t[r+1]))}function Ov(n,e,t,r){let i=n[t+1],o=e===null,s=r?qr(i):Bi(i),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],u=n[s+1];PA(l,e)&&(a=!0,n[s+1]=r?Xf(u):Qf(u)),s=r?qr(u):Bi(u)}a&&(n[t+1]=r?Qf(i):Xf(i))}function PA(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ti(n,e)>=0:!1}var Yt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function FA(n){return n.substring(Yt.key,Yt.keyEnd)}function OA(n){return LA(n),S0(n,w0(n,0,Yt.textEnd))}function S0(n,e){let t=Yt.textEnd;return t===e?-1:(e=Yt.keyEnd=VA(n,Yt.key=e,t),w0(n,e,t))}function LA(n){Yt.key=0,Yt.keyEnd=0,Yt.value=0,Yt.valueEnd=0,Yt.textEnd=n.length}function w0(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function VA(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Be(n,e){return UA(n,e,null,!0),Be}function tt(n){HA(jA,BA,n,!0)}function BA(n,e){for(let t=OA(e);t>=0;t=S0(e,t))Ka(n,FA(e),!0)}function UA(n,e,t,r){let i=ne(),o=je(),s=Xa(2);if(o.firstUpdatePass&&I0(o,n,s,r),e!==Mt&&_n(i,s,e)){let a=o.data[mn()];b0(o,a,i,i[be],n,i[s+1]=JA(e,t),r,s)}}function HA(n,e,t,r){let i=je(),o=Xa(2);i.firstUpdatePass&&I0(i,null,o,r);let s=ne();if(t!==Mt&&_n(s,o,t)){let a=i.data[mn()];if(A0(a,r)&&!T0(i,o)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(t=Ga(l,t||"")),Zf(i,a,s,t,r)}else KA(i,a,s,s[be],s[o+1],s[o+1]=WA(n,e,t),r,o)}}function T0(n,e){return e>=n.expandoStartIndex}function I0(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[mn()],s=T0(n,t);A0(o,r)&&e===null&&!s&&(e=!1),e=$A(i,o,e,r),NA(i,o,e,t,s,r)}}function $A(n,e,t,r){let i=Wy(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=If(null,n,e,t,r),t=rs(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=If(i,n,e,t,r),o===null){let l=GA(n,e,r);l!==void 0&&Array.isArray(l)&&(l=If(null,n,e,l[1],r),l=rs(l,e.attrs,r),qA(n,e,r,l))}else o=zA(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function GA(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Bi(r)!==0)return n[qr(r)]}function qA(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[qr(i)]=r}function zA(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=rs(r,s,t)}return rs(r,e.attrs,t)}function If(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=rs(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function rs(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Ka(n,s,t?!0:e[++o]))}return n===void 0?null:n}function WA(n,e,t){if(t==null||t==="")return it;let r=[],i=kl(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(i instanceof Set)for(let o of i)n(r,o,!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function jA(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&Ka(n,r,t)}function KA(n,e,t,r,i,o,s,a){i===Mt&&(i=it);let l=0,u=0,f=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;f!==null||p!==null;){let h=l<i.length?i[l+1]:void 0,g=u<o.length?o[u+1]:void 0,m=null,y;f===p?(l+=2,u+=2,h!==g&&(m=p,y=g)):p===null||f!==null&&f<p?(l+=2,m=f):(u+=2,m=p,y=g),m!==null&&b0(n,e,t,r,m,y,s,a),f=l<i.length?i[l]:null,p=u<o.length?o[u]:null}}function b0(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let l=n.data,u=l[a+1],f=RA(u)?Lv(l,e,t,i,Bi(u),s):void 0;if(!Il(f)){Il(o)||MA(u)&&(o=Lv(l,null,t,i,a,s));let p=Xd(mn(),t);$I(r,s,p,i,o)}}function Lv(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let l=n[i],u=Array.isArray(l),f=u?l[1]:l,p=f===null,h=t[i+1];h===Mt&&(h=p?it:void 0);let g=p?Ja(h,r):f===r?h:void 0;if(u&&!Il(g)&&(g=Ja(l,r)),Il(g)&&(a=g,s))return a;let m=n[i+1];i=s?qr(m):Bi(m)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=Ja(l,r))}return a}function Il(n){return n!==void 0}function JA(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=jn(kl(n)))),n}function A0(n,e){return(n.flags&(e?8:16))!==0}function T(n,e=""){let t=ne(),r=je(),i=n+Ge,o=r.firstCreatePass?cs(r,i,1,e,null):r.data[i],s=YA(r,t,o,e);t[i]=s,il()&&fp(r,t,s,o),Ri(o,!1)}var YA=(n,e,t,r)=>(ol(!0),sI(e[be],r));function ZA(n,e,t,r=""){return _n(n,Br(),t)?e+wi(t)+r:Mt}function QA(n,e,t,r,i,o=""){let s=Hy(),a=Bb(n,s,t,i);return Xa(2),a?e+wi(t)+r+wi(i)+o:Mt}function Pe(n){return ie("",n),Pe}function ie(n,e,t){let r=ne(),i=ZA(r,n,e,t);return i!==Mt&&M0(r,mn(),i),ie}function fs(n,e,t,r,i){let o=ne(),s=QA(o,n,e,t,r,i);return s!==Mt&&M0(o,mn(),s),fs}function M0(n,e,t){let r=Xd(e,n);aI(n[be],r,t)}function Cn(n,e,t){_p(e)&&(e=e());let r=ne(),i=Br();if(_n(r,i,e)){let o=je(),s=rl();H_(s,r,n,e,r[be],t)}return Cn}function Vn(n,e){let t=_p(n);return t&&n.set(e),t}function Dn(n,e){let t=ne(),r=je(),i=mt();return D0(r,t,t[be],i,n,e),Dn}function Vv(n,e,t){let r=je();r.firstCreatePass&&x0(e,r.data,r.blueprint,hn(n),t)}function x0(n,e,t,r,i){if(n=Ke(n),Array.isArray(n))for(let o=0;o<n.length;o++)x0(n[o],e,t,r,i);else{let o=je(),s=ne(),a=mt(),l=Tr(n)?n:Ke(n.provide),u=jd(n),f=a.providerIndexes&1048575,p=a.directiveStart,h=a.providerIndexes>>20;if(Tr(n)||!n.multi){let g=new $r(u,i,re,null),m=Af(l,e,i?f:f+h,p);m===-1?(xf(yl(a,s),o,l),bf(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(g),s.push(g)):(t[m]=g,s[m]=g)}else{let g=Af(l,e,f+h,p),m=Af(l,e,f,f+h),y=g>=0&&t[g],_=m>=0&&t[m];if(i&&!_||!i&&!y){xf(yl(a,s),o,l);let E=tM(i?eM:XA,t.length,i,r,u,n);!i&&_&&(t[m].providerFactory=E),bf(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(E),s.push(E)}else{let E=R0(t[i?m:g],u,!i&&r);bf(o,n,g>-1?g:m,E)}!i&&r&&_&&t[m].componentProviders++}}}function bf(n,e,t,r){let i=Tr(e),o=Iy(e);if(i||o){let l=(o?Ke(e.useClass):e).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let f=u.indexOf(t);f===-1?u.push(t,[r,l]):u[f+1].push(r,l)}else u.push(t,l)}}}function R0(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Af(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function XA(n,e,t,r,i){return ep(this.multi,[])}function eM(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=vl(r,r[W],this.providerFactory.index,i);s=l.slice(0,a),ep(o,s);for(let u=a;u<l.length;u++)s.push(l[u])}else s=[],ep(o,s);return s}function ep(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function tM(n,e,t,r,i,o){let s=new $r(n,t,re,null);return s.multi=[],s.index=e,s.componentProviders=0,R0(s,i,r&&!t),s}function dt(n,e){return t=>{t.providersResolver=(r,i)=>Vv(r,i?i(n):n,!1),e&&(t.viewProvidersResolver=(r,i)=>Vv(r,i?i(e):e,!0))}}var N0=(()=>{class n{applicationErrorHandler=S(tr);appRef=S(Ln);taskService=S(Ur);ngZone=S(xe);zonelessEnabled=S(Ko);tracing=S(On,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new De;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Oo):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(S(yf,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{let t=this.taskService.add();if(!this.runningTick&&(this.cleanup(),!this.zonelessEnabled||this.appRef.includeAllTestViews)){this.taskService.remove(t);return}this.switchToMicrotaskScheduler(),this.taskService.remove(t)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{let t=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})})}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?nv:pf;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Oo+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.applicationErrorHandler(r)}finally{this.taskService.remove(t),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wp(){return En("NgZoneless"),Uo([...Tp(),[]])}function Tp(){return[{provide:Rn,useExisting:N0},{provide:xe,useClass:Lo},{provide:Ko,useValue:!0}]}function nM(){return typeof $localize<"u"&&$localize.locale||ds}var $l=new F("",{factory:()=>S($l,{optional:!0,skipSelf:!0})||nM()});var Gl=class{destroyed=!1;listeners=null;errorHandler=S(kt,{optional:!0});destroyRef=S(Lt);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new M(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let t=this.listeners?.indexOf(e);t!==void 0&&t!==-1&&this.listeners?.splice(t,1)}}}emit(e){if(this.destroyed){console.warn(br(953,!1));return}if(this.listeners===null)return;let t=$(null);try{for(let r of this.listeners)try{r(e)}catch(i){this.errorHandler?.handleError(i)}}finally{$(t)}}};function qe(n,e){return oa(n,e?.equal)}var P0=Symbol("InputSignalNode#UNSET"),wM=oe(U({},sa),{transformFn:void 0,applyValueToInputSignal(n,e){To(n,e)}});function F0(n,e){let t=Object.create(wM);t.value=n,t.transformFn=e?.transform;function r(){if(Do(t),t.value===P0){let i=null;throw new M(-950,i)}return t.value}return r[rt]=t,r}function ji(n){return new Gl}function k0(n,e){return F0(n,e)}function TM(n){return F0(P0,n)}var _t=(k0.required=TM,k0);var Ip=new F(""),IM=new F("");function ps(n){return!n.moduleRef}function bM(n){let e=ps(n)?n.r3Injector:n.moduleRef.injector,t=e.get(xe);return t.run(()=>{ps(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(tr),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),ps(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Ip);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Ip);s.add(o),n.moduleRef.onDestroy(()=>{Yo(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return MM(r,t,()=>{let o=e.get(Ur),s=o.add(),a=e.get(Dp);return a.runInitializers(),a.donePromise.then(()=>{let l=e.get($l,ds);if(C0(l||ds),!e.get(IM,!0))return ps(n)?e.get(Ln):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(ps(n)){let f=e.get(Ln);return n.rootComponent!==void 0&&f.bootstrap(n.rootComponent),f}else return AM?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>{o.remove(s)})})})}var AM;function MM(n,e,t){try{let r=t();return qi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var ql=null;function xM(n=[],e){return Ve.create({name:e,providers:[{provide:Ho,useValue:"platform"},{provide:Ip,useValue:new Set([()=>ql=null])},...n]})}function RM(n=[]){if(ql)return ql;let e=xM(n);return ql=e,_0(),NM(e),e}function NM(n){let e=n.get(Al,null);bi(n,()=>{e?.forEach(t=>t())})}var kM=1e4;var D6=kM-1e3;var ir=(()=>{class n{static __NG_ELEMENT_ID__=PM}return n})();function PM(n){return FM(mt(),ne(),(n&16)===16)}function FM(n,e,t){if(Xn(n)&&!t){let r=Ot(n.index,e);return new nr(r,r)}else if(n.type&175){let r=e[at];return new nr(r,e)}return null}function O0(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;he(le.BootstrapApplicationStart);try{let o=i?.injector??RM(r),s=[Tp(),iv,...t||[]],a=new ts({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return bM({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{he(le.BootstrapApplicationEnd)}}function Sn(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function L0(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function V0(n,e){let t=Yn(n),r=e.elementInjector||Ii();return new Vi(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}var B0=null;function Xt(){return B0}function bp(n){B0??=n}var gs=class{},zl=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:()=>S(U0),providedIn:"platform"})}return n})();var U0=(()=>{class n extends zl{_location;_history;_doc=S(Me);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Xt().getBaseHref(this._doc)}onPopState(t){let r=Xt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Xt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:()=>new n,providedIn:"platform"})}return n})();var Ap=/\s+/,H0=[],Mp=(()=>{class n{_ngEl;_renderer;initialClasses=H0;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(Ap):H0}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Ap):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Ap).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(re(ct),re(Qt))};static \u0275dir=we({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var xp=(()=>{class n{_viewContainer;_context=new Wl;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){$0(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){$0(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(re(Wr),re(Gi))};static \u0275dir=we({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Wl=class{$implicit=null;ngIf=null};function $0(n,e){if(n&&!n.createEmbeddedView)throw new M(2020,!1)}var Vt=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=vt({type:n});static \u0275inj=ot({})}return n})();function ms(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var jr=class{};var Rp="browser";function G0(n){return n===Rp}var ys=class{_doc;constructor(e){this._doc=e}manager},jl=(()=>{class n extends ys{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(Z(Me))};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})(),Yl=new F(""),Fp=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof jl));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof jl);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new M(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Z(Yl),Z(xe))};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})(),Np="ng-app-id";function q0(n){for(let e of n)e.remove()}function z0(n,e){let t=e.createElement("style");return t.textContent=n,t}function BM(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Np}="${e}"],link[${Np}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Np),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Pp(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Op=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,BM(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,z0);r?.forEach(i=>this.addUsage(i,this.external,Pp))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(q0(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])q0(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,z0(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Pp(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Z(Me),Z(Ui),Z(xl,8),Z(zr))};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})(),kp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Lp=/%COMP%/g;var j0="%COMP%",UM=`_nghost-${j0}`,HM=`_ngcontent-${j0}`,$M=!0,GM=new F("",{factory:()=>$M});function qM(n){return HM.replace(Lp,n)}function zM(n){return UM.replace(Lp,n)}function K0(n,e){return e.map(t=>t.replace(Lp,n))}var Es=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(t,r,i,o,s,a,l=null,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=l,this.tracingService=u,this.defaultRenderer=new vs(t,s,a,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Jl?i.applyToHost(t):i instanceof _s&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.tracingService;switch(r.encapsulation){case Zt.Emulated:o=new Jl(l,u,r,this.appId,f,s,a,p);break;case Zt.ShadowDom:return new Kl(l,t,r,s,a,this.nonce,p,u);case Zt.ExperimentalIsolatedShadowDom:return new Kl(l,t,r,s,a,this.nonce,p);default:o=new _s(l,u,r,f,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Z(Fp),Z(Op),Z(Ui),Z(GM),Z(Me),Z(xe),Z(xl),Z(On,8))};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})(),vs=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(kp[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(W0(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(W0(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new M(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=kp[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=kp[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(vn.DashCase|vn.Important)?e.style.setProperty(t,r,i&vn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&vn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Xt().getGlobalEventTarget(this.doc,e),!e))throw new M(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function W0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Kl=class extends vs{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,o,s,a,l){super(e,i,o,a),this.hostEl=t,this.sharedStylesHost=l,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=K0(r.id,u);for(let p of u){let h=document.createElement("style");s&&h.setAttribute("nonce",s),h.textContent=p,this.shadowRoot.appendChild(h)}let f=r.getExternalStyles?.();if(f)for(let p of f){let h=Pp(p,i);s&&h.setAttribute("nonce",s),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},_s=class extends vs{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?K0(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Gr.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Jl=class extends _s{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,l){let u=i+"-"+r.id;super(e,t,r,o,s,a,l,u),this.contentAttr=qM(u),this.hostAttr=zM(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Zl=class n extends gs{supportsDOMEvents=!0;static makeCurrent(){bp(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=WM();return t==null?null:jM(t)}resetBaseElement(){Cs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ms(document.cookie,e)}},Cs=null;function WM(){return Cs=Cs||document.head.querySelector("base"),Cs?Cs.getAttribute("href"):null}function jM(n){return new URL(n,document.baseURI).pathname}var KM=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})(),J0=["alt","control","meta","shift"],JM={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},YM={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Y0=(()=>{class n extends ys{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Xt().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),J0.forEach(u=>{let f=r.indexOf(u);f>-1&&(r.splice(f,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=JM[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),J0.forEach(s=>{if(s!==i){let a=YM[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Z(Me))};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})();async function Vp(n,e,t){let r=U({rootComponent:n},ZM(e,t));return O0(r)}function ZM(n,e){return{platformRef:e?.platformRef,appProviders:[...nx,...n?.providers??[]],platformProviders:tx}}function QM(){Zl.makeCurrent()}function XM(){return new kt}function ex(){return rp(document),document}var tx=[{provide:zr,useValue:Rp},{provide:Al,useValue:QM,multi:!0},{provide:Me,useFactory:ex}];var nx=[{provide:Ho,useValue:"root"},{provide:kt,useFactory:XM},{provide:Yl,useClass:jl,multi:!0},{provide:Yl,useClass:Y0,multi:!0},Es,Op,Fp,{provide:lt,useExisting:Es},{provide:jr,useClass:KM},[]];var Bt=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Xl=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}},ec=class{encodeKey(e){return Z0(e)}encodeValue(e){return Z0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function rx(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}var ix=/%(\d[a-f0-9])/gi,ox={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Z0(n){return encodeURIComponent(n).replace(ix,(e,t)=>ox[t]??e)}function Ql(n){return`${n}`}var Bn=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new ec,e.fromString){if(e.fromObject)throw new M(2805,!1);this.map=rx(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Ql):[Ql(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Ql(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Ql(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};function sx(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Q0(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function X0(n){return typeof Blob<"u"&&n instanceof Blob}function eE(n){return typeof FormData<"u"&&n instanceof FormData}function ax(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var tE="Content-Type",nE="Accept",iE="text/plain",oE="application/json",lx=`${oE}, ${iE}, */*`,Ki=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(sx(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new M(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),o.referrerPolicy&&(this.referrerPolicy=o.referrerPolicy),this.transferCache=o.transferCache}if(this.headers??=new Bt,this.context??=new Xl,!this.params)this.params=new Bn,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Q0(this.body)||X0(this.body)||eE(this.body)||ax(this.body)?this.body:this.body instanceof Bn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||eE(this.body)?null:X0(this.body)?this.body.type||null:Q0(this.body)?null:typeof this.body=="string"?iE:this.body instanceof Bn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?oE:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,l=e.mode||this.mode,u=e.redirect||this.redirect,f=e.credentials||this.credentials,p=e.referrer||this.referrer,h=e.integrity||this.integrity,g=e.referrerPolicy||this.referrerPolicy,m=e.transferCache??this.transferCache,y=e.timeout??this.timeout,_=e.body!==void 0?e.body:this.body,E=e.withCredentials??this.withCredentials,I=e.reportProgress??this.reportProgress,A=e.headers||this.headers,b=e.params||this.params,w=e.context??this.context;return e.setHeaders!==void 0&&(A=Object.keys(e.setHeaders).reduce((H,k)=>H.set(k,e.setHeaders[k]),A)),e.setParams&&(b=Object.keys(e.setParams).reduce((H,k)=>H.set(k,e.setParams[k]),b)),new n(t,r,_,{params:b,headers:A,context:w,reportProgress:I,responseType:i,withCredentials:E,transferCache:m,keepalive:o,cache:a,priority:s,timeout:y,mode:l,redirect:u,credentials:f,referrer:p,integrity:h,referrerPolicy:g})}},Kr=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(Kr||{}),Yi=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(e,t=200,r="OK"){this.headers=e.headers||new Bt,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.responseType=e.responseType,this.ok=this.status>=200&&this.status<300}},tc=class n extends Yi{constructor(e={}){super(e)}type=Kr.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Un=class n extends Yi{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Kr.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected,responseType:e.responseType??this.responseType})}},Ji=class extends Yi{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},cx=200,ux=204;var dx=new F("");var fx=/^\)\]\}',?\n/;var Up=(()=>{class n{xhrFactory;tracingService=S(On,{optional:!0});constructor(t){this.xhrFactory=t}maybePropagateTrace(t){return this.tracingService?.propagate?this.tracingService.propagate(t):t}handle(t){if(t.method==="JSONP")throw new M(-2800,!1);let r=this.xhrFactory;return Ee(null).pipe(Mn(()=>new ce(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((_,E)=>s.setRequestHeader(_,E.join(","))),t.headers.has(nE)||s.setRequestHeader(nE,lx),!t.headers.has(tE)){let _=t.detectContentTypeHeader();_!==null&&s.setRequestHeader(tE,_)}if(t.timeout&&(s.timeout=t.timeout),t.responseType){let _=t.responseType.toLowerCase();s.responseType=_!=="json"?_:"text"}let a=t.serializeBody(),l=null,u=()=>{if(l!==null)return l;let _=s.statusText||"OK",E=new Bt(s.getAllResponseHeaders()),I=s.responseURL||t.url;return l=new tc({headers:E,status:s.status,statusText:_,url:I}),l},f=this.maybePropagateTrace(()=>{let{headers:_,status:E,statusText:I,url:A}=u(),b=null;E!==ux&&(b=typeof s.response>"u"?s.responseText:s.response),E===0&&(E=b?cx:0);let w=E>=200&&E<300;if(t.responseType==="json"&&typeof b=="string"){let H=b;b=b.replace(fx,"");try{b=b!==""?JSON.parse(b):null}catch(k){b=H,w&&(w=!1,b={error:k,text:b})}}w?(o.next(new Un({body:b,headers:_,status:E,statusText:I,url:A||void 0})),o.complete()):o.error(new Ji({error:b,headers:_,status:E,statusText:I,url:A||void 0}))}),p=this.maybePropagateTrace(_=>{let{url:E}=u(),I=new Ji({error:_,status:s.status||0,statusText:s.statusText||"Unknown Error",url:E||void 0});o.error(I)}),h=p;t.timeout&&(h=this.maybePropagateTrace(_=>{let{url:E}=u(),I=new Ji({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:E||void 0});o.error(I)}));let g=!1,m=this.maybePropagateTrace(_=>{g||(o.next(u()),g=!0);let E={type:Kr.DownloadProgress,loaded:_.loaded};_.lengthComputable&&(E.total=_.total),t.responseType==="text"&&s.responseText&&(E.partialText=s.responseText),o.next(E)}),y=this.maybePropagateTrace(_=>{let E={type:Kr.UploadProgress,loaded:_.loaded};_.lengthComputable&&(E.total=_.total),o.next(E)});return s.addEventListener("load",f),s.addEventListener("error",p),s.addEventListener("timeout",h),s.addEventListener("abort",p),t.reportProgress&&(s.addEventListener("progress",m),a!==null&&s.upload&&s.upload.addEventListener("progress",y)),s.send(a),o.next({type:Kr.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",f),s.removeEventListener("timeout",h),t.reportProgress&&(s.removeEventListener("progress",m),a!==null&&s.upload&&s.upload.removeEventListener("progress",y)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(Z(jr))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sE(n,e){return e(n)}function px(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function hx(n,e,t){return(r,i)=>bi(t,()=>e(r,o=>n(o,i)))}var rc=new F(""),Hp=new F("",{factory:()=>[]}),aE=new F(""),$p=new F("",{factory:()=>!0});function gx(){let n=null;return(e,t)=>{n===null&&(n=(S(rc,{optional:!0})??[]).reduceRight(px,sE));let r=S(Ni);if(S($p)){let o=r.add();return n(e,t).pipe(Pa(o))}else return n(e,t)}}var Gp=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=Z(Up),i},providedIn:"root"})}return n})();var nc=(()=>{class n{backend;injector;chain=null;pendingTasks=S(Ni);contributeToStability=S($p);constructor(t,r){this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Hp),...this.injector.get(aE,[])]));this.chain=r.reduceRight((i,o)=>hx(i,o,this.injector),sE)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Pa(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(Z(Gp),Z(Je))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qp=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=Z(nc),i},providedIn:"root"})}return n})();function Bp(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer,referrerPolicy:n.referrerPolicy}}var Zi=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Ki)o=t;else{let l;i.headers instanceof Bt?l=i.headers:l=new Bt(i.headers);let u;i.params&&(i.params instanceof Bn?u=i.params:u=new Bn({fromObject:i.params})),o=new Ki(t,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,referrerPolicy:i.referrerPolicy,integrity:i.integrity,timeout:i.timeout})}let s=Ee(o).pipe(vd(l=>this.handler.handle(l)));if(t instanceof Ki||i.observe==="events")return s;let a=s.pipe(xo(l=>l instanceof Un));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Ie(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new M(2806,!1);return l.body}));case"blob":return a.pipe(Ie(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new M(2807,!1);return l.body}));case"text":return a.pipe(Ie(l=>{if(l.body!==null&&typeof l.body!="string")throw new M(2808,!1);return l.body}));default:return a.pipe(Ie(l=>l.body))}case"response":return a;default:throw new M(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Bn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Bp(i,r))}post(t,r,i={}){return this.request("POST",t,Bp(i,r))}put(t,r,i={}){return this.request("PUT",t,Bp(i,r))}static \u0275fac=function(r){return new(r||n)(Z(qp))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var mx=new F("",{factory:()=>!0}),yx="XSRF-TOKEN",vx=new F("",{factory:()=>yx}),_x="X-XSRF-TOKEN",Ex=new F("",{factory:()=>_x}),Cx=(()=>{class n{cookieName=S(vx);doc=S(Me);lastCookieString="";lastToken=null;parseCount=0;getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ms(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=Z(Cx),i},providedIn:"root"})}return n})();function Dx(n,e){if(!S(mx)||n.method==="GET"||n.method==="HEAD")return e(n);try{let i=S(zl).href,{origin:o}=new URL(i),{origin:s}=new URL(n.url,o);if(o!==s)return e(n)}catch{return e(n)}let t=S(lE).getToken(),r=S(Ex);return t!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,t)})),e(n)}var zp=(function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n})(zp||{});function Sx(n,e){return{\u0275kind:n,\u0275providers:e}}function Wp(...n){let e=[Zi,nc,{provide:qp,useExisting:nc},{provide:Gp,useFactory:()=>S(dx,{optional:!0})??S(Up)},{provide:Hp,useValue:Dx,multi:!0}];for(let t of n)e.push(...t.\u0275providers);return Uo(e)}var rE=new F("");function jp(){return Sx(zp.LegacyInterceptors,[{provide:rE,useFactory:gx},{provide:Hp,useExisting:rE,multi:!0}])}var Y=(function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n})(Y||{}),Ut="*";function Qi(n,e){return{type:Y.Trigger,name:n,definitions:e,options:{}}}function or(n,e=null){return{type:Y.Animate,styles:e,timings:n}}function cE(n,e=null){return{type:Y.Sequence,steps:n,options:e}}function Et(n){return{type:Y.Style,styles:n,offset:null}}function sr(n,e,t=null){return{type:Y.Transition,expr:n,animation:e,options:t}}var wn=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Jr=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,r=0,i=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Xi="!";function uE(n){return new M(3e3,!1)}function wx(){return new M(3100,!1)}function Tx(){return new M(3101,!1)}function Ix(n){return new M(3001,!1)}function bx(n){return new M(3003,!1)}function Ax(n){return new M(3004,!1)}function fE(n,e){return new M(3005,!1)}function pE(){return new M(3006,!1)}function hE(){return new M(3007,!1)}function gE(n,e){return new M(3008,!1)}function mE(n){return new M(3002,!1)}function yE(n,e,t,r,i){return new M(3010,!1)}function vE(){return new M(3011,!1)}function _E(){return new M(3012,!1)}function EE(){return new M(3200,!1)}function CE(){return new M(3202,!1)}function DE(){return new M(3013,!1)}function SE(n){return new M(3014,!1)}function wE(n){return new M(3015,!1)}function TE(n){return new M(3016,!1)}function IE(n,e){return new M(3404,!1)}function Mx(n){return new M(3502,!1)}function bE(n){return new M(3503,!1)}function AE(){return new M(3300,!1)}function ME(n){return new M(3504,!1)}function xE(n){return new M(3301,!1)}function RE(n,e){return new M(3302,!1)}function NE(n){return new M(3303,!1)}function kE(n,e){return new M(3400,!1)}function PE(n){return new M(3401,!1)}function FE(n){return new M(3402,!1)}function OE(n,e){return new M(3505,!1)}function Hn(n){switch(n.length){case 0:return new wn;case 1:return n[0];default:return new Jr(n)}}function Zp(n,e,t=new Map,r=new Map){let i=[],o=[],s=-1,a=null;if(e.forEach(l=>{let u=l.get("offset"),f=u==s,p=f&&a||new Map;l.forEach((h,g)=>{let m=g,y=h;if(g!=="offset")switch(m=n.normalizePropertyName(m,i),y){case Xi:y=t.get(g);break;case Ut:y=r.get(g);break;default:y=n.normalizeStyleValue(g,m,y,i);break}p.set(m,y)}),f||o.push(p),a=p,s=u}),i.length)throw Mx(i);return o}function ic(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Kp(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Kp(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Kp(t,"destroy",n)));break}}function Kp(n,e,t){let r=t.totalTime,i=!!t.disabled,o=oc(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),s=n._data;return s!=null&&(o._data=s),o}function oc(n,e,t,r,i="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function Ct(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function Qp(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var xx=typeof document>"u"?null:document.documentElement;function sc(n){let e=n.parentNode||n.host||null;return e===xx?null:e}function Rx(n){return n.substring(1,6)=="ebkit"}var Yr=null,dE=!1;function LE(n){Yr||(Yr=Nx()||{},dE=Yr.style?"WebkitAppearance"in Yr.style:!1);let e=!0;return Yr.style&&!Rx(n)&&(e=n in Yr.style,!e&&dE&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Yr.style)),e}function Nx(){return typeof document<"u"?document.body:null}function Xp(n,e){for(;e;){if(e===n)return!0;e=sc(e)}return!1}function eh(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var kx=1e3,th="{{",Px="}}",nh="ng-enter",ac="ng-leave",Ds="ng-trigger",Ss=".ng-trigger",rh="ng-animating",lc=".ng-animating";function Tn(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Jp(parseFloat(e[1]),e[2])}function Jp(n,e){return e==="s"?n*kx:n}function ws(n,e,t){return n.hasOwnProperty("duration")?n:Ox(n,e,t)}var Fx=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function Ox(n,e,t){let r,i=0,o="";if(typeof n=="string"){let s=n.match(Fx);if(s===null)return e.push(uE(n)),{duration:0,delay:0,easing:""};r=Jp(parseFloat(s[1]),s[2]);let a=s[3];a!=null&&(i=Jp(parseFloat(a),s[4]));let l=s[5];l&&(o=l)}else r=n;if(!t){let s=!1,a=e.length;r<0&&(e.push(wx()),s=!0),i<0&&(e.push(Tx()),s=!0),s&&e.splice(a,0,uE(n))}return{duration:r,delay:i,easing:o}}function VE(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function en(n,e,t){e.forEach((r,i)=>{let o=cc(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r})}function ar(n,e){e.forEach((t,r)=>{let i=cc(r);n.style[i]=""})}function eo(n){return Array.isArray(n)?n.length==1?n[0]:cE(n):n}function BE(n,e,t){let r=e.params||{},i=ih(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(Ix(o))})}var Yp=new RegExp(`${th}\\s*(.+?)\\s*${Px}`,"g");function ih(n){let e=[];if(typeof n=="string"){let t;for(;t=Yp.exec(n);)e.push(t[1]);Yp.lastIndex=0}return e}function to(n,e,t){let r=`${n}`,i=r.replace(Yp,(o,s)=>{let a=e[s];return a==null&&(t.push(bx(s)),a=""),a.toString()});return i==r?n:i}var Lx=/-+([a-z0-9])/g;function cc(n){return n.replace(Lx,(...e)=>e[1].toUpperCase())}function UE(n,e){return n===0||e===0}function HE(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<e.length;o++){let s=e[o];i.forEach(a=>s.set(a,uc(n,a)))}}return e}function Dt(n,e,t){switch(e.type){case Y.Trigger:return n.visitTrigger(e,t);case Y.State:return n.visitState(e,t);case Y.Transition:return n.visitTransition(e,t);case Y.Sequence:return n.visitSequence(e,t);case Y.Group:return n.visitGroup(e,t);case Y.Animate:return n.visitAnimate(e,t);case Y.Keyframes:return n.visitKeyframes(e,t);case Y.Style:return n.visitStyle(e,t);case Y.Reference:return n.visitReference(e,t);case Y.AnimateChild:return n.visitAnimateChild(e,t);case Y.AnimateRef:return n.visitAnimateRef(e,t);case Y.Query:return n.visitQuery(e,t);case Y.Stagger:return n.visitStagger(e,t);default:throw Ax(e.type)}}function uc(n,e){return window.getComputedStyle(n)[e]}var Ch=(()=>{class n{validateStyleProperty(t){return LE(t)}containsElement(t,r){return Xp(t,r)}getParentElement(t){return sc(t)}query(t,r,i){return eh(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,s,a=[],l){return new wn(i,o)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})(),Qr=class{static NOOP=new Ch},Xr=class{};var Vx=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),gc=class extends Xr{normalizePropertyName(e,t){return cc(e)}normalizeStyleValue(e,t,r,i){let o="",s=r.toString().trim();if(Vx.has(t)&&r!==0&&r!=="0")if(typeof r=="number")o="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(fE(e,r))}return s+o}};var mc="*";function Bx(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>Ux(r,t,e)):t.push(n),t}function Ux(n,e,t){if(n[0]==":"){let l=Hx(n,t);if(typeof l=="function"){e.push(l);return}n=l}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(wE(n)),e;let i=r[1],o=r[2],s=r[3];e.push($E(i,s));let a=i==mc&&s==mc;o[0]=="<"&&!a&&e.push($E(s,i))}function Hx(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(TE(n)),"* => *"}}var dc=new Set(["true","1"]),fc=new Set(["false","0"]);function $E(n,e){let t=dc.has(n)||fc.has(n),r=dc.has(e)||fc.has(e);return(i,o)=>{let s=n==mc||n==i,a=e==mc||e==o;return!s&&t&&typeof i=="boolean"&&(s=i?dc.has(n):fc.has(n)),!a&&r&&typeof o=="boolean"&&(a=o?dc.has(e):fc.has(e)),s&&a}}var QE=":self",$x=new RegExp(`s*${QE}s*,?`,"g");function XE(n,e,t,r){return new uh(n).build(e,t,r)}var GE="",uh=class{_driver;constructor(e){this._driver=e}build(e,t,r){let i=new dh(t);return this._resetContextStyleTimingState(i),Dt(this,eo(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=GE,e.collectedStyles=new Map,e.collectedStyles.set(GE,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(pE()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==Y.State){let l=a,u=l.name;u.toString().split(/\s*,\s*/).forEach(f=>{l.name=f,o.push(this.visitState(l,t))}),l.name=u}else if(a.type==Y.Transition){let l=this.visitTransition(a,t);r+=l.queryCount,i+=l.depCount,s.push(l)}else t.errors.push(hE())}),{type:Y.Trigger,name:e.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let o=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{ih(l).forEach(u=>{s.hasOwnProperty(u)||o.add(u)})})}),o.size&&t.errors.push(gE(e.name,[...o.values()]))}return{type:Y.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=Dt(this,eo(e.animation),t),i=Bx(e.expr,t.errors);return{type:Y.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Zr(e.options)}}visitSequence(e,t){return{type:Y.Sequence,steps:e.steps.map(r=>Dt(this,r,t)),options:Zr(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,o=e.steps.map(s=>{t.currentTime=r;let a=Dt(this,s,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:Y.Group,steps:o,options:Zr(e.options)}}visitAnimate(e,t){let r=Wx(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:Et({});if(o.type==Y.Keyframes)i=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;let u={};r.easing&&(u.easing=r.easing),s=Et(u)}t.currentTime+=r.duration+r.delay;let l=this.visitStyle(s,t);l.isEmptyStep=a,i=l}return t.currentAnimateTimings=null,{type:Y.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===Ut?r.push(a):t.errors.push(mE(a)):r.push(new Map(Object.entries(a)));let o=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let l of a.values())if(l.toString().indexOf(th)>=0){o=!0;break}}}),{type:Y.Style,styles:r,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let u=t.collectedStyles.get(t.currentQuerySelector),f=u.get(l),p=!0;f&&(o!=i&&o>=f.startTime&&i<=f.endTime&&(t.errors.push(yE(l,f.startTime,f.endTime,o,i)),p=!1),o=f.startTime),p&&u.set(l,{startTime:o,endTime:i}),t.options&&BE(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:Y.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(vE()),r;let i=1,o=0,s=[],a=!1,l=!1,u=0,f=e.steps.map(E=>{let I=this._makeStyleAst(E,t),A=I.offset!=null?I.offset:zx(I.styles),b=0;return A!=null&&(o++,b=I.offset=A),l=l||b<0||b>1,a=a||b<u,u=b,s.push(b),I});l&&t.errors.push(_E()),a&&t.errors.push(EE());let p=e.steps.length,h=0;o>0&&o<p?t.errors.push(CE()):o==0&&(h=i/(p-1));let g=p-1,m=t.currentTime,y=t.currentAnimateTimings,_=y.duration;return f.forEach((E,I)=>{let A=h>0?I==g?1:h*I:s[I],b=A*_;t.currentTime=m+y.delay+b,y.duration=b,this._validateStyleAst(E,t),E.offset=A,r.styles.push(E)}),r}visitReference(e,t){return{type:Y.Reference,animation:Dt(this,eo(e.animation),t),options:Zr(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:Y.AnimateChild,options:Zr(e.options)}}visitAnimateRef(e,t){return{type:Y.AnimateRef,animation:this.visitReference(e.animation,t),options:Zr(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[o,s]=Gx(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,Ct(t.collectedStyles,t.currentQuerySelector,new Map);let a=Dt(this,eo(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:Y.Query,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:Zr(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(DE());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:ws(e.timings,t.errors,!0);return{type:Y.Stagger,animation:Dt(this,eo(e.animation),t),timings:r,options:null}}};function Gx(n){let e=!!n.split(/\s*,\s*/).find(t=>t==QE);return e&&(n=n.replace($x,"")),n=n.replace(/@\*/g,Ss).replace(/@\w+/g,t=>Ss+"-"+t.slice(1)).replace(/:animating/g,lc),[n,e]}function qx(n){return n?U({},n):null}var dh=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function zx(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function Wx(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=ws(n,e).duration;return oh(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=oh(0,0,"");return o.dynamic=!0,o.strValue=t,o}let i=ws(t,e);return oh(i.duration,i.delay,i.easing)}function Zr(n){return n?(n=U({},n),n.params&&(n.params=qx(n.params))):n={},n}function oh(n,e,t){return{duration:n,delay:e,easing:t}}function Dh(n,e,t,r,i,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}var Is=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},jx=1,Kx=":enter",Jx=new RegExp(Kx,"g"),Yx=":leave",Zx=new RegExp(Yx,"g");function eC(n,e,t,r,i,o=new Map,s=new Map,a,l,u=[]){return new fh().buildKeyframes(n,e,t,r,i,o,s,a,l,u)}var fh=class{buildKeyframes(e,t,r,i,o,s,a,l,u,f=[]){u=u||new Is;let p=new ph(e,t,u,i,o,f,[]);p.options=l;let h=l.delay?Tn(l.delay):0;p.currentTimeline.delayNextStep(h),p.currentTimeline.setStyles([s],null,p.errors,l),Dt(this,r,p);let g=p.timelines.filter(m=>m.containsAnimation());if(g.length&&a.size){let m;for(let y=g.length-1;y>=0;y--){let _=g[y];if(_.element===t){m=_;break}}m&&!m.allowOnlyTimelineStyles()&&m.setStyles([a],null,p.errors,l)}return g.length?g.map(m=>m.buildKeyframes()):[Dh(t,[],[],[],0,h,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let o=i?.delay;if(o){let s=typeof o=="number"?o:Tn(to(o,i?.params??{},t.errors));r.delayNextStep(s)}}}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime,s=r.duration!=null?Tn(r.duration):null,a=r.delay!=null?Tn(r.delay):null;return s!==0&&e.forEach(l=>{let u=t.appendInstructionToTimeline(l,s,a);o=Math.max(o,u.duration+u.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),Dt(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),o.delay!=null)){i.previousNode.type==Y.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=yc);let s=Tn(o.delay);i.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>Dt(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,o=e.options&&e.options.delay?Tn(e.options.delay):0;e.steps.forEach(s=>{let a=t.createSubContext(e.options);o&&a.delayNextStep(o),Dt(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?to(r,t.params,t.errors):r;return ws(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let o=e.style;o.type==Y.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(l=>{let u=l.offset||0;a.forwardTime(u*o),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?Tn(i.delay):0;o&&(t.previousNode.type===Y.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=yc);let s=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((u,f)=>{t.currentQueryIndex=f;let p=t.createSubContext(e.options,u);o&&p.delayNextStep(o),u===t.element&&(l=p.currentTimeline),Dt(this,e.animation,p),p.currentTimeline.applyStylesToKeyframe();let h=p.currentTimeline.currentTime;s=Math.max(s,h)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1),l=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime;break}let f=t.currentTimeline;l&&f.delayNextStep(l);let p=f.currentTime;Dt(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-p+(i.startTime-r.currentTimeline.startTime)}},yc={},ph=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=yc;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,r,i,o,s,a,l){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=l||new vc(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=Tn(r.duration)),r.delay!=null&&(i.delay=Tn(r.delay));let o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=to(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,o=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=yc,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new hh(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,s){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(Jx,"."+this._enterClassName),e=e.replace(Zx,"."+this._leaveClassName);let l=r!=1,u=this._driver.query(this.element,e,l);r!==0&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),a.push(...u)}return!o&&a.length==0&&s.push(SE(t)),a}},vc=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=jx,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Ut),this._currentKeyframe.set(t,Ut);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let o=i&&i.params||{},s=Qx(e,this._globalTimelineStyles);for(let[a,l]of s){let u=to(l,o,r);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Ut),this._updateStyle(a,u)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,l)=>{let u=new Map([...this._backFill,...a]);u.forEach((f,p)=>{f===Xi?e.add(p):f===Ut&&t.add(p)}),r||u.set("offset",l/this.duration),i.push(u)});let o=[...e.values()],s=[...t.values()];if(r){let a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return Dh(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}},hh=class extends vc{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,r,i,o,s,a=!1){super(e,t,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],s=r+t,a=t/s,l=new Map(e[0]);l.set("offset",0),o.push(l);let u=new Map(e[0]);u.set("offset",qE(a)),o.push(u);let f=e.length-1;for(let p=1;p<=f;p++){let h=new Map(e[p]),g=h.get("offset"),m=t+g*r;h.set("offset",qE(m/s)),o.push(h)}r=s,t=0,i="",e=o}return Dh(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function qE(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function Qx(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let o of r)t.set(o,Ut)}else for(let[o,s]of i)t.set(o,s)}),t}function zE(n,e,t,r,i,o,s,a,l,u,f,p,h){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:f,totalTime:p,errors:h}}var sh={},_c=class{_triggerName;ast;_stateStyles;constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return Xx(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,s,a,l,u,f){let p=[],h=this.ast.options&&this.ast.options.params||sh,g=a&&a.params||sh,m=this.buildStyles(r,g,p),y=l&&l.params||sh,_=this.buildStyles(i,y,p),E=new Set,I=new Map,A=new Map,b=i==="void",w={params:tC(y,h),delay:this.ast.options?.delay},H=f?[]:eC(e,t,this.ast.animation,o,s,m,_,w,u,p),k=0;return H.forEach(Q=>{k=Math.max(Q.duration+Q.delay,k)}),p.length?zE(t,this._triggerName,r,i,b,m,_,[],[],I,A,k,p):(H.forEach(Q=>{let B=Q.element,K=Ct(I,B,new Set);Q.preStyleProps.forEach(Fe=>K.add(Fe));let Re=Ct(A,B,new Set);Q.postStyleProps.forEach(Fe=>Re.add(Fe)),B!==t&&E.add(B)}),zE(t,this._triggerName,r,i,b,m,_,H,[...E.values()],I,A,k))}};function Xx(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}function tC(n,e){let t=U({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var gh=class{styles;defaultParams;normalizer;constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=tC(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=to(s,i,t));let l=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,l,s,t),r.set(a,s)})}),r}};function eR(n,e,t){return new mh(n,e,t)}var mh=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,t.states.forEach(i=>{let o=i.options&&i.options.params||{};this.states.set(i.name,new gh(i.style,o,r))}),WE(this.states,"true","1"),WE(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new _c(e,i,this.states))}),this.fallbackTransition=tR(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(s=>s.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function tR(n,e,t){let r=[(s,a)=>!0],i={type:Y.Sequence,steps:[],options:null},o={type:Y.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new _c(n,o,e)}function WE(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var nR=new Is,yh=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r}register(e,t){let r=[],i=[],o=XE(this._driver,t,r,i);if(r.length)throw bE(r);this._animations.set(e,o)}_buildPlayer(e,t,r){let i=e.element,o=Zp(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],o=this._animations.get(e),s,a=new Map;if(o?(s=eC(this._driver,t,o,nh,ac,new Map,new Map,r,nR,i),s.forEach(f=>{let p=Ct(a,f.element,new Map);f.postStyleProps.forEach(h=>p.set(h,null))})):(i.push(AE()),s=[]),i.length)throw ME(i);a.forEach((f,p)=>{f.forEach((h,g)=>{f.set(g,this._driver.computeStyle(p,g,Ut))})});let l=s.map(f=>{let p=a.get(f.element);return this._buildPlayer(f,new Map,p)}),u=Hn(l);return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw xE(e);return t}listen(e,t,r,i){let o=oc(t,"","","");return ic(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let s=i[0]||{};this.create(e,t,s);return}let o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},jE="ng-animate-queued",rR=".ng-animate-queued",ah="ng-animate-disabled",iR=".ng-animate-disabled",oR="ng-star-inserted",sR=".ng-star-inserted",aR=[],nC={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},lR={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},tn="__ng_removed",bs=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=uR(i),r){let o=e,{value:s}=o,a=zu(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},Ts="void",lh=new bs(Ts),vh=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this._hostClassName="ng-tns-"+e,Ht(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw RE(r,t);if(r==null||r.length==0)throw NE(t);if(!dR(r))throw kE(r,t);let o=Ct(this._elementListeners,e,[]),s={name:t,phase:r,callback:i};o.push(s);let a=Ct(this._engine.statesByElement,e,new Map);return a.has(t)||(Ht(e,Ds),Ht(e,Ds+"-"+t),a.set(t,lh)),()=>{this._engine.afterFlush(()=>{let l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw PE(e);return t}trigger(e,t,r,i=!0){let o=this._getTrigger(t),s=new As(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Ht(e,Ds),Ht(e,Ds+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t),u=new bs(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&u.absorbOptions(l.options),a.set(t,u),l||(l=lh),!(u.value===Ts)&&l.value===u.value){if(!hR(l.params,u.params)){let y=[],_=o.matchStyles(l.value,l.params,y),E=o.matchStyles(u.value,u.params,y);y.length?this._engine.reportError(y):this._engine.afterFlush(()=>{ar(e,_),en(e,E)})}return}let h=Ct(this._engine.playersByElement,e,[]);h.forEach(y=>{y.namespaceId==this.id&&y.triggerName==t&&y.queued&&y.destroy()});let g=o.matchTransition(l.value,u.value,e,u.params),m=!1;if(!g){if(!i)return;g=o.fallbackTransition,m=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:g,fromState:l,toState:u,player:s,isFallbackTransition:m}),m||(Ht(e,jE),s.onStart(()=>{no(e,jE)})),s.onDone(()=>{let y=this.players.indexOf(s);y>=0&&this.players.splice(y,1);let _=this._engine.playersByElement.get(e);if(_){let E=_.indexOf(s);E>=0&&_.splice(E,1)}}),this.players.push(s),h.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,Ss,!0);r.forEach(i=>{if(i[tn])return;let o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((l,u)=>{if(s.set(u,l.value),this._triggers.has(u)){let f=this.trigger(e,u,Ts,i);f&&a.push(f)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),r&&Hn(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(o=>{let s=o.name;if(i.has(s))return;i.add(s);let l=this._triggers.get(s).fallbackTransition,u=r.get(s)||lh,f=new bs(Ts),p=new As(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:l,fromState:u,toState:f,player:p,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let s=e;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let o=e[tn];(!o||o===nC)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ht(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){let l=oc(o,r.triggerName,r.fromState.value,r.toState.value);l._data=e,ic(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let o=r.transition.ast.depCount,s=i.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},_h=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new vh(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){let l=i.get(a);if(l){let u=r.indexOf(l);r.splice(u+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}}return t}trigger(e,t,r,i){if(pc(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!pc(t))return;let o=t[tn];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ht(e,ah)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),no(e,ah))}removeNode(e,t,r){if(pc(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[tn]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return pc(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,Ss,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,lc,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Hn(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[tn];if(t&&t.setForRemoval){if(e[tn]=nC,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(ah)&&this.markElementAsDisabled(e,!1),this.driver.query(e,iR,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];Ht(i,oR)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?Hn(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw FE(e)}_flushAnimations(e,t){let r=new Is,i=[],o=new Map,s=[],a=new Map,l=new Map,u=new Map,f=new Set;this.disabledNodes.forEach(N=>{f.add(N);let L=this.driver.query(N,rR,!0);for(let O=0;O<L.length;O++)f.add(L[O])});let p=this.bodyNode,h=Array.from(this.statesByElement.keys()),g=YE(h,this.collectedEnterElements),m=new Map,y=0;g.forEach((N,L)=>{let O=nh+y++;m.set(L,O),N.forEach(te=>Ht(te,O))});let _=[],E=new Set,I=new Set;for(let N=0;N<this.collectedLeaveElements.length;N++){let L=this.collectedLeaveElements[N],O=L[tn];O&&O.setForRemoval&&(_.push(L),E.add(L),O.hasAnimation?this.driver.query(L,sR,!0).forEach(te=>E.add(te)):I.add(L))}let A=new Map,b=YE(h,Array.from(E));b.forEach((N,L)=>{let O=ac+y++;A.set(L,O),N.forEach(te=>Ht(te,O))}),e.push(()=>{g.forEach((N,L)=>{let O=m.get(L);N.forEach(te=>no(te,O))}),b.forEach((N,L)=>{let O=A.get(L);N.forEach(te=>no(te,O))}),_.forEach(N=>{this.processLeaveNode(N)})});let w=[],H=[];for(let N=this._namespaceList.length-1;N>=0;N--)this._namespaceList[N].drainQueuedTransitions(t).forEach(O=>{let te=O.player,ze=O.element;if(w.push(te),this.collectedEnterElements.length){let Ye=ze[tn];if(Ye&&Ye.setForMove){if(Ye.previousTriggersValues&&Ye.previousTriggersValues.has(O.triggerName)){let hr=Ye.previousTriggersValues.get(O.triggerName),Rt=this.statesByElement.get(O.element);if(Rt&&Rt.has(O.triggerName)){let ea=Rt.get(O.triggerName);ea.value=hr,Rt.set(O.triggerName,ea)}}te.destroy();return}}let un=!p||!this.driver.containsElement(p,ze),Tt=A.get(ze),zn=m.get(ze),Ne=this._buildInstruction(O,r,zn,Tt,un);if(Ne.errors&&Ne.errors.length){H.push(Ne);return}if(un){te.onStart(()=>ar(ze,Ne.fromStyles)),te.onDestroy(()=>en(ze,Ne.toStyles)),i.push(te);return}if(O.isFallbackTransition){te.onStart(()=>ar(ze,Ne.fromStyles)),te.onDestroy(()=>en(ze,Ne.toStyles)),i.push(te);return}let wm=[];Ne.timelines.forEach(Ye=>{Ye.stretchStartingKeyframe=!0,this.disabledNodes.has(Ye.element)||wm.push(Ye)}),Ne.timelines=wm,r.append(ze,Ne.timelines);let KS={instruction:Ne,player:te,element:ze};s.push(KS),Ne.queriedElements.forEach(Ye=>Ct(a,Ye,[]).push(te)),Ne.preStyleProps.forEach((Ye,hr)=>{if(Ye.size){let Rt=l.get(hr);Rt||l.set(hr,Rt=new Set),Ye.forEach((ea,qu)=>Rt.add(qu))}}),Ne.postStyleProps.forEach((Ye,hr)=>{let Rt=u.get(hr);Rt||u.set(hr,Rt=new Set),Ye.forEach((ea,qu)=>Rt.add(qu))})});if(H.length){let N=[];H.forEach(L=>{N.push(OE(L.triggerName,L.errors))}),w.forEach(L=>L.destroy()),this.reportError(N)}let k=new Map,Q=new Map;s.forEach(N=>{let L=N.element;r.has(L)&&(Q.set(L,L),this._beforeAnimationBuild(N.player.namespaceId,N.instruction,k))}),i.forEach(N=>{let L=N.element;this._getPreviousPlayers(L,!1,N.namespaceId,N.triggerName,null).forEach(te=>{Ct(k,L,[]).push(te),te.destroy()})});let B=_.filter(N=>ZE(N,l,u)),K=new Map;JE(K,this.driver,I,u,Ut).forEach(N=>{ZE(N,l,u)&&B.push(N)});let Fe=new Map;g.forEach((N,L)=>{JE(Fe,this.driver,new Set(N),l,Xi)}),B.forEach(N=>{let L=K.get(N),O=Fe.get(N);K.set(N,new Map([...L?.entries()??[],...O?.entries()??[]]))});let He=[],$e=[],bn={};s.forEach(N=>{let{element:L,player:O,instruction:te}=N;if(r.has(L)){if(f.has(L)){O.onDestroy(()=>en(L,te.toStyles)),O.disabled=!0,O.overrideTotalTime(te.totalTime),i.push(O);return}let ze=bn;if(Q.size>1){let Tt=L,zn=[];for(;Tt=Tt.parentNode;){let Ne=Q.get(Tt);if(Ne){ze=Ne;break}zn.push(Tt)}zn.forEach(Ne=>Q.set(Ne,ze))}let un=this._buildAnimation(O.namespaceId,te,k,o,Fe,K);if(O.setRealPlayer(un),ze===bn)He.push(O);else{let Tt=this.playersByElement.get(ze);Tt&&Tt.length&&(O.parentPlayer=Hn(Tt)),i.push(O)}}else ar(L,te.fromStyles),O.onDestroy(()=>en(L,te.toStyles)),$e.push(O),f.has(L)&&i.push(O)}),$e.forEach(N=>{let L=o.get(N.element);if(L&&L.length){let O=Hn(L);N.setRealPlayer(O)}}),i.forEach(N=>{N.parentPlayer?N.syncPlayerEvents(N.parentPlayer):N.destroy()});for(let N=0;N<_.length;N++){let L=_[N],O=L[tn];if(no(L,ac),O&&O.hasAnimation)continue;let te=[];if(a.size){let un=a.get(L);un&&un.length&&te.push(...un);let Tt=this.driver.query(L,lc,!0);for(let zn=0;zn<Tt.length;zn++){let Ne=a.get(Tt[zn]);Ne&&Ne.length&&te.push(...Ne)}}let ze=te.filter(un=>!un.destroyed);ze.length?fR(this,L,ze):this.processLeaveNode(L)}return _.length=0,He.forEach(N=>{this.players.push(N),N.onDone(()=>{N.destroy();let L=this.players.indexOf(N);this.players.splice(L,1)}),N.play()}),He}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let s=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let l=!o||o==Ts;a.forEach(u=>{u.queued||!l&&u.triggerName!=i||s.push(u)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(e,t,r){let i=t.triggerName,o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let l of t.timelines){let u=l.element,f=u!==o,p=Ct(r,u,[]);this._getPreviousPlayers(u,f,s,a,t.toState).forEach(g=>{let m=g.getRealPlayer();m.beforeDestroy&&m.beforeDestroy(),g.destroy(),p.push(g)})}ar(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,s){let a=t.triggerName,l=t.element,u=[],f=new Set,p=new Set,h=t.timelines.map(m=>{let y=m.element;f.add(y);let _=y[tn];if(_&&_.removedBeforeQueried)return new wn(m.duration,m.delay);let E=y!==l,I=pR((r.get(y)||aR).map(k=>k.getRealPlayer())).filter(k=>{let Q=k;return Q.element?Q.element===y:!1}),A=o.get(y),b=s.get(y),w=Zp(this._normalizer,m.keyframes,A,b),H=this._buildPlayer(m,w,I);if(m.subTimeline&&i&&p.add(y),E){let k=new As(e,a,y);k.setRealPlayer(H),u.push(k)}return H});u.forEach(m=>{Ct(this.playersByQueriedElement,m.element,[]).push(m),m.onDone(()=>cR(this.playersByQueriedElement,m.element,m))}),f.forEach(m=>Ht(m,rh));let g=Hn(h);return g.onDestroy(()=>{f.forEach(m=>no(m,rh)),en(l,t.toStyles)}),p.forEach(m=>{Ct(i,m,[]).push(g)}),g}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new wn(e.duration,e.delay)}},As=class{namespaceId;triggerName;element;_player=new wn;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>ic(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ct(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function cR(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function uR(n){return n??null}function pc(n){return n&&n.nodeType===1}function dR(n){return n=="start"||n=="done"}function KE(n,e){let t=n.style.display;return n.style.display=e??"none",t}function JE(n,e,t,r,i){let o=[];t.forEach(l=>o.push(KE(l)));let s=[];r.forEach((l,u)=>{let f=new Map;l.forEach(p=>{let h=e.computeStyle(u,p,i);f.set(p,h),(!h||h.length==0)&&(u[tn]=lR,s.push(u))}),n.set(u,f)});let a=0;return t.forEach(l=>KE(l,o[a++])),s}function YE(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),o=new Map;function s(a){if(!a)return r;let l=o.get(a);if(l)return l;let u=a.parentNode;return t.has(u)?l=u:i.has(u)?l=r:l=s(u),o.set(a,l),l}return e.forEach(a=>{let l=s(a);l!==r&&t.get(l).push(a)}),t}function Ht(n,e){n.classList?.add(e)}function no(n,e){n.classList?.remove(e)}function fR(n,e,t){Hn(t).onDone(()=>n.processLeaveNode(e))}function pR(n){let e=[];return rC(n,e),e}function rC(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof Jr?rC(r.players,e):e.push(r)}}function hR(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function ZE(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}var ro=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,r){this._driver=t,this._normalizer=r,this._transitionEngine=new _h(e.body,t,r),this._timelineEngine=new yh(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){let s=e+"-"+i,a=this._triggerCache[s];if(!a){let l=[],u=[],f=XE(this._driver,o,l,u);if(l.length)throw IE(i,l);a=eR(i,f,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[o,s]=Qp(r),a=i;this._timelineEngine.command(o,t,s,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if(r.charAt(0)=="@"){let[s,a]=Qp(r);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function gR(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=ch(e[0]),e.length>1&&(r=ch(e[e.length-1]))):e instanceof Map&&(t=ch(e)),t||r?new mR(n,t,r):null}var mR=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&en(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(en(this._element,this._initialStyles),this._endStyles&&(en(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(ar(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ar(this._element,this._endStyles),this._endStyles=null),en(this._element,this._initialStyles),this._state=3)}}return n})();function ch(n){let e=null;return n.forEach((t,r)=>{yR(r)&&(e=e||new Map,e.set(r,t))}),e}function yR(n){return n==="display"||n==="position"}var Ec=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer=null;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer()&&this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return this.domPlayer;this._initialized=!0;let e=this.keyframes,t=this._triggerWebAnimation(this.element,e,this.options);if(!t)return this._onFinish(),null;this.domPlayer=t,this._finalKeyframe=e.length?e[e.length-1]:new Map;let r=()=>this._onFinish();return t.addEventListener("finish",r),this.onDestroy(()=>{t.removeEventListener("finish",r)}),t}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer?.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){let i=this._convertKeyframesToObject(t);try{return e.animate(i,r)}catch{return null}}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){let e=this._buildPlayer();e&&(this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),e.play())}pause(){this.init(),this.domPlayer?.pause()}finish(){this.init(),this.domPlayer&&(this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish())}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer?.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer||this.init(),this.domPlayer&&(this.domPlayer.currentTime=e*this.time)}getPosition(){return this.domPlayer?+(this.domPlayer.currentTime??0)/this.time:this._initialized?1:0}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:uc(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Cc=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return Xp(e,t)}getParentElement(e){return sc(e)}query(e,t,r){return eh(e,t,r)}computeStyle(e,t,r){return uc(e,t)}animate(e,t,r,i,o,s=[]){let a=i==0?"both":"forwards",l={duration:r,delay:i,fill:a};o&&(l.easing=o);let u=new Map,f=s.filter(g=>g instanceof Ec);UE(r,i)&&f.forEach(g=>{g.currentSnapshot.forEach((m,y)=>u.set(y,m))});let p=VE(t).map(g=>new Map(g));p=HE(e,p,u);let h=gR(e,p);return new Ec(e,p,l,h)}};var hc="@",iC="@.disabled",Dc=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r,i){if(i){this.delegate.removeChild(e,t,r,i);return}this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==hc&&t==iC?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r,i){return this.delegate.listen(e,t,r,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},Eh=class extends Dc{factory;constructor(e,t,r,i,o){super(t,r,i,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==hc?t.charAt(1)=="."&&t==iC?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r,i){if(t.charAt(0)==hc){let o=vR(e),s=t.slice(1),a="";return s.charAt(0)!=hc&&([s,a]=_R(s)),this.engine.listen(this.namespaceId,o,s,a,l=>{let u=l._data||-1;this.factory.scheduleListenerCallback(u,r,l)})}return this.delegate.listen(e,t,r,i)}};function vR(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function _R(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var Sc=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,t.onRemovalComplete=(i,o)=>{o?.removeChild(null,i)}}createRenderer(e,t){let i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let u=this._rendererCache,f=u.get(i);if(!f){let p=()=>u.delete(i);f=new Dc("",i,this.engine,p),u.set(i,f)}return f}let o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=u=>{Array.isArray(u)?u.forEach(a):this.engine.registerTrigger(o,s,e,u.name,u)};return t.data.animation.forEach(a),new Eh(this,s,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var CR=(()=>{class n extends ro{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||n)(Z(Me),Z(Qr),Z(Xr))};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})();function DR(){return new gc}function SR(){return new Sc(S(Es),S(ro),S(xe))}var oC=[{provide:Xr,useFactory:DR},{provide:ro,useClass:CR},{provide:lt,useFactory:SR}],DK=[{provide:Qr,useClass:Ch},{provide:Ml,useValue:"NoopAnimations"},...oC],wR=[{provide:Qr,useFactory:()=>new Cc},{provide:Ml,useFactory:()=>"BrowserAnimations"},...oC];function sC(){return En("NgEagerAnimations"),[...wR]}var mC=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(re(Qt),re(ct))};static \u0275dir=we({type:n})}return n})(),Fs=(()=>{class n extends mC{static \u0275fac=(()=>{let t;return function(i){return(t||(t=rr(n)))(i||n)}})();static \u0275dir=we({type:n,features:[Qe]})}return n})(),ri=new F(""),TR={provide:ri,useExisting:gt(()=>Ah),multi:!0},Ah=(()=>{class n extends Fs{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=rr(n)))(i||n)}})();static \u0275dir=we({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&P("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[dt([TR]),Qe]})}return n})(),IR={provide:ri,useExisting:gt(()=>cr),multi:!0};function bR(){let n=Xt()?Xt().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var AR=new F(""),cr=(()=>{class n extends mC{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!bR())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(re(Qt),re(ct),re(AR,8))};static \u0275dir=we({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&P("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[dt([IR]),Qe]})}return n})();function Mh(n){return n==null||xh(n)===0}function xh(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Rh=new F(""),Nh=new F(""),MR=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ei=class{static min(e){return xR(e)}static max(e){return RR(e)}static required(e){return NR(e)}static requiredTrue(e){return kR(e)}static email(e){return PR(e)}static minLength(e){return FR(e)}static maxLength(e){return OR(e)}static pattern(e){return LR(e)}static nullValidator(e){return yC()}static compose(e){return SC(e)}static composeAsync(e){return TC(e)}};function xR(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function RR(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function NR(n){return Mh(n.value)?{required:!0}:null}function kR(n){return n.value===!0?null:{required:!0}}function PR(n){return Mh(n.value)||MR.test(n.value)?null:{email:!0}}function FR(n){return e=>{let t=e.value?.length??xh(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function OR(n){return e=>{let t=e.value?.length??xh(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function LR(n){if(!n)return yC;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Mh(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function yC(n){return null}function vC(n){return n!=null}function _C(n){return qi(n)?An(n):n}function EC(n){let e={};return n.forEach(t=>{e=t!=null?U(U({},e),t):e}),Object.keys(e).length===0?null:e}function CC(n,e){return e.map(t=>t(n))}function VR(n){return!n.validate}function DC(n){return n.map(e=>VR(e)?e:t=>e.validate(t))}function SC(n){if(!n)return null;let e=n.filter(vC);return e.length==0?null:function(t){return EC(CC(t,e))}}function wC(n){return n!=null?SC(DC(n)):null}function TC(n){if(!n)return null;let e=n.filter(vC);return e.length==0?null:function(t){let r=CC(t,e).map(_C);return md(r).pipe(Ie(EC))}}function IC(n){return n!=null?TC(DC(n)):null}function aC(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function bC(n){return n._rawValidators}function AC(n){return n._rawAsyncValidators}function Sh(n){return n?Array.isArray(n)?n:[n]:[]}function Tc(n,e){return Array.isArray(n)?n.includes(e):n===e}function lC(n,e){let t=Sh(e);return Sh(n).forEach(i=>{Tc(t,i)||t.push(i)}),t}function cC(n,e){return Sh(e).filter(t=>!Tc(n,t))}var Ic=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=wC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=IC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},ti=class extends Ic{name;get formDirective(){return null}get path(){return null}},ni=class extends Ic{_parent=null;name=null;valueAccessor=null},bc=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var ao=(()=>{class n extends bc{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(re(ni,2))};static \u0275dir=we({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Be("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Qe]})}return n})(),MC=(()=>{class n extends bc{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(re(ti,10))};static \u0275dir=we({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Be("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Qe]})}return n})();var Ms="VALID",wc="INVALID",io="PENDING",xs="DISABLED",lr=class{},Ac=class extends lr{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Rs=class extends lr{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Ns=class extends lr{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},oo=class extends lr{status;source;constructor(e,t){super(),this.status=e,this.source=t}},wh=class extends lr{source;constructor(e){super(),this.source=e}},Ps=class extends lr{source;constructor(e){super(),this.source=e}};function kh(n){return(Nc(n)?n.validators:n)||null}function BR(n){return Array.isArray(n)?wC(n):n||null}function Ph(n,e){return(Nc(e)?e.asyncValidators:n)||null}function UR(n){return Array.isArray(n)?IC(n):n||null}function Nc(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function xC(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new M(1e3,"");if(!r[t])throw new M(1001,"")}function RC(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new M(1002,"")})}var so=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return At(this.statusReactive)}set status(e){At(()=>this.statusReactive.set(e))}_status=qe(()=>this.statusReactive());statusReactive=G(void 0);get valid(){return this.status===Ms}get invalid(){return this.status===wc}get pending(){return this.status==io}get disabled(){return this.status===xs}get enabled(){return this.status!==xs}errors;get pristine(){return At(this.pristineReactive)}set pristine(e){At(()=>this.pristineReactive.set(e))}_pristine=qe(()=>this.pristineReactive());pristineReactive=G(!0);get dirty(){return!this.pristine}get touched(){return At(this.touchedReactive)}set touched(e){At(()=>this.touchedReactive.set(e))}_touched=qe(()=>this.touchedReactive());touchedReactive=G(!1);get untouched(){return!this.touched}_events=new se;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(lC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(lC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(cC(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(cC(e,this._rawAsyncValidators))}hasValidator(e){return Tc(this._rawValidators,e)}hasAsyncValidator(e){return Tc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(oe(U({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ns(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ns(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(oe(U({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Rs(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Rs(!0,r))}markAsPending(e={}){this.status=io;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new oo(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(oe(U({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=xs,this.errors=null,this._forEachChild(i=>{i.disable(oe(U({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ac(this.value,r)),this._events.next(new oo(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(oe(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ms,this._forEachChild(r=>{r.enable(oe(U({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(oe(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ms||this.status===io)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ac(this.value,t)),this._events.next(new oo(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(oe(U({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xs:Ms}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=io,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=_C(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new oo(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new ve,this.statusChanges=new ve}_calculateStatus(){return this._allControlsDisabled()?xs:this.errors?wc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(io)?io:this._anyControlsHaveStatus(wc)?wc:Ms}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Rs(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ns(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Nc(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=BR(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=UR(this._rawAsyncValidators)}},Mc=class extends so{constructor(e,t,r){super(kh(t),Ph(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){RC(this,!0,e),Object.keys(e).forEach(r=>{xC(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,oe(U({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Ps(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Th=class extends Mc{};var kc=new F("",{factory:()=>Pc}),Pc="always";function NC(n,e){return[...e.path,n]}function Ih(n,e,t=Pc){Fh(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),$R(n,e),qR(n,e),GR(n,e),HR(n,e)}function uC(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Rc(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function xc(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function HR(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Fh(n,e){let t=bC(n);e.validator!==null?n.setValidators(aC(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=AC(n);e.asyncValidator!==null?n.setAsyncValidators(aC(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();xc(e._rawValidators,i),xc(e._rawAsyncValidators,i)}function Rc(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=bC(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=AC(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return xc(e._rawValidators,r),xc(e._rawAsyncValidators,r),t}function $R(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&kC(n,e)})}function GR(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&kC(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function kC(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function qR(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function zR(n,e){n==null,Fh(n,e)}function WR(n,e){return Rc(n,e)}function PC(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function jR(n){return Object.getPrototypeOf(n.constructor)===Fs}function KR(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function FC(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===cr?t=o:jR(o)?r=o:i=o}),i||r||t||null}function JR(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function dC(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function fC(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var ks=class extends so{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(kh(t),Ph(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Nc(t)&&(t.nonNullable||t.initialValueIsDefault)&&(fC(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Ps(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){dC(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){dC(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){fC(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var YR=n=>n instanceof ks;var ZR={provide:ni,useExisting:gt(()=>Os)},pC=Promise.resolve(),Os=(()=>{class n extends ni{_changeDetectorRef;callSetDisabledState;control=new ks;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ve;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=FC(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),PC(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Ih(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){pC.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Sn(r);pC.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?NC(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(re(ti,9),re(Rh,10),re(Nh,10),re(ri,10),re(ir,8),re(kc,8))};static \u0275dir=we({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[dt([ZR]),Qe,Pn]})}return n})();var OC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=we({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),QR={provide:ri,useExisting:gt(()=>Oh),multi:!0},Oh=(()=>{class n extends Fs{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=rr(n)))(i||n)}})();static \u0275dir=we({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&P("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[dt([QR]),Qe]})}return n})();var bh=class extends so{constructor(e,t,r){super(kh(t),Ph(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){RC(this,!1,e),e.forEach((r,i)=>{xC(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],oe(U({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Ps(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};var XR=(()=>{class n extends ti{callSetDisabledState;get submitted(){return At(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=qe(()=>this._submittedReactive());_submittedReactive=G(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this.onChanges(t)}ngOnDestroy(){this.onDestroy()}onChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(Rc(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(t){let r=this.form.get(t.path);return Ih(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){uC(t.control||null,t,!1),JR(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}getFormArray(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}updateModel(t,r){this.form.get(t.path).setValue(r)}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}onSubmit(t){return this.submitted=!0,KR(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new wh(this.control)),t?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(uC(r||null,t),YR(i)&&(Ih(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);zR(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&WR(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Fh(this.form,this),this._oldForm&&Rc(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||n)(re(Rh,10),re(Nh,10),re(kc,8))};static \u0275dir=we({type:n,features:[Qe,Pn]})}return n})();var LC=new F("");var eN={provide:ni,useExisting:gt(()=>Lh)},Lh=(()=>{class n extends ni{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new ve;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=FC(this,o)}ngOnChanges(t){this._added||this._setUpControl(),PC(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return NC(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(re(ti,13),re(Rh,10),re(Nh,10),re(ri,10),re(LC,8))};static \u0275dir=we({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[dt([eN]),Qe,Pn]})}return n})();var tN={provide:ti,useExisting:gt(()=>Vh)},Vh=(()=>{class n extends XR{form=null;ngSubmit=new ve;get control(){return this.form}static \u0275fac=(()=>{let t;return function(i){return(t||(t=rr(n)))(i||n)}})();static \u0275dir=we({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&P("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[dt([tN]),Qe]})}return n})(),nN={provide:ri,useExisting:gt(()=>Fc),multi:!0};function VC(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function rN(n){return n.split(":")[0]}var Fc=(()=>{class n extends Fs{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=S(Ln).injector;destroyRef=S(Lt);cdr=S(ir);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,$i({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=VC(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=rN(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=rr(n)))(i||n)}})();static \u0275dir=we({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&P("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[dt([nN]),Qe]})}return n})(),BC=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(VC(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(re(ct),re(Qt),re(Fc,9))};static \u0275dir=we({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),iN={provide:ri,useExisting:gt(()=>UC),multi:!0};function hC(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function oN(n){return n.split(":")[0]}var UC=(()=>{class n extends Fs{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],u=this._getOptionValue(l.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let u=this._getOptionValue(l.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=oN(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=rr(n)))(i||n)}})();static \u0275dir=we({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&P("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[dt([iN]),Qe]})}return n})(),HC=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(hC(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(hC(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(re(ct),re(Qt),re(UC,9))};static \u0275dir=we({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var $C=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=vt({type:n});static \u0275inj=ot({})}return n})();function gC(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var GC=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return gC(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Mc(i,o)}record(t,r=null){let i=this._reduceControls(t);return new Th(i,r)}control(t,r,i){let o={};return this.useNonNullable?(gC(r)?o=r:(o.validators=r,o.asyncValidators=i),new ks(t,oe(U({},o),{nonNullable:!0}))):new ks(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new bh(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof ks)return t;if(t instanceof so)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Oc=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:kc,useValue:t.callSetDisabledState??Pc}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=vt({type:n});static \u0275inj=ot({imports:[$C]})}return n})(),qC=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:LC,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:kc,useValue:t.callSetDisabledState??Pc}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=vt({type:n});static \u0275inj=ot({imports:[$C]})}return n})();var In=class n{constructor(){this.STORAGE_KEY="azure_config";this.configSignal=G(this.loadConfig());this.config=this.configSignal.asReadonly();this.isDemoMode=qe(()=>this.configSignal().isDemoMode)}loadConfig(){let e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):{organization:"",project:"",pat:"",devEmail:"",isDemoMode:!1}}saveConfig(e){console.log("Saving config:",e),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e)),this.configSignal.set(U({},e))}getAuthorizationHeader(){let e=this.configSignal();return"Basic "+btoa(":"+e.pat)}getBaseUrl(){let e=this.configSignal(),t=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit`;return console.log("Base URL requested:",t),t}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}};var lo=new F("IWorkItemRepository");var Lc=class n{constructor(){this.repository=S(lo);this.configService=S(In)}execute(){let e=this.configService.config().devEmail;return this.repository.searchByDevEmail(e)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}};var Vc=class n{constructor(){this.repository=S(lo)}execute(e,t=!1){return this.repository.getById(e,t)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}};var ur=class n{constructor(){this.http=S(Zi);this.azureConfig=S(In);this.config=this.azureConfig.config}saveConfig(e){this.azureConfig.saveConfig(e)}getHeaders(){let e=this.azureConfig.getAuthorizationHeader();return new Bt({"Content-Type":"application/json",Authorization:e})}getBaseUrl(){return this.azureConfig.getBaseUrl()}searchUserStories(){if(this.config().isDemoMode)return Ee(this.getMockStories());let t=`SELECT [System.Id], [System.Title], [System.State] FROM WorkItems WHERE [System.WorkItemType] = 'User Story' AND [Custom.Dev] = '${this.config().devEmail}' ORDER BY [System.ChangedDate] DESC TOP 20`;return this.http.post(`${this.getBaseUrl()}/wiql?api-version=7.0`,{query:t},{headers:this.getHeaders()}).pipe(Ie(r=>r.workItems.map(i=>i.id)),zt(r=>(console.error("WIQL Error",r),Ee([]))))}fetchStories(){if(this.config().isDemoMode)return Ee(this.getMockStories());let t=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = 'User Story' AND [Custom.Dev] = '${this.config().devEmail}' ORDER BY [System.ChangedDate] DESC TOP 20`,r=`${this.getBaseUrl()}/wiql?api-version=7.0`;return this.http.post(r,{query:t},{headers:this.getHeaders()}).pipe(Ie(i=>i.workItems.map(s=>s.id)),zt(()=>Ee([])))}getWorkItemsByIds(e){if(e.length===0)return Ee([]);if(this.config().isDemoMode)return Ee([]);let t=`${this.getBaseUrl()}/workitems?ids=${e.join(",")}&$expand=all&api-version=7.0`;return this.http.get(t,{headers:this.getHeaders()}).pipe(Ie(r=>r.value),zt(r=>(console.error("WorkItem Details Error",r),Ee([]))))}getWorkItem(e,t=!1){if(this.config().isDemoMode)return Ee(this.getMockStories().find(o=>o.id===e)||this.getMockStories()[0]);let r=`${this.getBaseUrl()}/workitems/${e}?$expand=all&api-version=7.0`,i=this.getHeaders();return t&&(i=i.set("x-force-refresh","true")),this.http.get(r,{headers:i}).pipe(zt(o=>{throw console.error(`WorkItem ${e} Error`,o),o}))}updateWorkItem(e,t){if(this.config().isDemoMode){let o=this.getMockStories().find(s=>s.id===e);return o?(t.forEach(s=>{let a=s.path.replace("/fields/","");o.fields[a]=s.value}),Ee(o)):Ee(this.getMockStories()[0])}let r=`${this.getBaseUrl()}/workitems/${e}?api-version=7.0`,i=this.getHeaders().set("Content-Type","application/json-patch+json");return this.http.patch(r,t,{headers:i}).pipe(zt(o=>{throw console.error(`Update WorkItem ${e} Error`,o),o}))}getMockStories(){return[{id:101,rev:1,fields:{"System.Title":"Integrar API do Google Gemini","System.WorkItemType":"User Story","System.State":"Ativo","System.Description":"<div>Como desenvolvedor, eu quero integrar a API do Gemini para que eu possa gerar respostas de IA.</div>","Microsoft.VSTS.Common.AcceptanceCriteria":"<div>- Chave da API est\xE1 segura<br>- Resposta \xE9 processada corretamente</div>"},relations:[]},{id:102,rev:1,fields:{"System.Title":"Design da UI do Dashboard","System.WorkItemType":"User Story","System.State":"Novo","System.Description":"<div>Como usu\xE1rio, eu quero um dashboard limpo para visualizar meus itens de trabalho.</div>"}},{id:103,rev:1,fields:{"System.Title":"Implementar Autentica\xE7\xE3o","System.WorkItemType":"User Story","System.State":"Resolvido","System.Description":"<div>Proteger o app com OAuth2.</div>"}}]}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}};var sN=[[["","header-icon",""]],"*",[["","footer",""]]],aN=["[header-icon]","*","[footer]"];function lN(n,e){n&1&&(v(0,"div",9),Wi(1,2),C())}var co=class n{constructor(){this.title=_t.required();this.maxWidth=_t("max-w-2xl");this.headerClass=_t("");this.titleClass=_t("");this.bodyClass=_t("p-8");this.hasFooter=_t(!0);this.fullHeight=_t(!1);this.close=ji()}onEsc(){this.close.emit()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=yt({type:n,selectors:[["app-modal"]],hostBindings:function(t,r){t&1&&P("keydown.escape",function(){return r.onEsc()},ss)},inputs:{title:[1,"title"],maxWidth:[1,"maxWidth"],headerClass:[1,"headerClass"],titleClass:[1,"titleClass"],bodyClass:[1,"bodyClass"],hasFooter:[1,"hasFooter"],fullHeight:[1,"fullHeight"]},outputs:{close:"close"},ngContentSelectors:aN,decls:12,vars:9,consts:[[1,"fixed","inset-0","bg-slate-900/60","backdrop-blur-sm","z-[100]","flex","items-center","justify-center","p-4",3,"click"],[3,"click"],[1,"p-6","border-b","border-gray-100","dark:border-slate-700","flex","justify-between","items-center",3,"ngClass"],[1,"text-lg","font-bold","flex","items-center","gap-2",3,"ngClass"],[1,"text-gray-400","hover:text-gray-600","dark:hover:text-gray-200","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex-1","overflow-y-auto",3,"ngClass"],["class","p-6 bg-slate-50 dark:bg-slate-900/40 border-t border-gray-100 dark:border-slate-700",4,"ngIf"],[1,"p-6","bg-slate-50","dark:bg-slate-900/40","border-t","border-gray-100","dark:border-slate-700"]],template:function(t,r){t&1&&(Hl(sN),v(0,"div",0),P("click",function(){return r.close.emit()}),v(1,"div",1),P("click",function(o){return o.stopPropagation()}),v(2,"div",2)(3,"h2",3),Wi(4),T(5),C(),v(6,"button",4),P("click",function(){return r.close.emit()}),ae(),v(7,"svg",5),q(8,"path",6),C()()(),Ae(),v(9,"div",7),Wi(10,1),C(),Ul(11,lN,2,0,"div",8),C()()),t&2&&(J("@backdropAnim",void 0),D(),tt("bg-white dark:bg-slate-800 rounded-xl shadow-2xl overflow-hidden flex flex-col "+r.maxWidth()+(r.fullHeight()?" h-full max-h-[calc(100vh-2rem)]":"")),J("@modalAnim",void 0),D(),J("ngClass",r.headerClass()),D(),J("ngClass",r.titleClass()),D(2),ie(" ",r.title()," "),D(4),J("ngClass",r.bodyClass()),D(2),J("ngIf",r.hasFooter()))},dependencies:[Vt,Mp,xp],encapsulation:2,data:{animation:[Qi("modalAnim",[sr(":enter",[Et({opacity:0,transform:"translateY(20px) scale(0.95)"}),or("250ms ease-out",Et({opacity:1,transform:"translateY(0) scale(1)"}))]),sr(":leave",[or("200ms ease-in",Et({opacity:0,transform:"translateY(10px) scale(0.98)"}))])]),Qi("backdropAnim",[sr(":enter",[Et({opacity:0}),or("200ms ease-out",Et({opacity:1}))]),sr(":leave",[or("200ms ease-in",Et({opacity:0}))])])]}})}};function cN(n,e){n&1&&(v(0,"div")(1,"label",13),T(2,"Organiza\xE7\xE3o"),C(),q(3,"input",14),C(),v(4,"div")(5,"label",13),T(6,"Projeto"),C(),q(7,"input",15),C(),v(8,"div")(9,"label",13),T(10,"Token de Acesso Pessoal (PAT)"),C(),q(11,"input",16),v(12,"p",17),T(13,"Requer permiss\xE3o 'Work Items (Read)'."),C()(),v(14,"div")(15,"label",13),T(16,"Email/Nome do Desenvolvedor (Custom.Dev)"),C(),q(17,"input",18),C())}var Bc=class n{constructor(){this.azure=S(ur);this.fb=S(GC);this.close=ji();this.form=this.fb.group({organization:["",ei.required],project:["",ei.required],pat:["",ei.required],devEmail:["",ei.required],isDemoMode:[!1]});let e=this.azure.config();this.form.patchValue(e),this.form.controls.isDemoMode.valueChanges.subscribe(t=>{t?(this.form.controls.organization.disable(),this.form.controls.project.disable(),this.form.controls.pat.disable(),this.form.controls.devEmail.disable()):(this.form.controls.organization.enable(),this.form.controls.project.enable(),this.form.controls.pat.enable(),this.form.controls.devEmail.enable())}),e.isDemoMode&&(this.form.controls.organization.disable(),this.form.controls.project.disable(),this.form.controls.pat.disable(),this.form.controls.devEmail.disable())}save(){this.form.value.isDemoMode?this.azure.saveConfig({isDemoMode:!0,organization:"",project:"",pat:"",devEmail:""}):this.form.valid&&this.azure.saveConfig({isDemoMode:!1,organization:this.form.value.organization,project:this.form.value.project,pat:this.form.value.pat,devEmail:this.form.value.devEmail}),this.close.emit()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=yt({type:n,selectors:[["app-settings"]],outputs:{close:"close"},decls:18,vars:3,consts:[["title","Configurar Conex\xE3o","maxWidth","max-w-md","headerClass","bg-slate-800 text-white dark:bg-black","titleClass","text-xl font-bold","bodyClass","p-0",3,"close"],["header-icon","","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543 .826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"px-6","pt-2","pb-0"],[1,"text-slate-400","text-sm"],[1,"p-6","space-y-4",3,"ngSubmit","formGroup"],[1,"flex","items-center","gap-2","mb-4"],["type","checkbox","id","demo","formControlName","isDemoMode",1,"w-4","h-4","text-blue-600","rounded"],["for","demo",1,"text-sm","font-medium","text-gray-700","dark:text-slate-300"],["footer","",1,"flex","justify-end"],["type","button",1,"mr-3","px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","dark:bg-slate-700","dark:text-slate-200","dark:border-slate-600","dark:hover:bg-slate-600",3,"click"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-white","bg-blue-600","rounded-md","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[1,"block","text-sm","font-medium","text-gray-700","mb-1","dark:text-slate-300"],["type","text","formControlName","organization","placeholder","minha-org",1,"w-full","rounded-md","border-gray-300","shadow-sm","border","p-2","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","dark:bg-slate-700","dark:border-slate-600","dark:text-slate-100"],["type","text","formControlName","project","placeholder","meu-projeto",1,"w-full","rounded-md","border-gray-300","shadow-sm","border","p-2","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","dark:bg-slate-700","dark:border-slate-600","dark:text-slate-100"],["type","password","formControlName","pat","placeholder","Azure DevOps PAT",1,"w-full","rounded-md","border-gray-300","shadow-sm","border","p-2","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","dark:bg-slate-700","dark:border-slate-600","dark:text-slate-100"],[1,"text-xs","text-gray-500","mt-1","dark:text-slate-400"],["type","text","formControlName","devEmail","placeholder","usuario@empresa.com",1,"w-full","rounded-md","border-gray-300","shadow-sm","border","p-2","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","dark:bg-slate-700","dark:border-slate-600","dark:text-slate-100"]],template:function(t,r){t&1&&(v(0,"app-modal",0),P("close",function(){return r.close.emit()}),ae(),v(1,"svg",1),q(2,"path",2)(3,"path",3),C(),Ae(),v(4,"div",4)(5,"p",5),T(6,"Conecte-se ao Azure DevOps ou use o Modo Demo."),C()(),v(7,"form",6),P("ngSubmit",function(){return r.save()}),v(8,"div",7),q(9,"input",8),v(10,"label",9),T(11,"Usar Modo Demo (Dados Fict\xEDcios)"),C()(),ge(12,cN,18,0),v(13,"div",10)(14,"button",11),P("click",function(){return r.close.emit()}),T(15," Cancelar "),C(),v(16,"button",12),T(17," Salvar e Conectar "),C()()()()),t&2&&(D(7),J("formGroup",r.form),D(5),me(r.form.value.isDemoMode?-1:12),D(4),J("disabled",r.form.invalid&&!r.form.value.isDemoMode))},dependencies:[Vt,qC,OC,cr,Ah,ao,MC,Vh,Lh,co],encapsulation:2})}};function Gh(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var oi=Gh();function ZC(n){oi=n}var Us={exec:()=>null};function fe(n,e=""){let t=typeof n=="string"?n:n.source,r={replace:(i,o)=>{let s=typeof o=="string"?o:o.source;return s=s.replace(ft.caret,"$1"),t=t.replace(i,s),r},getRegex:()=>new RegExp(t,e)};return r}var uN=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),ft={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},dN=/^(?:[ \t]*(?:\n|$))+/,fN=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,pN=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Hs=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,hN=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,qh=/(?:[*+-]|\d{1,9}[.)])/,QC=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,XC=fe(QC).replace(/bull/g,qh).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),gN=fe(QC).replace(/bull/g,qh).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),zh=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,mN=/^[^\n]+/,Wh=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,yN=fe(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Wh).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),vN=fe(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,qh).getRegex(),qc="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",jh=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,_N=fe("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",jh).replace("tag",qc).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),eD=fe(zh).replace("hr",Hs).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",qc).getRegex(),EN=fe(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",eD).getRegex(),Kh={blockquote:EN,code:fN,def:yN,fences:pN,heading:hN,hr:Hs,html:_N,lheading:XC,list:vN,newline:dN,paragraph:eD,table:Us,text:mN},zC=fe("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Hs).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",qc).getRegex(),CN=oe(U({},Kh),{lheading:gN,table:zC,paragraph:fe(zh).replace("hr",Hs).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",zC).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",qc).getRegex()}),DN=oe(U({},Kh),{html:fe(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",jh).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Us,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:fe(zh).replace("hr",Hs).replace("heading",` *#{1,6} *[^
]`).replace("lheading",XC).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),SN=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,wN=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,tD=/^( {2,}|\\)\n(?!\s*$)/,TN=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,zc=/[\p{P}\p{S}]/u,Jh=/[\s\p{P}\p{S}]/u,nD=/[^\s\p{P}\p{S}]/u,IN=fe(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Jh).getRegex(),rD=/(?!~)[\p{P}\p{S}]/u,bN=/(?!~)[\s\p{P}\p{S}]/u,AN=/(?:[^\s\p{P}\p{S}]|~)/u,MN=fe(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",uN?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),iD=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,xN=fe(iD,"u").replace(/punct/g,zc).getRegex(),RN=fe(iD,"u").replace(/punct/g,rD).getRegex(),oD="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",NN=fe(oD,"gu").replace(/notPunctSpace/g,nD).replace(/punctSpace/g,Jh).replace(/punct/g,zc).getRegex(),kN=fe(oD,"gu").replace(/notPunctSpace/g,AN).replace(/punctSpace/g,bN).replace(/punct/g,rD).getRegex(),PN=fe("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,nD).replace(/punctSpace/g,Jh).replace(/punct/g,zc).getRegex(),FN=fe(/\\(punct)/,"gu").replace(/punct/g,zc).getRegex(),ON=fe(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),LN=fe(jh).replace("(?:-->|$)","-->").getRegex(),VN=fe("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",LN).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Hc=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,BN=fe(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Hc).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),sD=fe(/^!?\[(label)\]\[(ref)\]/).replace("label",Hc).replace("ref",Wh).getRegex(),aD=fe(/^!?\[(ref)\](?:\[\])?/).replace("ref",Wh).getRegex(),UN=fe("reflink|nolink(?!\\()","g").replace("reflink",sD).replace("nolink",aD).getRegex(),WC=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Yh={_backpedal:Us,anyPunctuation:FN,autolink:ON,blockSkip:MN,br:tD,code:wN,del:Us,emStrongLDelim:xN,emStrongRDelimAst:NN,emStrongRDelimUnd:PN,escape:SN,link:BN,nolink:aD,punctuation:IN,reflink:sD,reflinkSearch:UN,tag:VN,text:TN,url:Us},HN=oe(U({},Yh),{link:fe(/^!?\[(label)\]\((.*?)\)/).replace("label",Hc).getRegex(),reflink:fe(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Hc).getRegex()}),Uh=oe(U({},Yh),{emStrongRDelimAst:kN,emStrongLDelim:RN,url:fe(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",WC).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:fe(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",WC).getRegex()}),$N=oe(U({},Uh),{br:fe(tD).replace("{2,}","*").getRegex(),text:fe(Uh.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),Uc={normal:Kh,gfm:CN,pedantic:DN},Ls={normal:Yh,gfm:Uh,breaks:$N,pedantic:HN},GN={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},jC=n=>GN[n];function $n(n,e){if(e){if(ft.escapeTest.test(n))return n.replace(ft.escapeReplace,jC)}else if(ft.escapeTestNoEncode.test(n))return n.replace(ft.escapeReplaceNoEncode,jC);return n}function KC(n){try{n=encodeURI(n).replace(ft.percentDecode,"%")}catch{return null}return n}function JC(n,e){let t=n.replace(ft.findPipe,(o,s,a)=>{let l=!1,u=s;for(;--u>=0&&a[u]==="\\";)l=!l;return l?"|":" |"}),r=t.split(ft.splitPipe),i=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(ft.slashPipe,"|");return r}function Vs(n,e,t){let r=n.length;if(r===0)return"";let i=0;for(;i<r;){let o=n.charAt(r-i-1);if(o===e&&!t)i++;else if(o!==e&&t)i++;else break}return n.slice(0,r-i)}function qN(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])t++;else if(n[r]===e[1]&&(t--,t<0))return r;return t>0?-2:-1}function YC(n,e,t,r,i){let o=e.href,s=e.title||null,a=n[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;let l={type:n[0].charAt(0)==="!"?"image":"link",raw:t,href:o,title:s,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}function zN(n,e,t){let r=n.match(t.other.indentCodeCompensation);if(r===null)return e;let i=r[1];return e.split(`
`).map(o=>{let s=o.match(t.other.beginningSpace);if(s===null)return o;let[a]=s;return a.length>=i.length?o.slice(i.length):o}).join(`
`)}var $c=class{options;rules;lexer;constructor(n){this.options=n||oi}space(n){let e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){let e=this.rules.block.code.exec(n);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:Vs(t,`
`)}}}fences(n){let e=this.rules.block.fences.exec(n);if(e){let t=e[0],r=zN(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(n){let e=this.rules.block.heading.exec(n);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let r=Vs(t,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(t=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(n){let e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:Vs(e[0],`
`)}}blockquote(n){let e=this.rules.block.blockquote.exec(n);if(e){let t=Vs(e[0],`
`).split(`
`),r="",i="",o=[];for(;t.length>0;){let s=!1,a=[],l;for(l=0;l<t.length;l++)if(this.rules.other.blockquoteStart.test(t[l]))a.push(t[l]),s=!0;else if(!s)a.push(t[l]);else break;t=t.slice(l);let u=a.join(`
`),f=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${u}`:u,i=i?`${i}
${f}`:f;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(f,o,!0),this.lexer.state.top=p,t.length===0)break;let h=o.at(-1);if(h?.type==="code")break;if(h?.type==="blockquote"){let g=h,m=g.raw+`
`+t.join(`
`),y=this.blockquote(m);o[o.length-1]=y,r=r.substring(0,r.length-g.raw.length)+y.raw,i=i.substring(0,i.length-g.text.length)+y.text;break}else if(h?.type==="list"){let g=h,m=g.raw+`
`+t.join(`
`),y=this.list(m);o[o.length-1]=y,r=r.substring(0,r.length-h.raw.length)+y.raw,i=i.substring(0,i.length-g.raw.length)+y.raw,t=m.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:o,text:i}}}list(n){let e=this.rules.block.list.exec(n);if(e){let t=e[1].trim(),r=t.length>1,i={type:"list",raw:"",ordered:r,start:r?+t.slice(0,-1):"",loose:!1,items:[]};t=r?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=r?t:"[*+-]");let o=this.rules.other.listItemRegex(t),s=!1;for(;n;){let l=!1,u="",f="";if(!(e=o.exec(n))||this.rules.block.hr.test(n))break;u=e[0],n=n.substring(u.length);let p=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,y=>" ".repeat(3*y.length)),h=n.split(`
`,1)[0],g=!p.trim(),m=0;if(this.options.pedantic?(m=2,f=p.trimStart()):g?m=e[1].length+1:(m=e[2].search(this.rules.other.nonSpaceChar),m=m>4?1:m,f=p.slice(m),m+=e[1].length),g&&this.rules.other.blankLine.test(h)&&(u+=h+`
`,n=n.substring(h.length+1),l=!0),!l){let y=this.rules.other.nextBulletRegex(m),_=this.rules.other.hrRegex(m),E=this.rules.other.fencesBeginRegex(m),I=this.rules.other.headingBeginRegex(m),A=this.rules.other.htmlBeginRegex(m);for(;n;){let b=n.split(`
`,1)[0],w;if(h=b,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),w=h):w=h.replace(this.rules.other.tabCharGlobal,"    "),E.test(h)||I.test(h)||A.test(h)||y.test(h)||_.test(h))break;if(w.search(this.rules.other.nonSpaceChar)>=m||!h.trim())f+=`
`+w.slice(m);else{if(g||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||E.test(p)||I.test(p)||_.test(p))break;f+=`
`+h}!g&&!h.trim()&&(g=!0),u+=b+`
`,n=n.substring(b.length+1),p=w.slice(m)}}i.loose||(s?i.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(s=!0)),i.items.push({type:"list_item",raw:u,task:!!this.options.gfm&&this.rules.other.listIsTask.test(f),loose:!1,text:f,tokens:[]}),i.raw+=u}let a=i.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let l of i.items){if(this.lexer.state.top=!1,l.tokens=this.lexer.blockTokens(l.text,[]),l.task){if(l.text=l.text.replace(this.rules.other.listReplaceTask,""),l.tokens[0]?.type==="text"||l.tokens[0]?.type==="paragraph"){l.tokens[0].raw=l.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),l.tokens[0].text=l.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let f=this.lexer.inlineQueue.length-1;f>=0;f--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[f].src)){this.lexer.inlineQueue[f].src=this.lexer.inlineQueue[f].src.replace(this.rules.other.listReplaceTask,"");break}}let u=this.rules.other.listTaskCheckbox.exec(l.raw);if(u){let f={type:"checkbox",raw:u[0]+" ",checked:u[0]!=="[ ]"};l.checked=f.checked,i.loose?l.tokens[0]&&["paragraph","text"].includes(l.tokens[0].type)&&"tokens"in l.tokens[0]&&l.tokens[0].tokens?(l.tokens[0].raw=f.raw+l.tokens[0].raw,l.tokens[0].text=f.raw+l.tokens[0].text,l.tokens[0].tokens.unshift(f)):l.tokens.unshift({type:"paragraph",raw:f.raw,text:f.raw,tokens:[f]}):l.tokens.unshift(f)}}if(!i.loose){let u=l.tokens.filter(p=>p.type==="space"),f=u.length>0&&u.some(p=>this.rules.other.anyLine.test(p.raw));i.loose=f}}if(i.loose)for(let l of i.items){l.loose=!0;for(let u of l.tokens)u.type==="text"&&(u.type="paragraph")}return i}}html(n){let e=this.rules.block.html.exec(n);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(n){let e=this.rules.block.def.exec(n);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:r,title:i}}}table(n){let e=this.rules.block.table.exec(n);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let t=JC(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===r.length){for(let s of r)this.rules.other.tableAlignRight.test(s)?o.align.push("right"):this.rules.other.tableAlignCenter.test(s)?o.align.push("center"):this.rules.other.tableAlignLeft.test(s)?o.align.push("left"):o.align.push(null);for(let s=0;s<t.length;s++)o.header.push({text:t[s],tokens:this.lexer.inline(t[s]),header:!0,align:o.align[s]});for(let s of i)o.rows.push(JC(s,o.header.length).map((a,l)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:o.align[l]})));return o}}lheading(n){let e=this.rules.block.lheading.exec(n);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(n){let e=this.rules.block.paragraph.exec(n);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(n){let e=this.rules.block.text.exec(n);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(n){let e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(n){let e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(n){let e=this.rules.inline.link.exec(n);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let o=Vs(t.slice(0,-1),"\\");if((t.length-o.length)%2===0)return}else{let o=qN(e[2],"()");if(o===-2)return;if(o>-1){let s=(e[0].indexOf("!")===0?5:4)+e[1].length+o;e[2]=e[2].substring(0,o),e[0]=e[0].substring(0,s).trim(),e[3]=""}}let r=e[2],i="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(r);o&&(r=o[1],i=o[3])}else i=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?r=r.slice(1):r=r.slice(1,-1)),YC(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(n,e){let t;if((t=this.rules.inline.reflink.exec(n))||(t=this.rules.inline.nolink.exec(n))){let r=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=e[r.toLowerCase()];if(!i){let o=t[0].charAt(0);return{type:"text",raw:o,text:o}}return YC(t,i,t[0],this.lexer,this.rules)}}emStrong(n,e,t=""){let r=this.rules.inline.emStrongLDelim.exec(n);if(!(!r||r[3]&&t.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!t||this.rules.inline.punctuation.exec(t))){let i=[...r[0]].length-1,o,s,a=i,l=0,u=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,e=e.slice(-1*n.length+i);(r=u.exec(e))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(s=[...o].length,r[3]||r[4]){a+=s;continue}else if((r[5]||r[6])&&i%3&&!((i+s)%3)){l+=s;continue}if(a-=s,a>0)continue;s=Math.min(s,s+a+l);let f=[...r[0]][0].length,p=n.slice(0,i+r.index+f+s);if(Math.min(i,s)%2){let g=p.slice(1,-1);return{type:"em",raw:p,text:g,tokens:this.lexer.inlineTokens(g)}}let h=p.slice(2,-2);return{type:"strong",raw:p,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(n){let e=this.rules.inline.code.exec(n);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(t),i=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return r&&i&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(n){let e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){let e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(n){let e=this.rules.inline.autolink.exec(n);if(e){let t,r;return e[2]==="@"?(t=e[1],r="mailto:"+t):(t=e[1],r=t),{type:"link",raw:e[0],text:t,href:r,tokens:[{type:"text",raw:t,text:t}]}}}url(n){let e;if(e=this.rules.inline.url.exec(n)){let t,r;if(e[2]==="@")t=e[0],r="mailto:"+t;else{let i;do i=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(i!==e[0]);t=e[0],e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:t,href:r,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(n){let e=this.rules.inline.text.exec(n);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},nn=class Hh{tokens;options;state;inlineQueue;tokenizer;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||oi,this.options.tokenizer=this.options.tokenizer||new $c,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:ft,block:Uc.normal,inline:Ls.normal};this.options.pedantic?(t.block=Uc.pedantic,t.inline=Ls.pedantic):this.options.gfm&&(t.block=Uc.gfm,this.options.breaks?t.inline=Ls.breaks:t.inline=Ls.gfm),this.tokenizer.rules=t}static get rules(){return{block:Uc,inline:Ls}}static lex(e,t){return new Hh(t).lex(e)}static lexInline(e,t){return new Hh(t).inlineTokens(e)}lex(e){e=e.replace(ft.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let r=this.inlineQueue[t];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],r=!1){for(this.options.pedantic&&(e=e.replace(ft.tabCharGlobal,"    ").replace(ft.spaceLine,""));e;){let i;if(this.options.extensions?.block?.some(s=>(i=s.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))continue;if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length);let s=t.at(-1);i.raw.length===1&&s!==void 0?s.raw+=`
`:t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length);let s=t.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+i.raw,s.text+=`
`+i.text,this.inlineQueue.at(-1).src=s.text):t.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length);let s=t.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+i.raw,s.text+=`
`+i.raw,this.inlineQueue.at(-1).src=s.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title},t.push(i));continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}let o=e;if(this.options.extensions?.startBlock){let s=1/0,a=e.slice(1),l;this.options.extensions.startBlock.forEach(u=>{l=u.call({lexer:this},a),typeof l=="number"&&l>=0&&(s=Math.min(s,l))}),s<1/0&&s>=0&&(o=e.substring(0,s+1))}if(this.state.top&&(i=this.tokenizer.paragraph(o))){let s=t.at(-1);r&&s?.type==="paragraph"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):t.push(i),r=o.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length);let s=t.at(-1);s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):t.push(i);continue}if(e){let s="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r=e,i=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)l.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let o;for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)o=i[2]?i[2].length:0,r=r.slice(0,i.index+o)+"["+"a".repeat(i[0].length-o-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=this.options.hooks?.emStrongMask?.call({lexer:this},r)??r;let s=!1,a="";for(;e;){s||(a=""),s=!1;let l;if(this.options.extensions?.inline?.some(f=>(l=f.call({lexer:this},e,t))?(e=e.substring(l.raw.length),t.push(l),!0):!1))continue;if(l=this.tokenizer.escape(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.tag(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.link(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(l.raw.length);let f=t.at(-1);l.type==="text"&&f?.type==="text"?(f.raw+=l.raw,f.text+=l.text):t.push(l);continue}if(l=this.tokenizer.emStrong(e,r,a)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.codespan(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.br(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.del(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.autolink(e)){e=e.substring(l.raw.length),t.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(e))){e=e.substring(l.raw.length),t.push(l);continue}let u=e;if(this.options.extensions?.startInline){let f=1/0,p=e.slice(1),h;this.options.extensions.startInline.forEach(g=>{h=g.call({lexer:this},p),typeof h=="number"&&h>=0&&(f=Math.min(f,h))}),f<1/0&&f>=0&&(u=e.substring(0,f+1))}if(l=this.tokenizer.inlineText(u)){e=e.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(a=l.raw.slice(-1)),s=!0;let f=t.at(-1);f?.type==="text"?(f.raw+=l.raw,f.text+=l.text):t.push(l);continue}if(e){let f="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return t}},Gc=class{options;parser;constructor(n){this.options=n||oi}space(n){return""}code({text:n,lang:e,escaped:t}){let r=(e||"").match(ft.notSpaceStart)?.[0],i=n.replace(ft.endingNewline,"")+`
`;return r?'<pre><code class="language-'+$n(r)+'">'+(t?i:$n(i,!0))+`</code></pre>
`:"<pre><code>"+(t?i:$n(i,!0))+`</code></pre>
`}blockquote({tokens:n}){return`<blockquote>
${this.parser.parse(n)}</blockquote>
`}html({text:n}){return n}def(n){return""}heading({tokens:n,depth:e}){return`<h${e}>${this.parser.parseInline(n)}</h${e}>
`}hr(n){return`<hr>
`}list(n){let e=n.ordered,t=n.start,r="";for(let s=0;s<n.items.length;s++){let a=n.items[s];r+=this.listitem(a)}let i=e?"ol":"ul",o=e&&t!==1?' start="'+t+'"':"";return"<"+i+o+`>
`+r+"</"+i+`>
`}listitem(n){return`<li>${this.parser.parse(n.tokens)}</li>
`}checkbox({checked:n}){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>
`}table(n){let e="",t="";for(let i=0;i<n.header.length;i++)t+=this.tablecell(n.header[i]);e+=this.tablerow({text:t});let r="";for(let i=0;i<n.rows.length;i++){let o=n.rows[i];t="";for(let s=0;s<o.length;s++)t+=this.tablecell(o[s]);r+=this.tablerow({text:t})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:n}){return`<tr>
${n}</tr>
`}tablecell(n){let e=this.parser.parseInline(n.tokens),t=n.header?"th":"td";return(n.align?`<${t} align="${n.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:n}){return`<strong>${this.parser.parseInline(n)}</strong>`}em({tokens:n}){return`<em>${this.parser.parseInline(n)}</em>`}codespan({text:n}){return`<code>${$n(n,!0)}</code>`}br(n){return"<br>"}del({tokens:n}){return`<del>${this.parser.parseInline(n)}</del>`}link({href:n,title:e,tokens:t}){let r=this.parser.parseInline(t),i=KC(n);if(i===null)return r;n=i;let o='<a href="'+n+'"';return e&&(o+=' title="'+$n(e)+'"'),o+=">"+r+"</a>",o}image({href:n,title:e,text:t,tokens:r}){r&&(t=this.parser.parseInline(r,this.parser.textRenderer));let i=KC(n);if(i===null)return $n(t);n=i;let o=`<img src="${n}" alt="${t}"`;return e&&(o+=` title="${$n(e)}"`),o+=">",o}text(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):"escaped"in n&&n.escaped?n.text:$n(n.text)}},Zh=class{strong({text:n}){return n}em({text:n}){return n}codespan({text:n}){return n}del({text:n}){return n}html({text:n}){return n}text({text:n}){return n}link({text:n}){return""+n}image({text:n}){return""+n}br(){return""}checkbox({raw:n}){return n}},rn=class $h{options;renderer;textRenderer;constructor(e){this.options=e||oi,this.options.renderer=this.options.renderer||new Gc,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Zh}static parse(e,t){return new $h(t).parse(e)}static parseInline(e,t){return new $h(t).parseInline(e)}parse(e){let t="";for(let r=0;r<e.length;r++){let i=e[r];if(this.options.extensions?.renderers?.[i.type]){let s=i,a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(s.type)){t+=a||"";continue}}let o=i;switch(o.type){case"space":{t+=this.renderer.space(o);break}case"hr":{t+=this.renderer.hr(o);break}case"heading":{t+=this.renderer.heading(o);break}case"code":{t+=this.renderer.code(o);break}case"table":{t+=this.renderer.table(o);break}case"blockquote":{t+=this.renderer.blockquote(o);break}case"list":{t+=this.renderer.list(o);break}case"checkbox":{t+=this.renderer.checkbox(o);break}case"html":{t+=this.renderer.html(o);break}case"def":{t+=this.renderer.def(o);break}case"paragraph":{t+=this.renderer.paragraph(o);break}case"text":{t+=this.renderer.text(o);break}default:{let s='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return t}parseInline(e,t=this.renderer){let r="";for(let i=0;i<e.length;i++){let o=e[i];if(this.options.extensions?.renderers?.[o.type]){let a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){r+=a||"";continue}}let s=o;switch(s.type){case"escape":{r+=t.text(s);break}case"html":{r+=t.html(s);break}case"link":{r+=t.link(s);break}case"image":{r+=t.image(s);break}case"checkbox":{r+=t.checkbox(s);break}case"strong":{r+=t.strong(s);break}case"em":{r+=t.em(s);break}case"codespan":{r+=t.codespan(s);break}case"br":{r+=t.br(s);break}case"del":{r+=t.del(s);break}case"text":{r+=t.text(s);break}default:{let a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}},Bs=class{options;block;constructor(n){this.options=n||oi}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}emStrongMask(n){return n}provideLexer(){return this.block?nn.lex:nn.lexInline}provideParser(){return this.block?rn.parse:rn.parseInline}},WN=class{defaults=Gh();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=rn;Renderer=Gc;TextRenderer=Zh;Lexer=nn;Tokenizer=$c;Hooks=Bs;constructor(...n){this.use(...n)}walkTokens(n,e){let t=[];for(let r of n)switch(t=t.concat(e.call(this,r)),r.type){case"table":{let i=r;for(let o of i.header)t=t.concat(this.walkTokens(o.tokens,e));for(let o of i.rows)for(let s of o)t=t.concat(this.walkTokens(s.tokens,e));break}case"list":{let i=r;t=t.concat(this.walkTokens(i.items,e));break}default:{let i=r;this.defaults.extensions?.childTokens?.[i.type]?this.defaults.extensions.childTokens[i.type].forEach(o=>{let s=i[o].flat(1/0);t=t.concat(this.walkTokens(s,e))}):i.tokens&&(t=t.concat(this.walkTokens(i.tokens,e)))}}return t}use(...n){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(t=>{let r=U({},t);if(r.async=this.defaults.async||r.async||!1,t.extensions&&(t.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){let o=e.renderers[i.name];o?e.renderers[i.name]=function(...s){let a=i.renderer.apply(this,s);return a===!1&&(a=o.apply(this,s)),a}:e.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=e[i.level];o?o.unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),r.extensions=e),t.renderer){let i=this.defaults.renderer||new Gc(this.defaults);for(let o in t.renderer){if(!(o in i))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let s=o,a=t.renderer[s],l=i[s];i[s]=(...u)=>{let f=a.apply(i,u);return f===!1&&(f=l.apply(i,u)),f||""}}r.renderer=i}if(t.tokenizer){let i=this.defaults.tokenizer||new $c(this.defaults);for(let o in t.tokenizer){if(!(o in i))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let s=o,a=t.tokenizer[s],l=i[s];i[s]=(...u)=>{let f=a.apply(i,u);return f===!1&&(f=l.apply(i,u)),f}}r.tokenizer=i}if(t.hooks){let i=this.defaults.hooks||new Bs;for(let o in t.hooks){if(!(o in i))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let s=o,a=t.hooks[s],l=i[s];Bs.passThroughHooks.has(o)?i[s]=u=>{if(this.defaults.async&&Bs.passThroughHooksRespectAsync.has(o))return(async()=>{let p=await a.call(i,u);return l.call(i,p)})();let f=a.call(i,u);return l.call(i,f)}:i[s]=(...u)=>{if(this.defaults.async)return(async()=>{let p=await a.apply(i,u);return p===!1&&(p=await l.apply(i,u)),p})();let f=a.apply(i,u);return f===!1&&(f=l.apply(i,u)),f}}r.hooks=i}if(t.walkTokens){let i=this.defaults.walkTokens,o=t.walkTokens;r.walkTokens=function(s){let a=[];return a.push(o.call(this,s)),i&&(a=a.concat(i.call(this,s))),a}}this.defaults=U(U({},this.defaults),r)}),this}setOptions(n){return this.defaults=U(U({},this.defaults),n),this}lexer(n,e){return nn.lex(n,e??this.defaults)}parser(n,e){return rn.parse(n,e??this.defaults)}parseMarkdown(n){return(e,t)=>{let r=U({},t),i=U(U({},this.defaults),r),o=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&r.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(i.hooks&&(i.hooks.options=i,i.hooks.block=n),i.async)return(async()=>{let s=i.hooks?await i.hooks.preprocess(e):e,a=await(i.hooks?await i.hooks.provideLexer():n?nn.lex:nn.lexInline)(s,i),l=i.hooks?await i.hooks.processAllTokens(a):a;i.walkTokens&&await Promise.all(this.walkTokens(l,i.walkTokens));let u=await(i.hooks?await i.hooks.provideParser():n?rn.parse:rn.parseInline)(l,i);return i.hooks?await i.hooks.postprocess(u):u})().catch(o);try{i.hooks&&(e=i.hooks.preprocess(e));let s=(i.hooks?i.hooks.provideLexer():n?nn.lex:nn.lexInline)(e,i);i.hooks&&(s=i.hooks.processAllTokens(s)),i.walkTokens&&this.walkTokens(s,i.walkTokens);let a=(i.hooks?i.hooks.provideParser():n?rn.parse:rn.parseInline)(s,i);return i.hooks&&(a=i.hooks.postprocess(a)),a}catch(s){return o(s)}}}onError(n,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,n){let r="<p>An error occurred:</p><pre>"+$n(t.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(t);throw t}}},ii=new WN;function ye(n,e){return ii.parse(n,e)}ye.options=ye.setOptions=function(n){return ii.setOptions(n),ye.defaults=ii.defaults,ZC(ye.defaults),ye};ye.getDefaults=Gh;ye.defaults=oi;ye.use=function(...n){return ii.use(...n),ye.defaults=ii.defaults,ZC(ye.defaults),ye};ye.walkTokens=function(n,e){return ii.walkTokens(n,e)};ye.parseInline=ii.parseInline;ye.Parser=rn;ye.parser=rn.parse;ye.Renderer=Gc;ye.TextRenderer=Zh;ye.Lexer=nn;ye.lexer=nn.lex;ye.Tokenizer=$c;ye.Hooks=Bs;ye.parse=ye;var PJ=ye.options,FJ=ye.setOptions,OJ=ye.use,LJ=ye.walkTokens,VJ=ye.parseInline;var BJ=rn.parse,UJ=nn.lex;var jN,KN;function JN(){return{geminiUrl:jN,vertexUrl:KN}}function YN(n,e,t,r){var i,o;if(!n?.baseUrl){let s=JN();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:t:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return n.baseUrl}var an=class{};function x(n,e){let t=/\{([^}]+)\}/g;return n.replace(t,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){let o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function d(n,e,t){for(let o=0;o<e.length-1;o++){let s=e[o];if(s.endsWith("[]")){let a=s.slice(0,-2);if(!(a in n))if(Array.isArray(t))n[a]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(n[a])){let l=n[a];if(Array.isArray(t))for(let u=0;u<l.length;u++){let f=l[u];d(f,e.slice(o+1),t[u])}else for(let u of l)d(u,e.slice(o+1),t)}return}else if(s.endsWith("[0]")){let a=s.slice(0,-3);a in n||(n[a]=[{}]);let l=n[a];d(l[0],e.slice(o+1),t);return}(!n[s]||typeof n[s]!="object")&&(n[s]={}),n=n[s]}let r=e[e.length-1],i=n[r];if(i!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===i)return;if(typeof i=="object"&&typeof t=="object"&&i!==null&&t!==null)Object.assign(i,t);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[r]=t}function c(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let r=0;r<e.length;r++){if(typeof n!="object"||n===null)return t;let i=e[r];if(i.endsWith("[]")){let o=i.slice(0,-2);if(o in n){let s=n[o];return Array.isArray(s)?s.map(a=>c(a,e.slice(r+1),t)):t}else return t}else n=n[i]}return n}catch(r){if(r instanceof TypeError)return t;throw r}}function ZN(n,e){for(let[t,r]of Object.entries(e)){let i=t.split("."),o=r.split("."),s=new Set,a=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){a=l;break}if(a!==-1&&o.length>a)for(let l=a;l<o.length;l++){let u=o[l];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&s.add(u)}tg(n,i,o,0,s)}}function tg(n,e,t,r,i){if(r>=e.length||typeof n!="object"||n===null)return;let o=e[r];if(o.endsWith("[]")){let s=o.slice(0,-2),a=n;if(s in a&&Array.isArray(a[s]))for(let l of a[s])tg(l,e,t,r+1,i)}else if(o==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){let s=n,a=Object.keys(s).filter(u=>!u.startsWith("_")&&!i.has(u)),l={};for(let u of a)l[u]=s[u];for(let[u,f]of Object.entries(l)){let p=[];for(let h of t.slice(r))h==="*"?p.push(u):p.push(h);d(s,p,f)}for(let u of a)delete s[u]}}else{let s=n;o in s&&tg(s[o],e,t,r+1,i)}}function em(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function QN(n){let e={},t=c(n,["operationName"]);t!=null&&d(e,["operationName"],t);let r=c(n,["resourceName"]);return r!=null&&d(e,["_url","resourceName"],r),e}function XN(n){let e={},t=c(n,["name"]);t!=null&&d(e,["name"],t);let r=c(n,["metadata"]);r!=null&&d(e,["metadata"],r);let i=c(n,["done"]);i!=null&&d(e,["done"],i);let o=c(n,["error"]);o!=null&&d(e,["error"],o);let s=c(n,["response","generateVideoResponse"]);return s!=null&&d(e,["response"],tk(s)),e}function ek(n){let e={},t=c(n,["name"]);t!=null&&d(e,["name"],t);let r=c(n,["metadata"]);r!=null&&d(e,["metadata"],r);let i=c(n,["done"]);i!=null&&d(e,["done"],i);let o=c(n,["error"]);o!=null&&d(e,["error"],o);let s=c(n,["response"]);return s!=null&&d(e,["response"],nk(s)),e}function tk(n){let e={},t=c(n,["generatedSamples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(s=>rk(s))),d(e,["generatedVideos"],o)}let r=c(n,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);let i=c(n,["raiMediaFilteredReasons"]);return i!=null&&d(e,["raiMediaFilteredReasons"],i),e}function nk(n){let e={},t=c(n,["videos"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(s=>ik(s))),d(e,["generatedVideos"],o)}let r=c(n,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);let i=c(n,["raiMediaFilteredReasons"]);return i!=null&&d(e,["raiMediaFilteredReasons"],i),e}function rk(n){let e={},t=c(n,["video"]);return t!=null&&d(e,["video"],uk(t)),e}function ik(n){let e={},t=c(n,["_self"]);return t!=null&&d(e,["video"],dk(t)),e}function ok(n){let e={},t=c(n,["operationName"]);return t!=null&&d(e,["_url","operationName"],t),e}function sk(n){let e={},t=c(n,["operationName"]);return t!=null&&d(e,["_url","operationName"],t),e}function ak(n){let e={},t=c(n,["name"]);t!=null&&d(e,["name"],t);let r=c(n,["metadata"]);r!=null&&d(e,["metadata"],r);let i=c(n,["done"]);i!=null&&d(e,["done"],i);let o=c(n,["error"]);o!=null&&d(e,["error"],o);let s=c(n,["response"]);return s!=null&&d(e,["response"],lk(s)),e}function lk(n){let e={},t=c(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let r=c(n,["parent"]);r!=null&&d(e,["parent"],r);let i=c(n,["documentName"]);return i!=null&&d(e,["documentName"],i),e}function ND(n){let e={},t=c(n,["name"]);t!=null&&d(e,["name"],t);let r=c(n,["metadata"]);r!=null&&d(e,["metadata"],r);let i=c(n,["done"]);i!=null&&d(e,["done"],i);let o=c(n,["error"]);o!=null&&d(e,["error"],o);let s=c(n,["response"]);return s!=null&&d(e,["response"],ck(s)),e}function ck(n){let e={},t=c(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let r=c(n,["parent"]);r!=null&&d(e,["parent"],r);let i=c(n,["documentName"]);return i!=null&&d(e,["documentName"],i),e}function uk(n){let e={},t=c(n,["uri"]);t!=null&&d(e,["uri"],t);let r=c(n,["encodedVideo"]);r!=null&&d(e,["videoBytes"],em(r));let i=c(n,["encoding"]);return i!=null&&d(e,["mimeType"],i),e}function dk(n){let e={},t=c(n,["gcsUri"]);t!=null&&d(e,["uri"],t);let r=c(n,["bytesBase64Encoded"]);r!=null&&d(e,["videoBytes"],em(r));let i=c(n,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}var xt=(function(n){return n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL",n})(xt||{});var ng=(function(n){return n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO",n})(ng||{});var kD=(function(n){return n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",n})(kD||{});var PD=(function(n){return n.COLLECTION="COLLECTION",n})(PD||{});var Gs=(function(n){return n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT",n})(Gs||{});var zs=class{constructor(e){let t={};for(let r of e.headers.entries())t[r[0]]=r[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}};var ai=class{get text(){var e,t,r,i,o,s,a,l;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",f=!1,p=[];for(let h of(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(let[g,m]of Object.entries(h))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(m!==null||m!==void 0)&&p.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;f=!0,u+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?u:void 0}get data(){var e,t,r,i,o,s,a,l;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="",f=[];for(let p of(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(let[h,g]of Object.entries(p))h!=="inlineData"&&(g!==null||g!==void 0)&&f.push(h);p.inlineData&&typeof p.inlineData.data=="string"&&(u+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,t,r,i,o,s,a,l;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let u=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if(u?.length!==0)return u}get executableCode(){var e,t,r,i,o,s,a,l,u;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let f=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if(f?.length!==0)return(u=f?.[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,t,r,i,o,s,a,l,u;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let f=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if(f?.length!==0)return(u=f?.[0])===null||u===void 0?void 0:u.output}},Xc=class{},eu=class{},rg=class{},ig=class{},og=class{},sg=class{},tu=class{},nu=class{},ru=class{},ag=class{};var iu=class n{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){let r=new n,i,o=e;return t?i=ek(o):i=XN(o),Object.assign(r,i),r}},ou=class{},su=class{},au=class{},lu=class{},lg=class{},cg=class{},ug=class{};var dg=class n{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){let r=new n,o=ak(e);return Object.assign(r,o),r}},fg=class{},pg=class{},hg=class{},gg=class{};var cu=class{};var mg=class{get text(){var e,t,r;let i="",o=!1,s=[];for(let a of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(let[l,u]of Object.entries(a))l!=="text"&&l!=="thought"&&u!==null&&s.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;o=!0,i+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,t,r;let i="",o=[];for(let s of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(let[a,l]of Object.entries(s))a!=="inlineData"&&l!==null&&o.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}};var yg=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}};var vg=class n{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){let r=new n,o=ND(e);return Object.assign(r,o),r}};function pe(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){let t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function FD(n,e){let t=pe(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function OD(n){return Array.isArray(n)?n.map(e=>uu(e)):[uu(n)]}function uu(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function LD(n){let e=uu(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function VD(n){let e=uu(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function lD(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function BD(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>lD(e)):[lD(n)]}function _g(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function cD(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function uD(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function nt(n){if(n==null)throw new Error("ContentUnion is required");return _g(n)?n:{role:"user",parts:BD(n)}}function tm(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{let r=nt(t);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(n.isVertexAI()){let t=nt(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>nt(t)):[nt(e)]}function $t(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(cD(n)||uD(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[nt(n)]}let e=[],t=[],r=_g(n[0]);for(let i of n){let o=_g(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(cD(i)||uD(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(i)}}return r||e.push({role:"user",parts:BD(t)}),e}function fk(n,e){n.includes("null")&&(e.nullable=!0);let t=n.filter(r=>r!=="null");if(t.length===1)e.type=Object.values(xt).includes(t[0].toUpperCase())?t[0].toUpperCase():xt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(let r of t)e.anyOf.push({type:Object.values(xt).includes(r.toUpperCase())?r.toUpperCase():xt.TYPE_UNSPECIFIED})}}function fo(n){let e={},t=["items"],r=["anyOf"],i=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");let o=n.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,n=o[1]):o[1].type==="null"&&(e.nullable=!0,n=o[0])),n.type instanceof Array&&fk(n.type,e);for(let[s,a]of Object.entries(n))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(xt).includes(a.toUpperCase())?a.toUpperCase():xt.TYPE_UNSPECIFIED}else if(t.includes(s))e[s]=fo(a);else if(r.includes(s)){let l=[];for(let u of a){if(u.type=="null"){e.nullable=!0;continue}l.push(fo(u))}e[s]=l}else if(i.includes(s)){let l={};for(let[u,f]of Object.entries(a))l[u]=fo(f);e[s]=l}else{if(s==="additionalProperties")continue;e[s]=a}return e}function nm(n){return fo(n)}function rm(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function im(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function mo(n){if(n.functionDeclarations)for(let e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=fo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=fo(e.response));return n}function yo(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");let e=[];for(let t of n)e.push(t);return e}function pk(n,e,t,r=1){let i=!e.startsWith(`${t}/`)&&e.split("/").length===r;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:i?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:i?`${t}/${e}`:e}function qn(n,e){if(typeof e!="string")throw new Error("name must be a string");return pk(n,e,"cachedContents")}function UD(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function dr(n){return em(n)}function hk(n){return n!=null&&typeof n=="object"&&"name"in n}function gk(n){return n!=null&&typeof n=="object"&&"video"in n}function mk(n){return n!=null&&typeof n=="object"&&"uri"in n}function HD(n){var e;let t;if(hk(n)&&(t=n.name),!(mk(n)&&(t=n.uri,t===void 0))&&!(gk(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){let i=t.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${t}`);t=i[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function $D(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function GD(n){for(let e of["models","tunedModels","publisherModels"])if(yk(n,e))return n[e];return[]}function yk(n,e){return n!==null&&typeof n=="object"&&e in n}function vk(n,e={}){let t=n,r={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(r.responseJsonSchema=t.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function _k(n,e={}){let t=[],r=new Set;for(let i of n){let o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);let s=vk(i,e);s.functionDeclarations&&t.push(...s.functionDeclarations)}return{functionDeclarations:t}}function qD(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;let r=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,i=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function Ek(n){if(typeof n!="string")return n;let e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function zD(n){if(typeof n!="object"||n===null)return{};let e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;let i=t.inlinedResponses;if(!Array.isArray(i)||i.length===0)return n;let o=!1;for(let s of i){if(typeof s!="object"||s===null)continue;let l=s.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function vo(n,e){let t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function WD(n){let e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function Ck(n){let e={},t=c(n,["responsesFile"]);t!=null&&d(e,["fileName"],t);let r=c(n,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>tP(s))),d(e,["inlinedResponses"],o)}let i=c(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["inlinedEmbedContentResponses"],o)}return e}function Dk(n){let e={},t=c(n,["predictionsFormat"]);t!=null&&d(e,["format"],t);let r=c(n,["gcsDestination","outputUriPrefix"]);r!=null&&d(e,["gcsUri"],r);let i=c(n,["bigqueryDestination","outputUri"]);return i!=null&&d(e,["bigqueryUri"],i),e}function Sk(n){let e={},t=c(n,["format"]);t!=null&&d(e,["predictionsFormat"],t);let r=c(n,["gcsUri"]);r!=null&&d(e,["gcsDestination","outputUriPrefix"],r);let i=c(n,["bigqueryUri"]);if(i!=null&&d(e,["bigqueryDestination","outputUri"],i),c(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Zc(n){let e={},t=c(n,["name"]);t!=null&&d(e,["name"],t);let r=c(n,["metadata","displayName"]);r!=null&&d(e,["displayName"],r);let i=c(n,["metadata","state"]);i!=null&&d(e,["state"],WD(i));let o=c(n,["metadata","createTime"]);o!=null&&d(e,["createTime"],o);let s=c(n,["metadata","endTime"]);s!=null&&d(e,["endTime"],s);let a=c(n,["metadata","updateTime"]);a!=null&&d(e,["updateTime"],a);let l=c(n,["metadata","model"]);l!=null&&d(e,["model"],l);let u=c(n,["metadata","output"]);return u!=null&&d(e,["dest"],Ck(zD(u))),e}function Eg(n){let e={},t=c(n,["name"]);t!=null&&d(e,["name"],t);let r=c(n,["displayName"]);r!=null&&d(e,["displayName"],r);let i=c(n,["state"]);i!=null&&d(e,["state"],WD(i));let o=c(n,["error"]);o!=null&&d(e,["error"],o);let s=c(n,["createTime"]);s!=null&&d(e,["createTime"],s);let a=c(n,["startTime"]);a!=null&&d(e,["startTime"],a);let l=c(n,["endTime"]);l!=null&&d(e,["endTime"],l);let u=c(n,["updateTime"]);u!=null&&d(e,["updateTime"],u);let f=c(n,["model"]);f!=null&&d(e,["model"],f);let p=c(n,["inputConfig"]);p!=null&&d(e,["src"],wk(p));let h=c(n,["outputConfig"]);h!=null&&d(e,["dest"],Dk(zD(h)));let g=c(n,["completionStats"]);return g!=null&&d(e,["completionStats"],g),e}function wk(n){let e={},t=c(n,["instancesFormat"]);t!=null&&d(e,["format"],t);let r=c(n,["gcsSource","uris"]);r!=null&&d(e,["gcsUri"],r);let i=c(n,["bigquerySource","inputUri"]);return i!=null&&d(e,["bigqueryUri"],i),e}function Tk(n,e){let t={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let r=c(e,["fileName"]);r!=null&&d(t,["fileName"],r);let i=c(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>eP(n,s))),d(t,["requests","requests"],o)}return t}function Ik(n){let e={},t=c(n,["format"]);t!=null&&d(e,["instancesFormat"],t);let r=c(n,["gcsUri"]);r!=null&&d(e,["gcsSource","uris"],r);let i=c(n,["bigqueryUri"]);if(i!=null&&d(e,["bigquerySource","inputUri"],i),c(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function bk(n){let e={},t=c(n,["data"]);if(t!=null&&d(e,["data"],t),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=c(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Ak(n,e){let t={},r=c(e,["name"]);return r!=null&&d(t,["_url","name"],vo(n,r)),t}function Mk(n,e){let t={},r=c(e,["name"]);return r!=null&&d(t,["_url","name"],vo(n,r)),t}function xk(n){let e={},t=c(n,["content"]);t!=null&&d(e,["content"],t);let r=c(n,["citationMetadata"]);r!=null&&d(e,["citationMetadata"],Rk(r));let i=c(n,["tokenCount"]);i!=null&&d(e,["tokenCount"],i);let o=c(n,["finishReason"]);o!=null&&d(e,["finishReason"],o);let s=c(n,["avgLogprobs"]);s!=null&&d(e,["avgLogprobs"],s);let a=c(n,["groundingMetadata"]);a!=null&&d(e,["groundingMetadata"],a);let l=c(n,["index"]);l!=null&&d(e,["index"],l);let u=c(n,["logprobsResult"]);u!=null&&d(e,["logprobsResult"],u);let f=c(n,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>g)),d(e,["safetyRatings"],h)}let p=c(n,["urlContextMetadata"]);return p!=null&&d(e,["urlContextMetadata"],p),e}function Rk(n){let e={},t=c(n,["citationSources"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>i)),d(e,["citations"],r)}return e}function jD(n){let e={},t=c(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>lP(o))),d(e,["parts"],i)}let r=c(n,["role"]);return r!=null&&d(e,["role"],r),e}function Nk(n,e){let t={},r=c(n,["displayName"]);if(e!==void 0&&r!=null&&d(e,["batch","displayName"],r),c(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function kk(n,e){let t={},r=c(n,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);let i=c(n,["dest"]);return e!==void 0&&i!=null&&d(e,["outputConfig"],Sk(Ek(i))),t}function dD(n,e){let t={},r=c(e,["model"]);r!=null&&d(t,["_url","model"],pe(n,r));let i=c(e,["src"]);i!=null&&d(t,["batch","inputConfig"],Tk(n,qD(n,i)));let o=c(e,["config"]);return o!=null&&Nk(o,t),t}function Pk(n,e){let t={},r=c(e,["model"]);r!=null&&d(t,["model"],pe(n,r));let i=c(e,["src"]);i!=null&&d(t,["inputConfig"],Ik(qD(n,i)));let o=c(e,["config"]);return o!=null&&kk(o,t),t}function Fk(n,e){let t={},r=c(n,["displayName"]);return e!==void 0&&r!=null&&d(e,["batch","displayName"],r),t}function Ok(n,e){let t={},r=c(e,["model"]);r!=null&&d(t,["_url","model"],pe(n,r));let i=c(e,["src"]);i!=null&&d(t,["batch","inputConfig"],Gk(n,i));let o=c(e,["config"]);return o!=null&&Fk(o,t),t}function Lk(n,e){let t={},r=c(e,["name"]);return r!=null&&d(t,["_url","name"],vo(n,r)),t}function Vk(n,e){let t={},r=c(e,["name"]);return r!=null&&d(t,["_url","name"],vo(n,r)),t}function Bk(n){let e={},t=c(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let r=c(n,["name"]);r!=null&&d(e,["name"],r);let i=c(n,["done"]);i!=null&&d(e,["done"],i);let o=c(n,["error"]);return o!=null&&d(e,["error"],o),e}function Uk(n){let e={},t=c(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let r=c(n,["name"]);r!=null&&d(e,["name"],r);let i=c(n,["done"]);i!=null&&d(e,["done"],i);let o=c(n,["error"]);return o!=null&&d(e,["error"],o),e}function Hk(n,e){let t={},r=c(e,["contents"]);if(r!=null){let o=tm(n,r);Array.isArray(o)&&(o=o.map(s=>s)),d(t,["requests[]","request","content"],o)}let i=c(e,["config"]);return i!=null&&(d(t,["_self"],$k(i,t)),ZN(t,{"requests[].*":"requests[].request.*"})),t}function $k(n,e){let t={},r=c(n,["taskType"]);e!==void 0&&r!=null&&d(e,["requests[]","taskType"],r);let i=c(n,["title"]);e!==void 0&&i!=null&&d(e,["requests[]","title"],i);let o=c(n,["outputDimensionality"]);if(e!==void 0&&o!=null&&d(e,["requests[]","outputDimensionality"],o),c(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Gk(n,e){let t={},r=c(e,["fileName"]);r!=null&&d(t,["file_name"],r);let i=c(e,["inlinedRequests"]);return i!=null&&d(t,["requests"],Hk(n,i)),t}function qk(n){let e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=c(n,["fileUri"]);t!=null&&d(e,["fileUri"],t);let r=c(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function zk(n){let e={},t=c(n,["id"]);t!=null&&d(e,["id"],t);let r=c(n,["args"]);r!=null&&d(e,["args"],r);let i=c(n,["name"]);if(i!=null&&d(e,["name"],i),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Wk(n){let e={},t=c(n,["allowedFunctionNames"]);t!=null&&d(e,["allowedFunctionNames"],t);let r=c(n,["mode"]);if(r!=null&&d(e,["mode"],r),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function jk(n,e,t){let r={},i=c(e,["systemInstruction"]);t!==void 0&&i!=null&&d(t,["systemInstruction"],jD(nt(i)));let o=c(e,["temperature"]);o!=null&&d(r,["temperature"],o);let s=c(e,["topP"]);s!=null&&d(r,["topP"],s);let a=c(e,["topK"]);a!=null&&d(r,["topK"],a);let l=c(e,["candidateCount"]);l!=null&&d(r,["candidateCount"],l);let u=c(e,["maxOutputTokens"]);u!=null&&d(r,["maxOutputTokens"],u);let f=c(e,["stopSequences"]);f!=null&&d(r,["stopSequences"],f);let p=c(e,["responseLogprobs"]);p!=null&&d(r,["responseLogprobs"],p);let h=c(e,["logprobs"]);h!=null&&d(r,["logprobs"],h);let g=c(e,["presencePenalty"]);g!=null&&d(r,["presencePenalty"],g);let m=c(e,["frequencyPenalty"]);m!=null&&d(r,["frequencyPenalty"],m);let y=c(e,["seed"]);y!=null&&d(r,["seed"],y);let _=c(e,["responseMimeType"]);_!=null&&d(r,["responseMimeType"],_);let E=c(e,["responseSchema"]);E!=null&&d(r,["responseSchema"],nm(E));let I=c(e,["responseJsonSchema"]);if(I!=null&&d(r,["responseJsonSchema"],I),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let A=c(e,["safetySettings"]);if(t!==void 0&&A!=null){let He=A;Array.isArray(He)&&(He=He.map($e=>cP($e))),d(t,["safetySettings"],He)}let b=c(e,["tools"]);if(t!==void 0&&b!=null){let He=yo(b);Array.isArray(He)&&(He=He.map($e=>dP(mo($e)))),d(t,["tools"],He)}let w=c(e,["toolConfig"]);if(t!==void 0&&w!=null&&d(t,["toolConfig"],uP(w)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let H=c(e,["cachedContent"]);t!==void 0&&H!=null&&d(t,["cachedContent"],qn(n,H));let k=c(e,["responseModalities"]);k!=null&&d(r,["responseModalities"],k);let Q=c(e,["mediaResolution"]);Q!=null&&d(r,["mediaResolution"],Q);let B=c(e,["speechConfig"]);if(B!=null&&d(r,["speechConfig"],rm(B)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let K=c(e,["thinkingConfig"]);K!=null&&d(r,["thinkingConfig"],K);let Re=c(e,["imageConfig"]);Re!=null&&d(r,["imageConfig"],Xk(Re));let Fe=c(e,["enableEnhancedCivicAnswers"]);if(Fe!=null&&d(r,["enableEnhancedCivicAnswers"],Fe),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function Kk(n){let e={},t=c(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let r=c(n,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>xk(u))),d(e,["candidates"],l)}let i=c(n,["modelVersion"]);i!=null&&d(e,["modelVersion"],i);let o=c(n,["promptFeedback"]);o!=null&&d(e,["promptFeedback"],o);let s=c(n,["responseId"]);s!=null&&d(e,["responseId"],s);let a=c(n,["usageMetadata"]);return a!=null&&d(e,["usageMetadata"],a),e}function Jk(n,e){let t={},r=c(e,["name"]);return r!=null&&d(t,["_url","name"],vo(n,r)),t}function Yk(n,e){let t={},r=c(e,["name"]);return r!=null&&d(t,["_url","name"],vo(n,r)),t}function Zk(n){let e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=c(n,["enableWidget"]);return t!=null&&d(e,["enableWidget"],t),e}function Qk(n){let e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=c(n,["timeRangeFilter"]);return t!=null&&d(e,["timeRangeFilter"],t),e}function Xk(n){let e={},t=c(n,["aspectRatio"]);t!=null&&d(e,["aspectRatio"],t);let r=c(n,["imageSize"]);if(r!=null&&d(e,["imageSize"],r),c(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function eP(n,e){let t={},r=c(e,["model"]);r!=null&&d(t,["request","model"],pe(n,r));let i=c(e,["contents"]);if(i!=null){let a=$t(i);Array.isArray(a)&&(a=a.map(l=>jD(l))),d(t,["request","contents"],a)}let o=c(e,["metadata"]);o!=null&&d(t,["metadata"],o);let s=c(e,["config"]);return s!=null&&d(t,["request","generationConfig"],jk(n,s,c(t,["request"],{}))),t}function tP(n){let e={},t=c(n,["response"]);t!=null&&d(e,["response"],Kk(t));let r=c(n,["metadata"]);r!=null&&d(e,["metadata"],r);let i=c(n,["error"]);return i!=null&&d(e,["error"],i),e}function nP(n,e){let t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);let i=c(n,["pageToken"]);if(e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),c(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function rP(n,e){let t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);let i=c(n,["pageToken"]);e!==void 0&&i!=null&&d(e,["_query","pageToken"],i);let o=c(n,["filter"]);return e!==void 0&&o!=null&&d(e,["_query","filter"],o),t}function iP(n){let e={},t=c(n,["config"]);return t!=null&&nP(t,e),e}function oP(n){let e={},t=c(n,["config"]);return t!=null&&rP(t,e),e}function sP(n){let e={},t=c(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let r=c(n,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);let i=c(n,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Zc(s))),d(e,["batchJobs"],o)}return e}function aP(n){let e={},t=c(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let r=c(n,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);let i=c(n,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Eg(s))),d(e,["batchJobs"],o)}return e}function lP(n){let e={},t=c(n,["mediaResolution"]);t!=null&&d(e,["mediaResolution"],t);let r=c(n,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);let i=c(n,["executableCode"]);i!=null&&d(e,["executableCode"],i);let o=c(n,["fileData"]);o!=null&&d(e,["fileData"],qk(o));let s=c(n,["functionCall"]);s!=null&&d(e,["functionCall"],zk(s));let a=c(n,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);let l=c(n,["inlineData"]);l!=null&&d(e,["inlineData"],bk(l));let u=c(n,["text"]);u!=null&&d(e,["text"],u);let f=c(n,["thought"]);f!=null&&d(e,["thought"],f);let p=c(n,["thoughtSignature"]);p!=null&&d(e,["thoughtSignature"],p);let h=c(n,["videoMetadata"]);return h!=null&&d(e,["videoMetadata"],h),e}function cP(n){let e={},t=c(n,["category"]);if(t!=null&&d(e,["category"],t),c(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let r=c(n,["threshold"]);return r!=null&&d(e,["threshold"],r),e}function uP(n){let e={},t=c(n,["retrievalConfig"]);t!=null&&d(e,["retrievalConfig"],t);let r=c(n,["functionCallingConfig"]);return r!=null&&d(e,["functionCallingConfig"],Wk(r)),e}function dP(n){let e={};if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let t=c(n,["computerUse"]);t!=null&&d(e,["computerUse"],t);let r=c(n,["fileSearch"]);r!=null&&d(e,["fileSearch"],r);let i=c(n,["codeExecution"]);if(i!=null&&d(e,["codeExecution"],i),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let o=c(n,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(p=>p)),d(e,["functionDeclarations"],f)}let s=c(n,["googleMaps"]);s!=null&&d(e,["googleMaps"],Zk(s));let a=c(n,["googleSearch"]);a!=null&&d(e,["googleSearch"],Qk(a));let l=c(n,["googleSearchRetrieval"]);l!=null&&d(e,["googleSearchRetrieval"],l);let u=c(n,["urlContext"]);return u!=null&&d(e,["urlContext"],u),e}var fr=(function(n){return n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents",n})(fr||{}),Gn=class{constructor(e,t,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,r,i)}init(e,t,r){var i,o;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t?.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=t.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}};var Cg=class extends an{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Gn(fr.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){let t=dD(this.apiClient,e),r=t._url,i=x("{model}:batchGenerateContent",r),a=t.batch.inputConfig.requests,l=a.requests,u=[];for(let f of l){let p=Object.assign({},f);if(p.systemInstruction){let h=p.systemInstruction;delete p.systemInstruction;let g=p.request;g.systemInstruction=h,p.request=g}u.push(p)}return a.requests=u,delete t.config,delete t._url,delete t._query,{path:i,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){let r=t?Object.assign({},t):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){let o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=Pk(this.apiClient,e);return a=x("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Eg(f))}else{let u=dD(this.apiClient,e);return a=x("{model}:batchGenerateContent",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Zc(f))}}async createEmbeddingsInternal(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Ok(this.apiClient,e);return o=x("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>Zc(l))}}async get(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=Yk(this.apiClient,e);return a=x("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Eg(f))}else{let u=Jk(this.apiClient,e);return a=x("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Zc(f))}}async cancel(e){var t,r,i,o;let s="",a={};if(this.apiClient.isVertexAI()){let l=Mk(this.apiClient,e);s=x("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{let l=Ak(this.apiClient,e);s=x("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=oP(e);return a=x("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=aP(f),h=new cu;return Object.assign(h,p),h})}else{let u=iP(e);return a=x("batches",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=sP(f),h=new cu;return Object.assign(h,p),h})}}async delete(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=Vk(this.apiClient,e);return a=x("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>Uk(f))}else{let u=Lk(this.apiClient,e);return a=x("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>Bk(f))}}};function fP(n){let e={},t=c(n,["data"]);if(t!=null&&d(e,["data"],t),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=c(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function fD(n){let e={},t=c(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>FP(o))),d(e,["parts"],i)}let r=c(n,["role"]);return r!=null&&d(e,["role"],r),e}function pP(n,e){let t={},r=c(n,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);let i=c(n,["expireTime"]);e!==void 0&&i!=null&&d(e,["expireTime"],i);let o=c(n,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);let s=c(n,["contents"]);if(e!==void 0&&s!=null){let f=$t(s);Array.isArray(f)&&(f=f.map(p=>fD(p))),d(e,["contents"],f)}let a=c(n,["systemInstruction"]);e!==void 0&&a!=null&&d(e,["systemInstruction"],fD(nt(a)));let l=c(n,["tools"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(p=>LP(p))),d(e,["tools"],f)}let u=c(n,["toolConfig"]);if(e!==void 0&&u!=null&&d(e,["toolConfig"],OP(u)),c(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function hP(n,e){let t={},r=c(n,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);let i=c(n,["expireTime"]);e!==void 0&&i!=null&&d(e,["expireTime"],i);let o=c(n,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);let s=c(n,["contents"]);if(e!==void 0&&s!=null){let p=$t(s);Array.isArray(p)&&(p=p.map(h=>h)),d(e,["contents"],p)}let a=c(n,["systemInstruction"]);e!==void 0&&a!=null&&d(e,["systemInstruction"],nt(a));let l=c(n,["tools"]);if(e!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(h=>VP(h))),d(e,["tools"],p)}let u=c(n,["toolConfig"]);e!==void 0&&u!=null&&d(e,["toolConfig"],u);let f=c(n,["kmsKeyName"]);return e!==void 0&&f!=null&&d(e,["encryption_spec","kmsKeyName"],f),t}function gP(n,e){let t={},r=c(e,["model"]);r!=null&&d(t,["model"],FD(n,r));let i=c(e,["config"]);return i!=null&&pP(i,t),t}function mP(n,e){let t={},r=c(e,["model"]);r!=null&&d(t,["model"],FD(n,r));let i=c(e,["config"]);return i!=null&&hP(i,t),t}function yP(n,e){let t={},r=c(e,["name"]);return r!=null&&d(t,["_url","name"],qn(n,r)),t}function vP(n,e){let t={},r=c(e,["name"]);return r!=null&&d(t,["_url","name"],qn(n,r)),t}function _P(n){let e={},t=c(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function EP(n){let e={},t=c(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function CP(n){let e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=c(n,["fileUri"]);t!=null&&d(e,["fileUri"],t);let r=c(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function DP(n){let e={},t=c(n,["id"]);t!=null&&d(e,["id"],t);let r=c(n,["args"]);r!=null&&d(e,["args"],r);let i=c(n,["name"]);if(i!=null&&d(e,["name"],i),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function SP(n){let e={},t=c(n,["allowedFunctionNames"]);t!=null&&d(e,["allowedFunctionNames"],t);let r=c(n,["mode"]);if(r!=null&&d(e,["mode"],r),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function wP(n){let e={},t=c(n,["description"]);t!=null&&d(e,["description"],t);let r=c(n,["name"]);r!=null&&d(e,["name"],r);let i=c(n,["parameters"]);i!=null&&d(e,["parameters"],i);let o=c(n,["parametersJsonSchema"]);o!=null&&d(e,["parametersJsonSchema"],o);let s=c(n,["response"]);s!=null&&d(e,["response"],s);let a=c(n,["responseJsonSchema"]);if(a!=null&&d(e,["responseJsonSchema"],a),c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function TP(n,e){let t={},r=c(e,["name"]);return r!=null&&d(t,["_url","name"],qn(n,r)),t}function IP(n,e){let t={},r=c(e,["name"]);return r!=null&&d(t,["_url","name"],qn(n,r)),t}function bP(n){let e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=c(n,["enableWidget"]);return t!=null&&d(e,["enableWidget"],t),e}function AP(n){let e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=c(n,["timeRangeFilter"]);return t!=null&&d(e,["timeRangeFilter"],t),e}function MP(n,e){let t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);let i=c(n,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),t}function xP(n,e){let t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);let i=c(n,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),t}function RP(n){let e={},t=c(n,["config"]);return t!=null&&MP(t,e),e}function NP(n){let e={},t=c(n,["config"]);return t!=null&&xP(t,e),e}function kP(n){let e={},t=c(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let r=c(n,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);let i=c(n,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["cachedContents"],o)}return e}function PP(n){let e={},t=c(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let r=c(n,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);let i=c(n,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["cachedContents"],o)}return e}function FP(n){let e={},t=c(n,["mediaResolution"]);t!=null&&d(e,["mediaResolution"],t);let r=c(n,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);let i=c(n,["executableCode"]);i!=null&&d(e,["executableCode"],i);let o=c(n,["fileData"]);o!=null&&d(e,["fileData"],CP(o));let s=c(n,["functionCall"]);s!=null&&d(e,["functionCall"],DP(s));let a=c(n,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);let l=c(n,["inlineData"]);l!=null&&d(e,["inlineData"],fP(l));let u=c(n,["text"]);u!=null&&d(e,["text"],u);let f=c(n,["thought"]);f!=null&&d(e,["thought"],f);let p=c(n,["thoughtSignature"]);p!=null&&d(e,["thoughtSignature"],p);let h=c(n,["videoMetadata"]);return h!=null&&d(e,["videoMetadata"],h),e}function OP(n){let e={},t=c(n,["retrievalConfig"]);t!=null&&d(e,["retrievalConfig"],t);let r=c(n,["functionCallingConfig"]);return r!=null&&d(e,["functionCallingConfig"],SP(r)),e}function LP(n){let e={};if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let t=c(n,["computerUse"]);t!=null&&d(e,["computerUse"],t);let r=c(n,["fileSearch"]);r!=null&&d(e,["fileSearch"],r);let i=c(n,["codeExecution"]);if(i!=null&&d(e,["codeExecution"],i),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let o=c(n,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(p=>p)),d(e,["functionDeclarations"],f)}let s=c(n,["googleMaps"]);s!=null&&d(e,["googleMaps"],bP(s));let a=c(n,["googleSearch"]);a!=null&&d(e,["googleSearch"],AP(a));let l=c(n,["googleSearchRetrieval"]);l!=null&&d(e,["googleSearchRetrieval"],l);let u=c(n,["urlContext"]);return u!=null&&d(e,["urlContext"],u),e}function VP(n){let e={},t=c(n,["retrieval"]);t!=null&&d(e,["retrieval"],t);let r=c(n,["computerUse"]);if(r!=null&&d(e,["computerUse"],r),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let i=c(n,["codeExecution"]);i!=null&&d(e,["codeExecution"],i);let o=c(n,["enterpriseWebSearch"]);o!=null&&d(e,["enterpriseWebSearch"],o);let s=c(n,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>wP(h))),d(e,["functionDeclarations"],p)}let a=c(n,["googleMaps"]);a!=null&&d(e,["googleMaps"],a);let l=c(n,["googleSearch"]);l!=null&&d(e,["googleSearch"],l);let u=c(n,["googleSearchRetrieval"]);u!=null&&d(e,["googleSearchRetrieval"],u);let f=c(n,["urlContext"]);return f!=null&&d(e,["urlContext"],f),e}function BP(n,e){let t={},r=c(n,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);let i=c(n,["expireTime"]);return e!==void 0&&i!=null&&d(e,["expireTime"],i),t}function UP(n,e){let t={},r=c(n,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);let i=c(n,["expireTime"]);return e!==void 0&&i!=null&&d(e,["expireTime"],i),t}function HP(n,e){let t={},r=c(e,["name"]);r!=null&&d(t,["_url","name"],qn(n,r));let i=c(e,["config"]);return i!=null&&BP(i,t),t}function $P(n,e){let t={},r=c(e,["name"]);r!=null&&d(t,["_url","name"],qn(n,r));let i=c(e,["config"]);return i!=null&&UP(i,t),t}var Dg=class extends an{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Gn(fr.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(t),t)}async create(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=mP(this.apiClient,e);return a=x("cachedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{let u=gP(this.apiClient,e);return a=x("cachedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=IP(this.apiClient,e);return a=x("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{let u=TP(this.apiClient,e);return a=x("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=vP(this.apiClient,e);return a=x("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=EP(f),h=new au;return Object.assign(h,p),h})}else{let u=yP(this.apiClient,e);return a=x("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=_P(f),h=new au;return Object.assign(h,p),h})}}async update(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=$P(this.apiClient,e);return a=x("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{let u=HP(this.apiClient,e);return a=x("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=NP(e);return a=x("cachedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=PP(f),h=new lu;return Object.assign(h,p),h})}else{let u=RP(e);return a=x("cachedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=kP(f),h=new lu;return Object.assign(h,p),h})}}};function du(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function pD(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function j(n){return this instanceof j?(this.v=n,this):new j(n)}function on(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(g){return function(m){return Promise.resolve(m).then(g,p)}}function a(g,m){r[g]&&(i[g]=function(y){return new Promise(function(_,E){o.push([g,y,_,E])>1||l(g,y)})},m&&(i[g]=m(i[g])))}function l(g,m){try{u(r[g](m))}catch(y){h(o[0][3],y)}}function u(g){g.value instanceof j?Promise.resolve(g.value.v).then(f,p):h(o[0][2],g)}function f(g){l("next",g)}function p(g){l("throw",g)}function h(g,m){g(m),o.shift(),o.length&&l(o[0][0],o[0][1])}}function sn(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof pD=="function"?pD(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}}function GP(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;let t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:KD(t)}function KD(n){if(n.parts===void 0||n.parts.length===0)return!1;for(let e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function qP(n){if(n.length!==0){for(let e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function hD(n){if(n===void 0||n.length===0)return[];let e=[],t=n.length,r=0;for(;r<t;)if(n[r].role==="user")e.push(n[r]),r++;else{let i=[],o=!0;for(;r<t&&n[r].role==="model";)i.push(n[r]),o&&!KD(n[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}var Sg=class{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new wg(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}},wg=class{constructor(e,t,r,i={},o=[]){this.apiClient=e,this.modelsModule=t,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),qP(o)}async sendMessage(e){var t;await this.sendPromise;let r=nt(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var o,s,a;let l=await i,u=(s=(o=l.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,f=l.automaticFunctionCallingHistory,p=this.getHistory(!0).length,h=[];f!=null&&(h=(a=f.slice(p))!==null&&a!==void 0?a:[]);let g=u?[u]:[];this.recordHistory(r,g,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var t;await this.sendPromise;let r=nt(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});let o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){let t=e?hD(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return on(this,arguments,function*(){var i,o,s,a,l,u;let f=[];try{for(var p=!0,h=sn(e),g;g=yield j(h.next()),i=g.done,!i;p=!0){a=g.value,p=!1;let m=a;if(GP(m)){let y=(u=(l=m.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content;y!==void 0&&f.push(y)}yield yield j(m)}}catch(m){o={error:m}}finally{try{!p&&!i&&(s=h.return)&&(yield j(s.call(h)))}finally{if(o)throw o.error}}this.recordHistory(t,f)})}recordHistory(e,t,r){let i=[];t.length>0&&t.every(o=>o.role!==void 0)?i=t:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...hD(r)):this.history.push(e),this.history.push(...i)}};var Ws=class n extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,n.prototype)}};function zP(n){let e={},t=c(n,["file"]);return t!=null&&d(e,["file"],t),e}function WP(n){let e={},t=c(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function jP(n){let e={},t=c(n,["name"]);return t!=null&&d(e,["_url","file"],HD(t)),e}function KP(n){let e={},t=c(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function JP(n){let e={},t=c(n,["name"]);return t!=null&&d(e,["_url","file"],HD(t)),e}function YP(n){let e={},t=c(n,["uris"]);return t!=null&&d(e,["uris"],t),e}function ZP(n,e){let t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);let i=c(n,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),t}function QP(n){let e={},t=c(n,["config"]);return t!=null&&ZP(t,e),e}function XP(n){let e={},t=c(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let r=c(n,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);let i=c(n,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["files"],o)}return e}function e1(n){let e={},t=c(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let r=c(n,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),d(e,["files"],i)}return e}var Tg=class extends an{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Gn(fr.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=QP(e);return o=x("files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:l.headers},f})),i.then(l=>{let u=XP(l),f=new fg;return Object.assign(f,u),f})}}async createInternal(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=zP(e);return o=x("upload/v1beta/files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let u=WP(l),f=new pg;return Object.assign(f,u),f})}}async get(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=JP(e);return o=x("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=jP(e);return o=x("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:l.headers},f})),i.then(l=>{let u=KP(l),f=new hg;return Object.assign(f,u),f})}}async registerFilesInternal(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=YP(e);return o=x("files:register",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let u=e1(l),f=new gg;return Object.assign(f,u),f})}}};function Qc(n){let e={},t=c(n,["data"]);if(t!=null&&d(e,["data"],t),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=c(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function t1(n){let e={},t=c(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>y1(o))),d(e,["parts"],i)}let r=c(n,["role"]);return r!=null&&d(e,["role"],r),e}function n1(n){let e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=c(n,["fileUri"]);t!=null&&d(e,["fileUri"],t);let r=c(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function r1(n){let e={},t=c(n,["id"]);t!=null&&d(e,["id"],t);let r=c(n,["args"]);r!=null&&d(e,["args"],r);let i=c(n,["name"]);if(i!=null&&d(e,["name"],i),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function i1(n){let e={},t=c(n,["description"]);t!=null&&d(e,["description"],t);let r=c(n,["name"]);r!=null&&d(e,["name"],r);let i=c(n,["parameters"]);i!=null&&d(e,["parameters"],i);let o=c(n,["parametersJsonSchema"]);o!=null&&d(e,["parametersJsonSchema"],o);let s=c(n,["response"]);s!=null&&d(e,["response"],s);let a=c(n,["responseJsonSchema"]);if(a!=null&&d(e,["responseJsonSchema"],a),c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function o1(n){let e={},t=c(n,["modelSelectionConfig"]);t!=null&&d(e,["modelConfig"],t);let r=c(n,["responseJsonSchema"]);r!=null&&d(e,["responseJsonSchema"],r);let i=c(n,["audioTimestamp"]);i!=null&&d(e,["audioTimestamp"],i);let o=c(n,["candidateCount"]);o!=null&&d(e,["candidateCount"],o);let s=c(n,["enableAffectiveDialog"]);s!=null&&d(e,["enableAffectiveDialog"],s);let a=c(n,["frequencyPenalty"]);a!=null&&d(e,["frequencyPenalty"],a);let l=c(n,["logprobs"]);l!=null&&d(e,["logprobs"],l);let u=c(n,["maxOutputTokens"]);u!=null&&d(e,["maxOutputTokens"],u);let f=c(n,["mediaResolution"]);f!=null&&d(e,["mediaResolution"],f);let p=c(n,["presencePenalty"]);p!=null&&d(e,["presencePenalty"],p);let h=c(n,["responseLogprobs"]);h!=null&&d(e,["responseLogprobs"],h);let g=c(n,["responseMimeType"]);g!=null&&d(e,["responseMimeType"],g);let m=c(n,["responseModalities"]);m!=null&&d(e,["responseModalities"],m);let y=c(n,["responseSchema"]);y!=null&&d(e,["responseSchema"],y);let _=c(n,["routingConfig"]);_!=null&&d(e,["routingConfig"],_);let E=c(n,["seed"]);E!=null&&d(e,["seed"],E);let I=c(n,["speechConfig"]);I!=null&&d(e,["speechConfig"],I);let A=c(n,["stopSequences"]);A!=null&&d(e,["stopSequences"],A);let b=c(n,["temperature"]);b!=null&&d(e,["temperature"],b);let w=c(n,["thinkingConfig"]);w!=null&&d(e,["thinkingConfig"],w);let H=c(n,["topK"]);H!=null&&d(e,["topK"],H);let k=c(n,["topP"]);if(k!=null&&d(e,["topP"],k),c(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function s1(n){let e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=c(n,["enableWidget"]);return t!=null&&d(e,["enableWidget"],t),e}function a1(n){let e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=c(n,["timeRangeFilter"]);return t!=null&&d(e,["timeRangeFilter"],t),e}function l1(n,e){let t={},r=c(n,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],r);let i=c(n,["responseModalities"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig","responseModalities"],i);let o=c(n,["temperature"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","temperature"],o);let s=c(n,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);let a=c(n,["topK"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","topK"],a);let l=c(n,["maxOutputTokens"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","maxOutputTokens"],l);let u=c(n,["mediaResolution"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","mediaResolution"],u);let f=c(n,["seed"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","seed"],f);let p=c(n,["speechConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","speechConfig"],im(p));let h=c(n,["thinkingConfig"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","thinkingConfig"],h);let g=c(n,["enableAffectiveDialog"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],g);let m=c(n,["systemInstruction"]);e!==void 0&&m!=null&&d(e,["setup","systemInstruction"],t1(nt(m)));let y=c(n,["tools"]);if(e!==void 0&&y!=null){let H=yo(y);Array.isArray(H)&&(H=H.map(k=>_1(mo(k)))),d(e,["setup","tools"],H)}let _=c(n,["sessionResumption"]);e!==void 0&&_!=null&&d(e,["setup","sessionResumption"],v1(_));let E=c(n,["inputAudioTranscription"]);e!==void 0&&E!=null&&d(e,["setup","inputAudioTranscription"],E);let I=c(n,["outputAudioTranscription"]);e!==void 0&&I!=null&&d(e,["setup","outputAudioTranscription"],I);let A=c(n,["realtimeInputConfig"]);e!==void 0&&A!=null&&d(e,["setup","realtimeInputConfig"],A);let b=c(n,["contextWindowCompression"]);e!==void 0&&b!=null&&d(e,["setup","contextWindowCompression"],b);let w=c(n,["proactivity"]);if(e!==void 0&&w!=null&&d(e,["setup","proactivity"],w),c(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function c1(n,e){let t={},r=c(n,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],o1(r));let i=c(n,["responseModalities"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig","responseModalities"],i);let o=c(n,["temperature"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","temperature"],o);let s=c(n,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);let a=c(n,["topK"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","topK"],a);let l=c(n,["maxOutputTokens"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","maxOutputTokens"],l);let u=c(n,["mediaResolution"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","mediaResolution"],u);let f=c(n,["seed"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","seed"],f);let p=c(n,["speechConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","speechConfig"],im(p));let h=c(n,["thinkingConfig"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","thinkingConfig"],h);let g=c(n,["enableAffectiveDialog"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],g);let m=c(n,["systemInstruction"]);e!==void 0&&m!=null&&d(e,["setup","systemInstruction"],nt(m));let y=c(n,["tools"]);if(e!==void 0&&y!=null){let k=yo(y);Array.isArray(k)&&(k=k.map(Q=>E1(mo(Q)))),d(e,["setup","tools"],k)}let _=c(n,["sessionResumption"]);e!==void 0&&_!=null&&d(e,["setup","sessionResumption"],_);let E=c(n,["inputAudioTranscription"]);e!==void 0&&E!=null&&d(e,["setup","inputAudioTranscription"],E);let I=c(n,["outputAudioTranscription"]);e!==void 0&&I!=null&&d(e,["setup","outputAudioTranscription"],I);let A=c(n,["realtimeInputConfig"]);e!==void 0&&A!=null&&d(e,["setup","realtimeInputConfig"],A);let b=c(n,["contextWindowCompression"]);e!==void 0&&b!=null&&d(e,["setup","contextWindowCompression"],b);let w=c(n,["proactivity"]);e!==void 0&&w!=null&&d(e,["setup","proactivity"],w);let H=c(n,["explicitVadSignal"]);return e!==void 0&&H!=null&&d(e,["setup","explicitVadSignal"],H),t}function u1(n,e){let t={},r=c(e,["model"]);r!=null&&d(t,["setup","model"],pe(n,r));let i=c(e,["config"]);return i!=null&&d(t,["config"],l1(i,t)),t}function d1(n,e){let t={},r=c(e,["model"]);r!=null&&d(t,["setup","model"],pe(n,r));let i=c(e,["config"]);return i!=null&&d(t,["config"],c1(i,t)),t}function f1(n){let e={},t=c(n,["musicGenerationConfig"]);return t!=null&&d(e,["musicGenerationConfig"],t),e}function p1(n){let e={},t=c(n,["weightedPrompts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>i)),d(e,["weightedPrompts"],r)}return e}function h1(n){let e={},t=c(n,["media"]);if(t!=null){let u=OD(t);Array.isArray(u)&&(u=u.map(f=>Qc(f))),d(e,["mediaChunks"],u)}let r=c(n,["audio"]);r!=null&&d(e,["audio"],Qc(VD(r)));let i=c(n,["audioStreamEnd"]);i!=null&&d(e,["audioStreamEnd"],i);let o=c(n,["video"]);o!=null&&d(e,["video"],Qc(LD(o)));let s=c(n,["text"]);s!=null&&d(e,["text"],s);let a=c(n,["activityStart"]);a!=null&&d(e,["activityStart"],a);let l=c(n,["activityEnd"]);return l!=null&&d(e,["activityEnd"],l),e}function g1(n){let e={},t=c(n,["media"]);if(t!=null){let u=OD(t);Array.isArray(u)&&(u=u.map(f=>f)),d(e,["mediaChunks"],u)}let r=c(n,["audio"]);r!=null&&d(e,["audio"],VD(r));let i=c(n,["audioStreamEnd"]);i!=null&&d(e,["audioStreamEnd"],i);let o=c(n,["video"]);o!=null&&d(e,["video"],LD(o));let s=c(n,["text"]);s!=null&&d(e,["text"],s);let a=c(n,["activityStart"]);a!=null&&d(e,["activityStart"],a);let l=c(n,["activityEnd"]);return l!=null&&d(e,["activityEnd"],l),e}function m1(n){let e={},t=c(n,["setupComplete"]);t!=null&&d(e,["setupComplete"],t);let r=c(n,["serverContent"]);r!=null&&d(e,["serverContent"],r);let i=c(n,["toolCall"]);i!=null&&d(e,["toolCall"],i);let o=c(n,["toolCallCancellation"]);o!=null&&d(e,["toolCallCancellation"],o);let s=c(n,["usageMetadata"]);s!=null&&d(e,["usageMetadata"],C1(s));let a=c(n,["goAway"]);a!=null&&d(e,["goAway"],a);let l=c(n,["sessionResumptionUpdate"]);l!=null&&d(e,["sessionResumptionUpdate"],l);let u=c(n,["voiceActivityDetectionSignal"]);u!=null&&d(e,["voiceActivityDetectionSignal"],u);let f=c(n,["voiceActivity"]);return f!=null&&d(e,["voiceActivity"],D1(f)),e}function y1(n){let e={},t=c(n,["mediaResolution"]);t!=null&&d(e,["mediaResolution"],t);let r=c(n,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);let i=c(n,["executableCode"]);i!=null&&d(e,["executableCode"],i);let o=c(n,["fileData"]);o!=null&&d(e,["fileData"],n1(o));let s=c(n,["functionCall"]);s!=null&&d(e,["functionCall"],r1(s));let a=c(n,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);let l=c(n,["inlineData"]);l!=null&&d(e,["inlineData"],Qc(l));let u=c(n,["text"]);u!=null&&d(e,["text"],u);let f=c(n,["thought"]);f!=null&&d(e,["thought"],f);let p=c(n,["thoughtSignature"]);p!=null&&d(e,["thoughtSignature"],p);let h=c(n,["videoMetadata"]);return h!=null&&d(e,["videoMetadata"],h),e}function v1(n){let e={},t=c(n,["handle"]);if(t!=null&&d(e,["handle"],t),c(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function _1(n){let e={};if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let t=c(n,["computerUse"]);t!=null&&d(e,["computerUse"],t);let r=c(n,["fileSearch"]);r!=null&&d(e,["fileSearch"],r);let i=c(n,["codeExecution"]);if(i!=null&&d(e,["codeExecution"],i),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let o=c(n,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(p=>p)),d(e,["functionDeclarations"],f)}let s=c(n,["googleMaps"]);s!=null&&d(e,["googleMaps"],s1(s));let a=c(n,["googleSearch"]);a!=null&&d(e,["googleSearch"],a1(a));let l=c(n,["googleSearchRetrieval"]);l!=null&&d(e,["googleSearchRetrieval"],l);let u=c(n,["urlContext"]);return u!=null&&d(e,["urlContext"],u),e}function E1(n){let e={},t=c(n,["retrieval"]);t!=null&&d(e,["retrieval"],t);let r=c(n,["computerUse"]);if(r!=null&&d(e,["computerUse"],r),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let i=c(n,["codeExecution"]);i!=null&&d(e,["codeExecution"],i);let o=c(n,["enterpriseWebSearch"]);o!=null&&d(e,["enterpriseWebSearch"],o);let s=c(n,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>i1(h))),d(e,["functionDeclarations"],p)}let a=c(n,["googleMaps"]);a!=null&&d(e,["googleMaps"],a);let l=c(n,["googleSearch"]);l!=null&&d(e,["googleSearch"],l);let u=c(n,["googleSearchRetrieval"]);u!=null&&d(e,["googleSearchRetrieval"],u);let f=c(n,["urlContext"]);return f!=null&&d(e,["urlContext"],f),e}function C1(n){let e={},t=c(n,["promptTokenCount"]);t!=null&&d(e,["promptTokenCount"],t);let r=c(n,["cachedContentTokenCount"]);r!=null&&d(e,["cachedContentTokenCount"],r);let i=c(n,["candidatesTokenCount"]);i!=null&&d(e,["responseTokenCount"],i);let o=c(n,["toolUsePromptTokenCount"]);o!=null&&d(e,["toolUsePromptTokenCount"],o);let s=c(n,["thoughtsTokenCount"]);s!=null&&d(e,["thoughtsTokenCount"],s);let a=c(n,["totalTokenCount"]);a!=null&&d(e,["totalTokenCount"],a);let l=c(n,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(m=>m)),d(e,["promptTokensDetails"],g)}let u=c(n,["cacheTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(m=>m)),d(e,["cacheTokensDetails"],g)}let f=c(n,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(m=>m)),d(e,["responseTokensDetails"],g)}let p=c(n,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(m=>m)),d(e,["toolUsePromptTokensDetails"],g)}let h=c(n,["trafficType"]);return h!=null&&d(e,["trafficType"],h),e}function D1(n){let e={},t=c(n,["type"]);return t!=null&&d(e,["voiceActivityType"],t),e}function S1(n,e){let t={},r=c(n,["data"]);if(r!=null&&d(t,["data"],r),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=c(n,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function w1(n,e){let t={},r=c(n,["content"]);r!=null&&d(t,["content"],r);let i=c(n,["citationMetadata"]);i!=null&&d(t,["citationMetadata"],T1(i));let o=c(n,["tokenCount"]);o!=null&&d(t,["tokenCount"],o);let s=c(n,["finishReason"]);s!=null&&d(t,["finishReason"],s);let a=c(n,["avgLogprobs"]);a!=null&&d(t,["avgLogprobs"],a);let l=c(n,["groundingMetadata"]);l!=null&&d(t,["groundingMetadata"],l);let u=c(n,["index"]);u!=null&&d(t,["index"],u);let f=c(n,["logprobsResult"]);f!=null&&d(t,["logprobsResult"],f);let p=c(n,["safetyRatings"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(m=>m)),d(t,["safetyRatings"],g)}let h=c(n,["urlContextMetadata"]);return h!=null&&d(t,["urlContextMetadata"],h),t}function T1(n,e){let t={},r=c(n,["citationSources"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),d(t,["citations"],i)}return t}function I1(n,e,t){let r={},i=c(e,["model"]);i!=null&&d(r,["_url","model"],pe(n,i));let o=c(e,["contents"]);if(o!=null){let s=$t(o);Array.isArray(s)&&(s=s.map(a=>a)),d(r,["contents"],s)}return r}function b1(n,e){let t={},r=c(n,["sdkHttpResponse"]);r!=null&&d(t,["sdkHttpResponse"],r);let i=c(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(t,["tokensInfo"],o)}return t}function A1(n,e){let t={},r=c(n,["values"]);r!=null&&d(t,["values"],r);let i=c(n,["statistics"]);return i!=null&&d(t,["statistics"],M1(i)),t}function M1(n,e){let t={},r=c(n,["truncated"]);r!=null&&d(t,["truncated"],r);let i=c(n,["token_count"]);return i!=null&&d(t,["tokenCount"],i),t}function Iu(n,e){let t={},r=c(n,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>VF(s))),d(t,["parts"],o)}let i=c(n,["role"]);return i!=null&&d(t,["role"],i),t}function x1(n,e){let t={},r=c(n,["controlType"]);r!=null&&d(t,["controlType"],r);let i=c(n,["enableControlImageComputation"]);return i!=null&&d(t,["computeControl"],i),t}function R1(n,e){let t={};if(c(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function N1(n,e,t){let r={},i=c(n,["systemInstruction"]);e!==void 0&&i!=null&&d(e,["systemInstruction"],nt(i));let o=c(n,["tools"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>QD(l))),d(e,["tools"],a)}let s=c(n,["generationConfig"]);return e!==void 0&&s!=null&&d(e,["generationConfig"],SF(s)),r}function k1(n,e,t){let r={},i=c(e,["model"]);i!=null&&d(r,["_url","model"],pe(n,i));let o=c(e,["contents"]);if(o!=null){let a=$t(o);Array.isArray(a)&&(a=a.map(l=>Iu(l))),d(r,["contents"],a)}let s=c(e,["config"]);return s!=null&&R1(s),r}function P1(n,e,t){let r={},i=c(e,["model"]);i!=null&&d(r,["_url","model"],pe(n,i));let o=c(e,["contents"]);if(o!=null){let a=$t(o);Array.isArray(a)&&(a=a.map(l=>l)),d(r,["contents"],a)}let s=c(e,["config"]);return s!=null&&N1(s,r),r}function F1(n,e){let t={},r=c(n,["sdkHttpResponse"]);r!=null&&d(t,["sdkHttpResponse"],r);let i=c(n,["totalTokens"]);i!=null&&d(t,["totalTokens"],i);let o=c(n,["cachedContentTokenCount"]);return o!=null&&d(t,["cachedContentTokenCount"],o),t}function O1(n,e){let t={},r=c(n,["sdkHttpResponse"]);r!=null&&d(t,["sdkHttpResponse"],r);let i=c(n,["totalTokens"]);return i!=null&&d(t,["totalTokens"],i),t}function L1(n,e,t){let r={},i=c(e,["model"]);return i!=null&&d(r,["_url","name"],pe(n,i)),r}function V1(n,e,t){let r={},i=c(e,["model"]);return i!=null&&d(r,["_url","name"],pe(n,i)),r}function B1(n,e){let t={},r=c(n,["sdkHttpResponse"]);return r!=null&&d(t,["sdkHttpResponse"],r),t}function U1(n,e){let t={},r=c(n,["sdkHttpResponse"]);return r!=null&&d(t,["sdkHttpResponse"],r),t}function H1(n,e,t){let r={},i=c(n,["outputGcsUri"]);e!==void 0&&i!=null&&d(e,["parameters","storageUri"],i);let o=c(n,["negativePrompt"]);e!==void 0&&o!=null&&d(e,["parameters","negativePrompt"],o);let s=c(n,["numberOfImages"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);let a=c(n,["aspectRatio"]);e!==void 0&&a!=null&&d(e,["parameters","aspectRatio"],a);let l=c(n,["guidanceScale"]);e!==void 0&&l!=null&&d(e,["parameters","guidanceScale"],l);let u=c(n,["seed"]);e!==void 0&&u!=null&&d(e,["parameters","seed"],u);let f=c(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&d(e,["parameters","safetySetting"],f);let p=c(n,["personGeneration"]);e!==void 0&&p!=null&&d(e,["parameters","personGeneration"],p);let h=c(n,["includeSafetyAttributes"]);e!==void 0&&h!=null&&d(e,["parameters","includeSafetyAttributes"],h);let g=c(n,["includeRaiReason"]);e!==void 0&&g!=null&&d(e,["parameters","includeRaiReason"],g);let m=c(n,["language"]);e!==void 0&&m!=null&&d(e,["parameters","language"],m);let y=c(n,["outputMimeType"]);e!==void 0&&y!=null&&d(e,["parameters","outputOptions","mimeType"],y);let _=c(n,["outputCompressionQuality"]);e!==void 0&&_!=null&&d(e,["parameters","outputOptions","compressionQuality"],_);let E=c(n,["addWatermark"]);e!==void 0&&E!=null&&d(e,["parameters","addWatermark"],E);let I=c(n,["labels"]);e!==void 0&&I!=null&&d(e,["labels"],I);let A=c(n,["editMode"]);e!==void 0&&A!=null&&d(e,["parameters","editMode"],A);let b=c(n,["baseSteps"]);return e!==void 0&&b!=null&&d(e,["parameters","editConfig","baseSteps"],b),r}function $1(n,e,t){let r={},i=c(e,["model"]);i!=null&&d(r,["_url","model"],pe(n,i));let o=c(e,["prompt"]);o!=null&&d(r,["instances[0]","prompt"],o);let s=c(e,["referenceImages"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>qF(u))),d(r,["instances[0]","referenceImages"],l)}let a=c(e,["config"]);return a!=null&&H1(a,r),r}function G1(n,e){let t={},r=c(n,["sdkHttpResponse"]);r!=null&&d(t,["sdkHttpResponse"],r);let i=c(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>bu(s))),d(t,["generatedImages"],o)}return t}function q1(n,e,t){let r={},i=c(n,["taskType"]);e!==void 0&&i!=null&&d(e,["requests[]","taskType"],i);let o=c(n,["title"]);e!==void 0&&o!=null&&d(e,["requests[]","title"],o);let s=c(n,["outputDimensionality"]);if(e!==void 0&&s!=null&&d(e,["requests[]","outputDimensionality"],s),c(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function z1(n,e,t){let r={},i=c(n,["taskType"]);e!==void 0&&i!=null&&d(e,["instances[]","task_type"],i);let o=c(n,["title"]);e!==void 0&&o!=null&&d(e,["instances[]","title"],o);let s=c(n,["outputDimensionality"]);e!==void 0&&s!=null&&d(e,["parameters","outputDimensionality"],s);let a=c(n,["mimeType"]);e!==void 0&&a!=null&&d(e,["instances[]","mimeType"],a);let l=c(n,["autoTruncate"]);return e!==void 0&&l!=null&&d(e,["parameters","autoTruncate"],l),r}function W1(n,e,t){let r={},i=c(e,["model"]);i!=null&&d(r,["_url","model"],pe(n,i));let o=c(e,["contents"]);if(o!=null){let l=tm(n,o);Array.isArray(l)&&(l=l.map(u=>u)),d(r,["requests[]","content"],l)}let s=c(e,["config"]);s!=null&&q1(s,r);let a=c(e,["model"]);return a!==void 0&&d(r,["requests[]","model"],pe(n,a)),r}function j1(n,e,t){let r={},i=c(e,["model"]);i!=null&&d(r,["_url","model"],pe(n,i));let o=c(e,["contents"]);if(o!=null){let a=tm(n,o);Array.isArray(a)&&(a=a.map(l=>l)),d(r,["instances[]","content"],a)}let s=c(e,["config"]);return s!=null&&z1(s,r),r}function K1(n,e){let t={},r=c(n,["sdkHttpResponse"]);r!=null&&d(t,["sdkHttpResponse"],r);let i=c(n,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),d(t,["embeddings"],s)}let o=c(n,["metadata"]);return o!=null&&d(t,["metadata"],o),t}function J1(n,e){let t={},r=c(n,["sdkHttpResponse"]);r!=null&&d(t,["sdkHttpResponse"],r);let i=c(n,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>A1(a))),d(t,["embeddings"],s)}let o=c(n,["metadata"]);return o!=null&&d(t,["metadata"],o),t}function Y1(n,e){let t={},r=c(n,["endpoint"]);r!=null&&d(t,["name"],r);let i=c(n,["deployedModelId"]);return i!=null&&d(t,["deployedModelId"],i),t}function Z1(n,e){let t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=c(n,["fileUri"]);r!=null&&d(t,["fileUri"],r);let i=c(n,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function Q1(n,e){let t={},r=c(n,["id"]);r!=null&&d(t,["id"],r);let i=c(n,["args"]);i!=null&&d(t,["args"],i);let o=c(n,["name"]);if(o!=null&&d(t,["name"],o),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function X1(n,e){let t={},r=c(n,["allowedFunctionNames"]);r!=null&&d(t,["allowedFunctionNames"],r);let i=c(n,["mode"]);if(i!=null&&d(t,["mode"],i),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function eF(n,e){let t={},r=c(n,["description"]);r!=null&&d(t,["description"],r);let i=c(n,["name"]);i!=null&&d(t,["name"],i);let o=c(n,["parameters"]);o!=null&&d(t,["parameters"],o);let s=c(n,["parametersJsonSchema"]);s!=null&&d(t,["parametersJsonSchema"],s);let a=c(n,["response"]);a!=null&&d(t,["response"],a);let l=c(n,["responseJsonSchema"]);if(l!=null&&d(t,["responseJsonSchema"],l),c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function tF(n,e,t,r){let i={},o=c(e,["systemInstruction"]);t!==void 0&&o!=null&&d(t,["systemInstruction"],Iu(nt(o)));let s=c(e,["temperature"]);s!=null&&d(i,["temperature"],s);let a=c(e,["topP"]);a!=null&&d(i,["topP"],a);let l=c(e,["topK"]);l!=null&&d(i,["topK"],l);let u=c(e,["candidateCount"]);u!=null&&d(i,["candidateCount"],u);let f=c(e,["maxOutputTokens"]);f!=null&&d(i,["maxOutputTokens"],f);let p=c(e,["stopSequences"]);p!=null&&d(i,["stopSequences"],p);let h=c(e,["responseLogprobs"]);h!=null&&d(i,["responseLogprobs"],h);let g=c(e,["logprobs"]);g!=null&&d(i,["logprobs"],g);let m=c(e,["presencePenalty"]);m!=null&&d(i,["presencePenalty"],m);let y=c(e,["frequencyPenalty"]);y!=null&&d(i,["frequencyPenalty"],y);let _=c(e,["seed"]);_!=null&&d(i,["seed"],_);let E=c(e,["responseMimeType"]);E!=null&&d(i,["responseMimeType"],E);let I=c(e,["responseSchema"]);I!=null&&d(i,["responseSchema"],nm(I));let A=c(e,["responseJsonSchema"]);if(A!=null&&d(i,["responseJsonSchema"],A),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let b=c(e,["safetySettings"]);if(t!==void 0&&b!=null){let $e=b;Array.isArray($e)&&($e=$e.map(bn=>zF(bn))),d(t,["safetySettings"],$e)}let w=c(e,["tools"]);if(t!==void 0&&w!=null){let $e=yo(w);Array.isArray($e)&&($e=$e.map(bn=>QF(mo(bn)))),d(t,["tools"],$e)}let H=c(e,["toolConfig"]);if(t!==void 0&&H!=null&&d(t,["toolConfig"],ZF(H)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let k=c(e,["cachedContent"]);t!==void 0&&k!=null&&d(t,["cachedContent"],qn(n,k));let Q=c(e,["responseModalities"]);Q!=null&&d(i,["responseModalities"],Q);let B=c(e,["mediaResolution"]);B!=null&&d(i,["mediaResolution"],B);let K=c(e,["speechConfig"]);if(K!=null&&d(i,["speechConfig"],rm(K)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let Re=c(e,["thinkingConfig"]);Re!=null&&d(i,["thinkingConfig"],Re);let Fe=c(e,["imageConfig"]);Fe!=null&&d(i,["imageConfig"],AF(Fe));let He=c(e,["enableEnhancedCivicAnswers"]);if(He!=null&&d(i,["enableEnhancedCivicAnswers"],He),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function nF(n,e,t,r){let i={},o=c(e,["systemInstruction"]);t!==void 0&&o!=null&&d(t,["systemInstruction"],nt(o));let s=c(e,["temperature"]);s!=null&&d(i,["temperature"],s);let a=c(e,["topP"]);a!=null&&d(i,["topP"],a);let l=c(e,["topK"]);l!=null&&d(i,["topK"],l);let u=c(e,["candidateCount"]);u!=null&&d(i,["candidateCount"],u);let f=c(e,["maxOutputTokens"]);f!=null&&d(i,["maxOutputTokens"],f);let p=c(e,["stopSequences"]);p!=null&&d(i,["stopSequences"],p);let h=c(e,["responseLogprobs"]);h!=null&&d(i,["responseLogprobs"],h);let g=c(e,["logprobs"]);g!=null&&d(i,["logprobs"],g);let m=c(e,["presencePenalty"]);m!=null&&d(i,["presencePenalty"],m);let y=c(e,["frequencyPenalty"]);y!=null&&d(i,["frequencyPenalty"],y);let _=c(e,["seed"]);_!=null&&d(i,["seed"],_);let E=c(e,["responseMimeType"]);E!=null&&d(i,["responseMimeType"],E);let I=c(e,["responseSchema"]);I!=null&&d(i,["responseSchema"],nm(I));let A=c(e,["responseJsonSchema"]);A!=null&&d(i,["responseJsonSchema"],A);let b=c(e,["routingConfig"]);b!=null&&d(i,["routingConfig"],b);let w=c(e,["modelSelectionConfig"]);w!=null&&d(i,["modelConfig"],w);let H=c(e,["safetySettings"]);if(t!==void 0&&H!=null){let O=H;Array.isArray(O)&&(O=O.map(te=>te)),d(t,["safetySettings"],O)}let k=c(e,["tools"]);if(t!==void 0&&k!=null){let O=yo(k);Array.isArray(O)&&(O=O.map(te=>QD(mo(te)))),d(t,["tools"],O)}let Q=c(e,["toolConfig"]);t!==void 0&&Q!=null&&d(t,["toolConfig"],Q);let B=c(e,["labels"]);t!==void 0&&B!=null&&d(t,["labels"],B);let K=c(e,["cachedContent"]);t!==void 0&&K!=null&&d(t,["cachedContent"],qn(n,K));let Re=c(e,["responseModalities"]);Re!=null&&d(i,["responseModalities"],Re);let Fe=c(e,["mediaResolution"]);Fe!=null&&d(i,["mediaResolution"],Fe);let He=c(e,["speechConfig"]);He!=null&&d(i,["speechConfig"],rm(He));let $e=c(e,["audioTimestamp"]);$e!=null&&d(i,["audioTimestamp"],$e);let bn=c(e,["thinkingConfig"]);bn!=null&&d(i,["thinkingConfig"],bn);let N=c(e,["imageConfig"]);if(N!=null&&d(i,["imageConfig"],MF(N)),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");let L=c(e,["modelArmorConfig"]);return t!==void 0&&L!=null&&d(t,["modelArmorConfig"],L),i}function gD(n,e,t){let r={},i=c(e,["model"]);i!=null&&d(r,["_url","model"],pe(n,i));let o=c(e,["contents"]);if(o!=null){let a=$t(o);Array.isArray(a)&&(a=a.map(l=>Iu(l))),d(r,["contents"],a)}let s=c(e,["config"]);return s!=null&&d(r,["generationConfig"],tF(n,s,r)),r}function mD(n,e,t){let r={},i=c(e,["model"]);i!=null&&d(r,["_url","model"],pe(n,i));let o=c(e,["contents"]);if(o!=null){let a=$t(o);Array.isArray(a)&&(a=a.map(l=>l)),d(r,["contents"],a)}let s=c(e,["config"]);return s!=null&&d(r,["generationConfig"],nF(n,s,r)),r}function yD(n,e){let t={},r=c(n,["sdkHttpResponse"]);r!=null&&d(t,["sdkHttpResponse"],r);let i=c(n,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(f=>w1(f))),d(t,["candidates"],u)}let o=c(n,["modelVersion"]);o!=null&&d(t,["modelVersion"],o);let s=c(n,["promptFeedback"]);s!=null&&d(t,["promptFeedback"],s);let a=c(n,["responseId"]);a!=null&&d(t,["responseId"],a);let l=c(n,["usageMetadata"]);return l!=null&&d(t,["usageMetadata"],l),t}function vD(n,e){let t={},r=c(n,["sdkHttpResponse"]);r!=null&&d(t,["sdkHttpResponse"],r);let i=c(n,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(p=>p)),d(t,["candidates"],f)}let o=c(n,["createTime"]);o!=null&&d(t,["createTime"],o);let s=c(n,["modelVersion"]);s!=null&&d(t,["modelVersion"],s);let a=c(n,["promptFeedback"]);a!=null&&d(t,["promptFeedback"],a);let l=c(n,["responseId"]);l!=null&&d(t,["responseId"],l);let u=c(n,["usageMetadata"]);return u!=null&&d(t,["usageMetadata"],u),t}function rF(n,e,t){let r={};if(c(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let i=c(n,["numberOfImages"]);e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i);let o=c(n,["aspectRatio"]);e!==void 0&&o!=null&&d(e,["parameters","aspectRatio"],o);let s=c(n,["guidanceScale"]);if(e!==void 0&&s!=null&&d(e,["parameters","guidanceScale"],s),c(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let a=c(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&d(e,["parameters","safetySetting"],a);let l=c(n,["personGeneration"]);e!==void 0&&l!=null&&d(e,["parameters","personGeneration"],l);let u=c(n,["includeSafetyAttributes"]);e!==void 0&&u!=null&&d(e,["parameters","includeSafetyAttributes"],u);let f=c(n,["includeRaiReason"]);e!==void 0&&f!=null&&d(e,["parameters","includeRaiReason"],f);let p=c(n,["language"]);e!==void 0&&p!=null&&d(e,["parameters","language"],p);let h=c(n,["outputMimeType"]);e!==void 0&&h!=null&&d(e,["parameters","outputOptions","mimeType"],h);let g=c(n,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&d(e,["parameters","outputOptions","compressionQuality"],g),c(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let m=c(n,["imageSize"]);if(e!==void 0&&m!=null&&d(e,["parameters","sampleImageSize"],m),c(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function iF(n,e,t){let r={},i=c(n,["outputGcsUri"]);e!==void 0&&i!=null&&d(e,["parameters","storageUri"],i);let o=c(n,["negativePrompt"]);e!==void 0&&o!=null&&d(e,["parameters","negativePrompt"],o);let s=c(n,["numberOfImages"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);let a=c(n,["aspectRatio"]);e!==void 0&&a!=null&&d(e,["parameters","aspectRatio"],a);let l=c(n,["guidanceScale"]);e!==void 0&&l!=null&&d(e,["parameters","guidanceScale"],l);let u=c(n,["seed"]);e!==void 0&&u!=null&&d(e,["parameters","seed"],u);let f=c(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&d(e,["parameters","safetySetting"],f);let p=c(n,["personGeneration"]);e!==void 0&&p!=null&&d(e,["parameters","personGeneration"],p);let h=c(n,["includeSafetyAttributes"]);e!==void 0&&h!=null&&d(e,["parameters","includeSafetyAttributes"],h);let g=c(n,["includeRaiReason"]);e!==void 0&&g!=null&&d(e,["parameters","includeRaiReason"],g);let m=c(n,["language"]);e!==void 0&&m!=null&&d(e,["parameters","language"],m);let y=c(n,["outputMimeType"]);e!==void 0&&y!=null&&d(e,["parameters","outputOptions","mimeType"],y);let _=c(n,["outputCompressionQuality"]);e!==void 0&&_!=null&&d(e,["parameters","outputOptions","compressionQuality"],_);let E=c(n,["addWatermark"]);e!==void 0&&E!=null&&d(e,["parameters","addWatermark"],E);let I=c(n,["labels"]);e!==void 0&&I!=null&&d(e,["labels"],I);let A=c(n,["imageSize"]);e!==void 0&&A!=null&&d(e,["parameters","sampleImageSize"],A);let b=c(n,["enhancePrompt"]);return e!==void 0&&b!=null&&d(e,["parameters","enhancePrompt"],b),r}function oF(n,e,t){let r={},i=c(e,["model"]);i!=null&&d(r,["_url","model"],pe(n,i));let o=c(e,["prompt"]);o!=null&&d(r,["instances[0]","prompt"],o);let s=c(e,["config"]);return s!=null&&rF(s,r),r}function sF(n,e,t){let r={},i=c(e,["model"]);i!=null&&d(r,["_url","model"],pe(n,i));let o=c(e,["prompt"]);o!=null&&d(r,["instances[0]","prompt"],o);let s=c(e,["config"]);return s!=null&&iF(s,r),r}function aF(n,e){let t={},r=c(n,["sdkHttpResponse"]);r!=null&&d(t,["sdkHttpResponse"],r);let i=c(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>_F(a))),d(t,["generatedImages"],s)}let o=c(n,["positivePromptSafetyAttributes"]);return o!=null&&d(t,["positivePromptSafetyAttributes"],YD(o)),t}function lF(n,e){let t={},r=c(n,["sdkHttpResponse"]);r!=null&&d(t,["sdkHttpResponse"],r);let i=c(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>bu(a))),d(t,["generatedImages"],s)}let o=c(n,["positivePromptSafetyAttributes"]);return o!=null&&d(t,["positivePromptSafetyAttributes"],ZD(o)),t}function cF(n,e,t){let r={},i=c(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i),c(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let o=c(n,["durationSeconds"]);if(e!==void 0&&o!=null&&d(e,["parameters","durationSeconds"],o),c(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let s=c(n,["aspectRatio"]);e!==void 0&&s!=null&&d(e,["parameters","aspectRatio"],s);let a=c(n,["resolution"]);e!==void 0&&a!=null&&d(e,["parameters","resolution"],a);let l=c(n,["personGeneration"]);if(e!==void 0&&l!=null&&d(e,["parameters","personGeneration"],l),c(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let u=c(n,["negativePrompt"]);e!==void 0&&u!=null&&d(e,["parameters","negativePrompt"],u);let f=c(n,["enhancePrompt"]);if(e!==void 0&&f!=null&&d(e,["parameters","enhancePrompt"],f),c(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");let p=c(n,["lastFrame"]);e!==void 0&&p!=null&&d(e,["instances[0]","lastFrame"],Au(p));let h=c(n,["referenceImages"]);if(e!==void 0&&h!=null){let g=h;Array.isArray(g)&&(g=g.map(m=>dO(m))),d(e,["instances[0]","referenceImages"],g)}if(c(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function uF(n,e,t){let r={},i=c(n,["numberOfVideos"]);e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i);let o=c(n,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);let s=c(n,["fps"]);e!==void 0&&s!=null&&d(e,["parameters","fps"],s);let a=c(n,["durationSeconds"]);e!==void 0&&a!=null&&d(e,["parameters","durationSeconds"],a);let l=c(n,["seed"]);e!==void 0&&l!=null&&d(e,["parameters","seed"],l);let u=c(n,["aspectRatio"]);e!==void 0&&u!=null&&d(e,["parameters","aspectRatio"],u);let f=c(n,["resolution"]);e!==void 0&&f!=null&&d(e,["parameters","resolution"],f);let p=c(n,["personGeneration"]);e!==void 0&&p!=null&&d(e,["parameters","personGeneration"],p);let h=c(n,["pubsubTopic"]);e!==void 0&&h!=null&&d(e,["parameters","pubsubTopic"],h);let g=c(n,["negativePrompt"]);e!==void 0&&g!=null&&d(e,["parameters","negativePrompt"],g);let m=c(n,["enhancePrompt"]);e!==void 0&&m!=null&&d(e,["parameters","enhancePrompt"],m);let y=c(n,["generateAudio"]);e!==void 0&&y!=null&&d(e,["parameters","generateAudio"],y);let _=c(n,["lastFrame"]);e!==void 0&&_!=null&&d(e,["instances[0]","lastFrame"],ln(_));let E=c(n,["referenceImages"]);if(e!==void 0&&E!=null){let b=E;Array.isArray(b)&&(b=b.map(w=>fO(w))),d(e,["instances[0]","referenceImages"],b)}let I=c(n,["mask"]);e!==void 0&&I!=null&&d(e,["instances[0]","mask"],uO(I));let A=c(n,["compressionQuality"]);return e!==void 0&&A!=null&&d(e,["parameters","compressionQuality"],A),r}function dF(n,e){let t={},r=c(n,["name"]);r!=null&&d(t,["name"],r);let i=c(n,["metadata"]);i!=null&&d(t,["metadata"],i);let o=c(n,["done"]);o!=null&&d(t,["done"],o);let s=c(n,["error"]);s!=null&&d(t,["error"],s);let a=c(n,["response","generateVideoResponse"]);return a!=null&&d(t,["response"],gF(a)),t}function fF(n,e){let t={},r=c(n,["name"]);r!=null&&d(t,["name"],r);let i=c(n,["metadata"]);i!=null&&d(t,["metadata"],i);let o=c(n,["done"]);o!=null&&d(t,["done"],o);let s=c(n,["error"]);s!=null&&d(t,["error"],s);let a=c(n,["response"]);return a!=null&&d(t,["response"],mF(a)),t}function pF(n,e,t){let r={},i=c(e,["model"]);i!=null&&d(r,["_url","model"],pe(n,i));let o=c(e,["prompt"]);o!=null&&d(r,["instances[0]","prompt"],o);let s=c(e,["image"]);s!=null&&d(r,["instances[0]","image"],Au(s));let a=c(e,["video"]);a!=null&&d(r,["instances[0]","video"],XD(a));let l=c(e,["source"]);l!=null&&yF(l,r);let u=c(e,["config"]);return u!=null&&cF(u,r),r}function hF(n,e,t){let r={},i=c(e,["model"]);i!=null&&d(r,["_url","model"],pe(n,i));let o=c(e,["prompt"]);o!=null&&d(r,["instances[0]","prompt"],o);let s=c(e,["image"]);s!=null&&d(r,["instances[0]","image"],ln(s));let a=c(e,["video"]);a!=null&&d(r,["instances[0]","video"],eS(a));let l=c(e,["source"]);l!=null&&vF(l,r);let u=c(e,["config"]);return u!=null&&uF(u,r),r}function gF(n,e){let t={},r=c(n,["generatedSamples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>CF(a))),d(t,["generatedVideos"],s)}let i=c(n,["raiMediaFilteredCount"]);i!=null&&d(t,["raiMediaFilteredCount"],i);let o=c(n,["raiMediaFilteredReasons"]);return o!=null&&d(t,["raiMediaFilteredReasons"],o),t}function mF(n,e){let t={},r=c(n,["videos"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>DF(a))),d(t,["generatedVideos"],s)}let i=c(n,["raiMediaFilteredCount"]);i!=null&&d(t,["raiMediaFilteredCount"],i);let o=c(n,["raiMediaFilteredReasons"]);return o!=null&&d(t,["raiMediaFilteredReasons"],o),t}function yF(n,e,t){let r={},i=c(n,["prompt"]);e!==void 0&&i!=null&&d(e,["instances[0]","prompt"],i);let o=c(n,["image"]);e!==void 0&&o!=null&&d(e,["instances[0]","image"],Au(o));let s=c(n,["video"]);return e!==void 0&&s!=null&&d(e,["instances[0]","video"],XD(s)),r}function vF(n,e,t){let r={},i=c(n,["prompt"]);e!==void 0&&i!=null&&d(e,["instances[0]","prompt"],i);let o=c(n,["image"]);e!==void 0&&o!=null&&d(e,["instances[0]","image"],ln(o));let s=c(n,["video"]);return e!==void 0&&s!=null&&d(e,["instances[0]","video"],eS(s)),r}function _F(n,e){let t={},r=c(n,["_self"]);r!=null&&d(t,["image"],xF(r));let i=c(n,["raiFilteredReason"]);i!=null&&d(t,["raiFilteredReason"],i);let o=c(n,["_self"]);return o!=null&&d(t,["safetyAttributes"],YD(o)),t}function bu(n,e){let t={},r=c(n,["_self"]);r!=null&&d(t,["image"],JD(r));let i=c(n,["raiFilteredReason"]);i!=null&&d(t,["raiFilteredReason"],i);let o=c(n,["_self"]);o!=null&&d(t,["safetyAttributes"],ZD(o));let s=c(n,["prompt"]);return s!=null&&d(t,["enhancedPrompt"],s),t}function EF(n,e){let t={},r=c(n,["_self"]);r!=null&&d(t,["mask"],JD(r));let i=c(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(t,["labels"],o)}return t}function CF(n,e){let t={},r=c(n,["video"]);return r!=null&&d(t,["video"],lO(r)),t}function DF(n,e){let t={},r=c(n,["_self"]);return r!=null&&d(t,["video"],cO(r)),t}function SF(n,e){let t={},r=c(n,["modelSelectionConfig"]);r!=null&&d(t,["modelConfig"],r);let i=c(n,["responseJsonSchema"]);i!=null&&d(t,["responseJsonSchema"],i);let o=c(n,["audioTimestamp"]);o!=null&&d(t,["audioTimestamp"],o);let s=c(n,["candidateCount"]);s!=null&&d(t,["candidateCount"],s);let a=c(n,["enableAffectiveDialog"]);a!=null&&d(t,["enableAffectiveDialog"],a);let l=c(n,["frequencyPenalty"]);l!=null&&d(t,["frequencyPenalty"],l);let u=c(n,["logprobs"]);u!=null&&d(t,["logprobs"],u);let f=c(n,["maxOutputTokens"]);f!=null&&d(t,["maxOutputTokens"],f);let p=c(n,["mediaResolution"]);p!=null&&d(t,["mediaResolution"],p);let h=c(n,["presencePenalty"]);h!=null&&d(t,["presencePenalty"],h);let g=c(n,["responseLogprobs"]);g!=null&&d(t,["responseLogprobs"],g);let m=c(n,["responseMimeType"]);m!=null&&d(t,["responseMimeType"],m);let y=c(n,["responseModalities"]);y!=null&&d(t,["responseModalities"],y);let _=c(n,["responseSchema"]);_!=null&&d(t,["responseSchema"],_);let E=c(n,["routingConfig"]);E!=null&&d(t,["routingConfig"],E);let I=c(n,["seed"]);I!=null&&d(t,["seed"],I);let A=c(n,["speechConfig"]);A!=null&&d(t,["speechConfig"],A);let b=c(n,["stopSequences"]);b!=null&&d(t,["stopSequences"],b);let w=c(n,["temperature"]);w!=null&&d(t,["temperature"],w);let H=c(n,["thinkingConfig"]);H!=null&&d(t,["thinkingConfig"],H);let k=c(n,["topK"]);k!=null&&d(t,["topK"],k);let Q=c(n,["topP"]);if(Q!=null&&d(t,["topP"],Q),c(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function wF(n,e,t){let r={},i=c(e,["model"]);return i!=null&&d(r,["_url","name"],pe(n,i)),r}function TF(n,e,t){let r={},i=c(e,["model"]);return i!=null&&d(r,["_url","name"],pe(n,i)),r}function IF(n,e){let t={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let r=c(n,["enableWidget"]);return r!=null&&d(t,["enableWidget"],r),t}function bF(n,e){let t={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let r=c(n,["timeRangeFilter"]);return r!=null&&d(t,["timeRangeFilter"],r),t}function AF(n,e){let t={},r=c(n,["aspectRatio"]);r!=null&&d(t,["aspectRatio"],r);let i=c(n,["imageSize"]);if(i!=null&&d(t,["imageSize"],i),c(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function MF(n,e){let t={},r=c(n,["aspectRatio"]);r!=null&&d(t,["aspectRatio"],r);let i=c(n,["imageSize"]);i!=null&&d(t,["imageSize"],i);let o=c(n,["personGeneration"]);o!=null&&d(t,["personGeneration"],o);let s=c(n,["outputMimeType"]);s!=null&&d(t,["imageOutputOptions","mimeType"],s);let a=c(n,["outputCompressionQuality"]);return a!=null&&d(t,["imageOutputOptions","compressionQuality"],a),t}function xF(n,e){let t={},r=c(n,["bytesBase64Encoded"]);r!=null&&d(t,["imageBytes"],dr(r));let i=c(n,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function JD(n,e){let t={},r=c(n,["gcsUri"]);r!=null&&d(t,["gcsUri"],r);let i=c(n,["bytesBase64Encoded"]);i!=null&&d(t,["imageBytes"],dr(i));let o=c(n,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function Au(n,e){let t={};if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let r=c(n,["imageBytes"]);r!=null&&d(t,["bytesBase64Encoded"],dr(r));let i=c(n,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function ln(n,e){let t={},r=c(n,["gcsUri"]);r!=null&&d(t,["gcsUri"],r);let i=c(n,["imageBytes"]);i!=null&&d(t,["bytesBase64Encoded"],dr(i));let o=c(n,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function RF(n,e,t,r){let i={},o=c(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);let s=c(e,["pageToken"]);t!==void 0&&s!=null&&d(t,["_query","pageToken"],s);let a=c(e,["filter"]);t!==void 0&&a!=null&&d(t,["_query","filter"],a);let l=c(e,["queryBase"]);return t!==void 0&&l!=null&&d(t,["_url","models_url"],$D(n,l)),i}function NF(n,e,t,r){let i={},o=c(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);let s=c(e,["pageToken"]);t!==void 0&&s!=null&&d(t,["_query","pageToken"],s);let a=c(e,["filter"]);t!==void 0&&a!=null&&d(t,["_query","filter"],a);let l=c(e,["queryBase"]);return t!==void 0&&l!=null&&d(t,["_url","models_url"],$D(n,l)),i}function kF(n,e,t){let r={},i=c(e,["config"]);return i!=null&&RF(n,i,r),r}function PF(n,e,t){let r={},i=c(e,["config"]);return i!=null&&NF(n,i,r),r}function FF(n,e){let t={},r=c(n,["sdkHttpResponse"]);r!=null&&d(t,["sdkHttpResponse"],r);let i=c(n,["nextPageToken"]);i!=null&&d(t,["nextPageToken"],i);let o=c(n,["_self"]);if(o!=null){let s=GD(o);Array.isArray(s)&&(s=s.map(a=>Ig(a))),d(t,["models"],s)}return t}function OF(n,e){let t={},r=c(n,["sdkHttpResponse"]);r!=null&&d(t,["sdkHttpResponse"],r);let i=c(n,["nextPageToken"]);i!=null&&d(t,["nextPageToken"],i);let o=c(n,["_self"]);if(o!=null){let s=GD(o);Array.isArray(s)&&(s=s.map(a=>bg(a))),d(t,["models"],s)}return t}function LF(n,e){let t={},r=c(n,["maskMode"]);r!=null&&d(t,["maskMode"],r);let i=c(n,["segmentationClasses"]);i!=null&&d(t,["maskClasses"],i);let o=c(n,["maskDilation"]);return o!=null&&d(t,["dilation"],o),t}function Ig(n,e){let t={},r=c(n,["name"]);r!=null&&d(t,["name"],r);let i=c(n,["displayName"]);i!=null&&d(t,["displayName"],i);let o=c(n,["description"]);o!=null&&d(t,["description"],o);let s=c(n,["version"]);s!=null&&d(t,["version"],s);let a=c(n,["_self"]);a!=null&&d(t,["tunedModelInfo"],XF(a));let l=c(n,["inputTokenLimit"]);l!=null&&d(t,["inputTokenLimit"],l);let u=c(n,["outputTokenLimit"]);u!=null&&d(t,["outputTokenLimit"],u);let f=c(n,["supportedGenerationMethods"]);f!=null&&d(t,["supportedActions"],f);let p=c(n,["temperature"]);p!=null&&d(t,["temperature"],p);let h=c(n,["maxTemperature"]);h!=null&&d(t,["maxTemperature"],h);let g=c(n,["topP"]);g!=null&&d(t,["topP"],g);let m=c(n,["topK"]);m!=null&&d(t,["topK"],m);let y=c(n,["thinking"]);return y!=null&&d(t,["thinking"],y),t}function bg(n,e){let t={},r=c(n,["name"]);r!=null&&d(t,["name"],r);let i=c(n,["displayName"]);i!=null&&d(t,["displayName"],i);let o=c(n,["description"]);o!=null&&d(t,["description"],o);let s=c(n,["versionId"]);s!=null&&d(t,["version"],s);let a=c(n,["deployedModels"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(g=>Y1(g))),d(t,["endpoints"],h)}let l=c(n,["labels"]);l!=null&&d(t,["labels"],l);let u=c(n,["_self"]);u!=null&&d(t,["tunedModelInfo"],eO(u));let f=c(n,["defaultCheckpointId"]);f!=null&&d(t,["defaultCheckpointId"],f);let p=c(n,["checkpoints"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(g=>g)),d(t,["checkpoints"],h)}return t}function VF(n,e){let t={},r=c(n,["mediaResolution"]);r!=null&&d(t,["mediaResolution"],r);let i=c(n,["codeExecutionResult"]);i!=null&&d(t,["codeExecutionResult"],i);let o=c(n,["executableCode"]);o!=null&&d(t,["executableCode"],o);let s=c(n,["fileData"]);s!=null&&d(t,["fileData"],Z1(s));let a=c(n,["functionCall"]);a!=null&&d(t,["functionCall"],Q1(a));let l=c(n,["functionResponse"]);l!=null&&d(t,["functionResponse"],l);let u=c(n,["inlineData"]);u!=null&&d(t,["inlineData"],S1(u));let f=c(n,["text"]);f!=null&&d(t,["text"],f);let p=c(n,["thought"]);p!=null&&d(t,["thought"],p);let h=c(n,["thoughtSignature"]);h!=null&&d(t,["thoughtSignature"],h);let g=c(n,["videoMetadata"]);return g!=null&&d(t,["videoMetadata"],g),t}function BF(n,e){let t={},r=c(n,["productImage"]);return r!=null&&d(t,["image"],ln(r)),t}function UF(n,e,t){let r={},i=c(n,["numberOfImages"]);e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i);let o=c(n,["baseSteps"]);e!==void 0&&o!=null&&d(e,["parameters","baseSteps"],o);let s=c(n,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);let a=c(n,["seed"]);e!==void 0&&a!=null&&d(e,["parameters","seed"],a);let l=c(n,["safetyFilterLevel"]);e!==void 0&&l!=null&&d(e,["parameters","safetySetting"],l);let u=c(n,["personGeneration"]);e!==void 0&&u!=null&&d(e,["parameters","personGeneration"],u);let f=c(n,["addWatermark"]);e!==void 0&&f!=null&&d(e,["parameters","addWatermark"],f);let p=c(n,["outputMimeType"]);e!==void 0&&p!=null&&d(e,["parameters","outputOptions","mimeType"],p);let h=c(n,["outputCompressionQuality"]);e!==void 0&&h!=null&&d(e,["parameters","outputOptions","compressionQuality"],h);let g=c(n,["enhancePrompt"]);e!==void 0&&g!=null&&d(e,["parameters","enhancePrompt"],g);let m=c(n,["labels"]);return e!==void 0&&m!=null&&d(e,["labels"],m),r}function HF(n,e,t){let r={},i=c(e,["model"]);i!=null&&d(r,["_url","model"],pe(n,i));let o=c(e,["source"]);o!=null&&GF(o,r);let s=c(e,["config"]);return s!=null&&UF(s,r),r}function $F(n,e){let t={},r=c(n,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>bu(o))),d(t,["generatedImages"],i)}return t}function GF(n,e,t){let r={},i=c(n,["prompt"]);e!==void 0&&i!=null&&d(e,["instances[0]","prompt"],i);let o=c(n,["personImage"]);e!==void 0&&o!=null&&d(e,["instances[0]","personImage","image"],ln(o));let s=c(n,["productImages"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>BF(l))),d(e,["instances[0]","productImages"],a)}return r}function qF(n,e){let t={},r=c(n,["referenceImage"]);r!=null&&d(t,["referenceImage"],ln(r));let i=c(n,["referenceId"]);i!=null&&d(t,["referenceId"],i);let o=c(n,["referenceType"]);o!=null&&d(t,["referenceType"],o);let s=c(n,["maskImageConfig"]);s!=null&&d(t,["maskImageConfig"],LF(s));let a=c(n,["controlImageConfig"]);a!=null&&d(t,["controlImageConfig"],x1(a));let l=c(n,["styleImageConfig"]);l!=null&&d(t,["styleImageConfig"],l);let u=c(n,["subjectImageConfig"]);return u!=null&&d(t,["subjectImageConfig"],u),t}function YD(n,e){let t={},r=c(n,["safetyAttributes","categories"]);r!=null&&d(t,["categories"],r);let i=c(n,["safetyAttributes","scores"]);i!=null&&d(t,["scores"],i);let o=c(n,["contentType"]);return o!=null&&d(t,["contentType"],o),t}function ZD(n,e){let t={},r=c(n,["safetyAttributes","categories"]);r!=null&&d(t,["categories"],r);let i=c(n,["safetyAttributes","scores"]);i!=null&&d(t,["scores"],i);let o=c(n,["contentType"]);return o!=null&&d(t,["contentType"],o),t}function zF(n,e){let t={},r=c(n,["category"]);if(r!=null&&d(t,["category"],r),c(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=c(n,["threshold"]);return i!=null&&d(t,["threshold"],i),t}function WF(n,e){let t={},r=c(n,["image"]);return r!=null&&d(t,["image"],ln(r)),t}function jF(n,e,t){let r={},i=c(n,["mode"]);e!==void 0&&i!=null&&d(e,["parameters","mode"],i);let o=c(n,["maxPredictions"]);e!==void 0&&o!=null&&d(e,["parameters","maxPredictions"],o);let s=c(n,["confidenceThreshold"]);e!==void 0&&s!=null&&d(e,["parameters","confidenceThreshold"],s);let a=c(n,["maskDilation"]);e!==void 0&&a!=null&&d(e,["parameters","maskDilation"],a);let l=c(n,["binaryColorThreshold"]);e!==void 0&&l!=null&&d(e,["parameters","binaryColorThreshold"],l);let u=c(n,["labels"]);return e!==void 0&&u!=null&&d(e,["labels"],u),r}function KF(n,e,t){let r={},i=c(e,["model"]);i!=null&&d(r,["_url","model"],pe(n,i));let o=c(e,["source"]);o!=null&&YF(o,r);let s=c(e,["config"]);return s!=null&&jF(s,r),r}function JF(n,e){let t={},r=c(n,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>EF(o))),d(t,["generatedMasks"],i)}return t}function YF(n,e,t){let r={},i=c(n,["prompt"]);e!==void 0&&i!=null&&d(e,["instances[0]","prompt"],i);let o=c(n,["image"]);e!==void 0&&o!=null&&d(e,["instances[0]","image"],ln(o));let s=c(n,["scribbleImage"]);return e!==void 0&&s!=null&&d(e,["instances[0]","scribble"],WF(s)),r}function ZF(n,e){let t={},r=c(n,["retrievalConfig"]);r!=null&&d(t,["retrievalConfig"],r);let i=c(n,["functionCallingConfig"]);return i!=null&&d(t,["functionCallingConfig"],X1(i)),t}function QF(n,e){let t={};if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let r=c(n,["computerUse"]);r!=null&&d(t,["computerUse"],r);let i=c(n,["fileSearch"]);i!=null&&d(t,["fileSearch"],i);let o=c(n,["codeExecution"]);if(o!=null&&d(t,["codeExecution"],o),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=c(n,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>h)),d(t,["functionDeclarations"],p)}let a=c(n,["googleMaps"]);a!=null&&d(t,["googleMaps"],IF(a));let l=c(n,["googleSearch"]);l!=null&&d(t,["googleSearch"],bF(l));let u=c(n,["googleSearchRetrieval"]);u!=null&&d(t,["googleSearchRetrieval"],u);let f=c(n,["urlContext"]);return f!=null&&d(t,["urlContext"],f),t}function QD(n,e){let t={},r=c(n,["retrieval"]);r!=null&&d(t,["retrieval"],r);let i=c(n,["computerUse"]);if(i!=null&&d(t,["computerUse"],i),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=c(n,["codeExecution"]);o!=null&&d(t,["codeExecution"],o);let s=c(n,["enterpriseWebSearch"]);s!=null&&d(t,["enterpriseWebSearch"],s);let a=c(n,["functionDeclarations"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(g=>eF(g))),d(t,["functionDeclarations"],h)}let l=c(n,["googleMaps"]);l!=null&&d(t,["googleMaps"],l);let u=c(n,["googleSearch"]);u!=null&&d(t,["googleSearch"],u);let f=c(n,["googleSearchRetrieval"]);f!=null&&d(t,["googleSearchRetrieval"],f);let p=c(n,["urlContext"]);return p!=null&&d(t,["urlContext"],p),t}function XF(n,e){let t={},r=c(n,["baseModel"]);r!=null&&d(t,["baseModel"],r);let i=c(n,["createTime"]);i!=null&&d(t,["createTime"],i);let o=c(n,["updateTime"]);return o!=null&&d(t,["updateTime"],o),t}function eO(n,e){let t={},r=c(n,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&d(t,["baseModel"],r);let i=c(n,["createTime"]);i!=null&&d(t,["createTime"],i);let o=c(n,["updateTime"]);return o!=null&&d(t,["updateTime"],o),t}function tO(n,e,t){let r={},i=c(n,["displayName"]);e!==void 0&&i!=null&&d(e,["displayName"],i);let o=c(n,["description"]);e!==void 0&&o!=null&&d(e,["description"],o);let s=c(n,["defaultCheckpointId"]);return e!==void 0&&s!=null&&d(e,["defaultCheckpointId"],s),r}function nO(n,e,t){let r={},i=c(n,["displayName"]);e!==void 0&&i!=null&&d(e,["displayName"],i);let o=c(n,["description"]);e!==void 0&&o!=null&&d(e,["description"],o);let s=c(n,["defaultCheckpointId"]);return e!==void 0&&s!=null&&d(e,["defaultCheckpointId"],s),r}function rO(n,e,t){let r={},i=c(e,["model"]);i!=null&&d(r,["_url","name"],pe(n,i));let o=c(e,["config"]);return o!=null&&tO(o,r),r}function iO(n,e,t){let r={},i=c(e,["model"]);i!=null&&d(r,["_url","model"],pe(n,i));let o=c(e,["config"]);return o!=null&&nO(o,r),r}function oO(n,e,t){let r={},i=c(n,["outputGcsUri"]);e!==void 0&&i!=null&&d(e,["parameters","storageUri"],i);let o=c(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&d(e,["parameters","safetySetting"],o);let s=c(n,["personGeneration"]);e!==void 0&&s!=null&&d(e,["parameters","personGeneration"],s);let a=c(n,["includeRaiReason"]);e!==void 0&&a!=null&&d(e,["parameters","includeRaiReason"],a);let l=c(n,["outputMimeType"]);e!==void 0&&l!=null&&d(e,["parameters","outputOptions","mimeType"],l);let u=c(n,["outputCompressionQuality"]);e!==void 0&&u!=null&&d(e,["parameters","outputOptions","compressionQuality"],u);let f=c(n,["enhanceInputImage"]);e!==void 0&&f!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],f);let p=c(n,["imagePreservationFactor"]);e!==void 0&&p!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],p);let h=c(n,["labels"]);e!==void 0&&h!=null&&d(e,["labels"],h);let g=c(n,["numberOfImages"]);e!==void 0&&g!=null&&d(e,["parameters","sampleCount"],g);let m=c(n,["mode"]);return e!==void 0&&m!=null&&d(e,["parameters","mode"],m),r}function sO(n,e,t){let r={},i=c(e,["model"]);i!=null&&d(r,["_url","model"],pe(n,i));let o=c(e,["image"]);o!=null&&d(r,["instances[0]","image"],ln(o));let s=c(e,["upscaleFactor"]);s!=null&&d(r,["parameters","upscaleConfig","upscaleFactor"],s);let a=c(e,["config"]);return a!=null&&oO(a,r),r}function aO(n,e){let t={},r=c(n,["sdkHttpResponse"]);r!=null&&d(t,["sdkHttpResponse"],r);let i=c(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>bu(s))),d(t,["generatedImages"],o)}return t}function lO(n,e){let t={},r=c(n,["uri"]);r!=null&&d(t,["uri"],r);let i=c(n,["encodedVideo"]);i!=null&&d(t,["videoBytes"],dr(i));let o=c(n,["encoding"]);return o!=null&&d(t,["mimeType"],o),t}function cO(n,e){let t={},r=c(n,["gcsUri"]);r!=null&&d(t,["uri"],r);let i=c(n,["bytesBase64Encoded"]);i!=null&&d(t,["videoBytes"],dr(i));let o=c(n,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function uO(n,e){let t={},r=c(n,["image"]);r!=null&&d(t,["_self"],ln(r));let i=c(n,["maskMode"]);return i!=null&&d(t,["maskMode"],i),t}function dO(n,e){let t={},r=c(n,["image"]);r!=null&&d(t,["image"],Au(r));let i=c(n,["referenceType"]);return i!=null&&d(t,["referenceType"],i),t}function fO(n,e){let t={},r=c(n,["image"]);r!=null&&d(t,["image"],ln(r));let i=c(n,["referenceType"]);return i!=null&&d(t,["referenceType"],i),t}function XD(n,e){let t={},r=c(n,["uri"]);r!=null&&d(t,["uri"],r);let i=c(n,["videoBytes"]);i!=null&&d(t,["encodedVideo"],dr(i));let o=c(n,["mimeType"]);return o!=null&&d(t,["encoding"],o),t}function eS(n,e){let t={},r=c(n,["uri"]);r!=null&&d(t,["gcsUri"],r);let i=c(n,["videoBytes"]);i!=null&&d(t,["bytesBase64Encoded"],dr(i));let o=c(n,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function pO(n,e){let t={},r=c(n,["displayName"]);return e!==void 0&&r!=null&&d(e,["displayName"],r),t}function hO(n){let e={},t=c(n,["config"]);return t!=null&&pO(t,e),e}function gO(n,e){let t={},r=c(n,["force"]);return e!==void 0&&r!=null&&d(e,["_query","force"],r),t}function mO(n){let e={},t=c(n,["name"]);t!=null&&d(e,["_url","name"],t);let r=c(n,["config"]);return r!=null&&gO(r,e),e}function yO(n){let e={},t=c(n,["name"]);return t!=null&&d(e,["_url","name"],t),e}function vO(n,e){let t={},r=c(n,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["customMetadata"],o)}let i=c(n,["chunkingConfig"]);return e!==void 0&&i!=null&&d(e,["chunkingConfig"],i),t}function _O(n){let e={},t=c(n,["name"]);t!=null&&d(e,["name"],t);let r=c(n,["metadata"]);r!=null&&d(e,["metadata"],r);let i=c(n,["done"]);i!=null&&d(e,["done"],i);let o=c(n,["error"]);o!=null&&d(e,["error"],o);let s=c(n,["response"]);return s!=null&&d(e,["response"],CO(s)),e}function EO(n){let e={},t=c(n,["fileSearchStoreName"]);t!=null&&d(e,["_url","file_search_store_name"],t);let r=c(n,["fileName"]);r!=null&&d(e,["fileName"],r);let i=c(n,["config"]);return i!=null&&vO(i,e),e}function CO(n){let e={},t=c(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let r=c(n,["parent"]);r!=null&&d(e,["parent"],r);let i=c(n,["documentName"]);return i!=null&&d(e,["documentName"],i),e}function DO(n,e){let t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);let i=c(n,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),t}function SO(n){let e={},t=c(n,["config"]);return t!=null&&DO(t,e),e}function wO(n){let e={},t=c(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let r=c(n,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);let i=c(n,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["fileSearchStores"],o)}return e}function tS(n,e){let t={},r=c(n,["mimeType"]);e!==void 0&&r!=null&&d(e,["mimeType"],r);let i=c(n,["displayName"]);e!==void 0&&i!=null&&d(e,["displayName"],i);let o=c(n,["customMetadata"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),d(e,["customMetadata"],a)}let s=c(n,["chunkingConfig"]);return e!==void 0&&s!=null&&d(e,["chunkingConfig"],s),t}function TO(n){let e={},t=c(n,["fileSearchStoreName"]);t!=null&&d(e,["_url","file_search_store_name"],t);let r=c(n,["config"]);return r!=null&&tS(r,e),e}function IO(n){let e={},t=c(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}var bO="Content-Type",AO="X-Server-Timeout",MO="User-Agent",Ag="x-goog-api-client",xO="1.39.0",RO=`google-genai-sdk/${xO}`,NO="v1beta1",kO="v1beta",Mg=class{constructor(e){var t,r,i;this.clientOptions=Object.assign({},e),this.customBaseUrl=(t=e.httpOptions)===null||t===void 0?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));let o={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");let a=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!a?(o.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?o.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(o.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:NO}else{if(!this.clientOptions.apiKey)throw new Ws({message:"API key must be set when using the Gemini API.",status:403});o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:kO,o.baseUrl="https://generativelanguage.googleapis.com/"}o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){let e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,r){let i=[this.getRequestUrlInternal(t)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===PD.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let r=this.shouldPrependVertexProjectPath(e,t),i=this.constructUrl(e.path,t,r);if(e.queryParams)for(let[s,a]of Object.entries(e.queryParams))i.searchParams.append(s,String(a));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,t,i.toString(),e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,t){let r=JSON.parse(JSON.stringify(e));for(let[i,o]of Object.entries(t))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let r=this.shouldPrependVertexProjectPath(e,t),i=this.constructUrl(e.path,t,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,t,i.toString(),e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,r,i){if(t&&t.timeout||i){let o=new AbortController,s=o.signal;if(t.timeout&&t?.timeout>0){let a=setTimeout(()=>o.abort(),t.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=s}return t&&t.extraBody!==null&&PO(e,t.extraBody),e.headers=await this.getHeadersInternal(t,r),e}async unaryApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await _D(i),new zs(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await _D(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return on(this,arguments,function*(){var r;let i=(r=e?.body)===null||r===void 0?void 0:r.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="",a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){let{done:u,value:f}=yield j(i.read());if(u){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let p=o.decode(f,{stream:!0});try{let m=JSON.parse(p);if("error"in m){let y=JSON.parse(JSON.stringify(m.error)),_=y.status,E=y.code,I=`got status: ${_}. ${JSON.stringify(m)}`;if(E>=400&&E<600)throw new Ws({message:I,status:E})}}catch(m){if(m.name==="ApiError")throw m}s+=p;let h=-1,g=0;for(;;){h=-1,g=0;for(let _ of l){let E=s.indexOf(_);E!==-1&&(h===-1||E<h)&&(h=E,g=_.length)}if(h===-1)break;let m=s.substring(0,h);s=s.substring(h+g);let y=m.trim();if(y.startsWith(a)){let _=y.substring(a.length).trim();try{let E=new Response(_,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield j(new zs(E))}catch(E){throw new Error(`exception parsing stream chunk ${_}. ${E}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){let e={},t=RO+" "+this.clientOptions.userAgentExtra;return e[MO]=t,e[Ag]=t,e[bO]="application/json",e}async getHeadersInternal(e,t){let r=new Headers;if(e&&e.headers){for(let[i,o]of Object.entries(e.headers))r.append(i,o);e.timeout&&e.timeout>0&&r.append(AO,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,t),r}getFileName(e){var t;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(t=r.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),r}async uploadFile(e,t){var r;let i={};t!=null&&(i.mimeType=t.mimeType,i.name=t.name,i.displayName=t.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);let o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);let a=(r=t?.mimeType)!==null&&r!==void 0?r:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;let l={file:i},u=this.getFileName(e),f=x("upload/v1beta/files",l._url),p=await this.fetchUploadUrl(f,i.sizeBytes,i.mimeType,u,l,t?.httpOptions);return o.upload(e,p,this)}async uploadFileToFileSearchStore(e,t,r){var i;let o=this.clientOptions.uploader,s=await o.stat(t),a=String(s.size),l=(i=r?.mimeType)!==null&&i!==void 0?i:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");let u=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(t),p={};r!=null&&tS(r,p);let h=await this.fetchUploadUrl(u,a,l,f,p,r?.httpOptions);return o.uploadToFileSearchStore(t,h,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,r,i,o,s){var a;let l={};s?l=s:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};let u=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:l});if(!u||!u?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let f=(a=u?.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}};async function _D(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){let t=n.status,r;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await n.json():r={error:{message:await n.text(),code:n.status,status:n.statusText}};let i=JSON.stringify(r);throw t>=400&&t<600?new Ws({message:i,status:t}):new Error(i)}}function PO(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{let o=JSON.parse(n.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))t=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){let a=Object.assign({},o);for(let l in s)if(Object.prototype.hasOwnProperty.call(s,l)){let u=s[l],f=a[l];u&&typeof u=="object"&&!Array.isArray(u)&&f&&typeof f=="object"&&!Array.isArray(f)?a[l]=r(f,u):(f&&u&&typeof f!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof f}, New type: ${typeof u}. Overwriting.`),a[l]=u)}return a}let i=r(t,e);n.body=JSON.stringify(i)}var FO="mcp_used/unknown",OO=!1;function nS(n){for(let e of n)if(LO(e)||typeof e=="object"&&"inputSchema"in e)return!0;return OO}function rS(n){var e;let t=(e=n[Ag])!==null&&e!==void 0?e:"";n[Ag]=(t+` ${FO}`).trimStart()}function LO(n){return n!==null&&typeof n=="object"&&n instanceof xg}function VO(n){return on(this,arguments,function*(t,r=100){let i,o=0;for(;o<r;){let s=yield j(t.listTools({cursor:i}));for(let a of s.tools)yield yield j(a),o++;if(!s.nextCursor)break;i=s.nextCursor}})}var xg=class n{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new n(e,t)}async initialize(){var e,t,r,i;if(this.mcpTools.length>0)return;let o={},s=[];for(let f of this.mcpClients)try{for(var a=!0,l=(t=void 0,sn(VO(f))),u;u=await l.next(),e=u.done,!e;a=!0){i=u.value,a=!1;let p=i;s.push(p);let h=p.name;if(o[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);o[h]=f}}catch(p){t={error:p}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(t)throw t.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),_k(this.mcpTools,this.config)}async callTool(e){await this.initialize();let t=[];for(let r of e)if(r.name in this.functionNameToMcpClient){let i=this.functionNameToMcpClient[r.name],o;this.config.timeout&&(o={timeout:this.config.timeout});let s=await i.callTool({name:r.name,arguments:r.args},void 0,o);t.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return t}};async function BO(n,e,t){let r=new yg,i;t.data instanceof Blob?i=JSON.parse(await t.data.text()):i=JSON.parse(t.data),Object.assign(r,i),e(r)}var Rg=class{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r}async connect(e){var t,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=HO(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`,u=()=>{},f=new Promise(A=>{u=A}),p=e.callbacks,h=function(){u({})},g=this.apiClient,m={onopen:h,onmessage:A=>{BO(g,p.onmessage,A)},onerror:(t=p?.onerror)!==null&&t!==void 0?t:function(A){},onclose:(r=p?.onclose)!==null&&r!==void 0?r:function(A){}},y=this.webSocketFactory.create(l,UO(s),m);y.connect(),await f;let I={setup:{model:pe(this.apiClient,e.model)}};return y.send(JSON.stringify(I)),new Ng(y,this.apiClient)}},Ng=class{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let t=p1(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});let t=f1(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){let t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Gs.PLAY)}pause(){this.sendPlaybackControl(Gs.PAUSE)}stop(){this.sendPlaybackControl(Gs.STOP)}resetContext(){this.sendPlaybackControl(Gs.RESET_CONTEXT)}close(){this.conn.close()}};function UO(n){let e={};return n.forEach((t,r)=>{e[r]=t}),e}function HO(n){let e=new Headers;for(let[t,r]of Object.entries(n))e.append(t,r);return e}var $O="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function GO(n,e,t){let r=new mg,i;t.data instanceof Blob?i=await t.data.text():t.data instanceof ArrayBuffer?i=new TextDecoder().decode(t.data):i=t.data;let o=JSON.parse(i);if(n.isVertexAI()){let s=m1(o);Object.assign(r,s)}else Object.assign(r,o);e(r)}var kg=class{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r,this.music=new Rg(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,r,i,o,s,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion(),f,p=this.apiClient.getHeaders();e.config&&e.config.tools&&nS(e.config.tools)&&rS(p);let h=WO(p);if(this.apiClient.isVertexAI()){let B=this.apiClient.getProject(),K=this.apiClient.getLocation(),Re=this.apiClient.getApiKey(),Fe=!!B&&!!K||!!Re;this.apiClient.getCustomBaseUrl()&&!Fe?f=l:(f=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,f))}else{let B=this.apiClient.getApiKey(),K="BidiGenerateContent",Re="key";B?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),K="BidiGenerateContentConstrained",Re="access_token"),f=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${K}?${Re}=${B}`}let g=()=>{},m=new Promise(B=>{g=B}),y=e.callbacks,_=function(){var B;(B=y?.onopen)===null||B===void 0||B.call(y),g({})},E=this.apiClient,I={onopen:_,onmessage:B=>{GO(E,y.onmessage,B)},onerror:(t=y?.onerror)!==null&&t!==void 0?t:function(B){},onclose:(r=y?.onclose)!==null&&r!==void 0?r:function(B){}},A=this.webSocketFactory.create(f,zO(h),I);A.connect(),await m;let b=pe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&b.startsWith("publishers/")){let B=this.apiClient.getProject(),K=this.apiClient.getLocation();B&&K&&(b=`projects/${B}/locations/${K}/`+b)}let w={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ng.AUDIO]}:e.config.responseModalities=[ng.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let H=(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],k=[];for(let B of H)if(this.isCallableTool(B)){let K=B;k.push(await K.tool())}else k.push(B);k.length>0&&(e.config.tools=k);let Q={model:b,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?w=d1(this.apiClient,Q):w=u1(this.apiClient,Q),delete w.config,A.send(JSON.stringify(w)),new Pg(A,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}},qO={turnComplete:!0},Pg=class{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let r=[];try{r=$t(t.turns),e.isVertexAI()||(r=r.map(i=>Iu(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let r=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?r=t.functionResponses:r=[t.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(let o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error($O)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},qO),e);let t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:g1(e)}:t={realtimeInput:h1(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");let t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}};function zO(n){let e={};return n.forEach((t,r)=>{e[r]=t}),e}function WO(n){let e=new Headers;for(let[t,r]of Object.entries(n))e.append(t,r);return e}var ED=10;function CD(n){var e,t,r;if(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(let s of(t=n?.tools)!==null&&t!==void 0?t:[])if(po(s)){i=!0;break}if(!i)return!0;let o=(r=n?.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function po(n){return"callTool"in n&&typeof n.callTool=="function"}function jO(n){var e,t,r;return(r=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(i=>po(i)))!==null&&r!==void 0?r:!1}function DD(n){var e;let t=[];return!((e=n?.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((r,i)=>{if(po(r))return;let o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&t.push(i)}),t}function SD(n){var e;return!(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}var Fg=class extends an{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var r,i,o,s,a;let l=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!jO(t)||CD(t.config))return await this.generateContentInternal(l);let u=DD(t);if(u.length>0){let y=u.map(_=>`tools[${_}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${y}.`)}let f,p,h=$t(l.contents),g=(o=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:ED,m=0;for(;m<g&&(f=await this.generateContentInternal(l),!(!f.functionCalls||f.functionCalls.length===0));){let y=f.candidates[0].content,_=[];for(let E of(a=(s=t.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(po(E)){let A=await E.callTool(f.functionCalls);_.push(...A)}m++,p={role:"user",parts:_},l.contents=$t(l.contents),l.contents.push(y),l.contents.push(p),SD(l.config)&&(h.push(y),h.push(p))}return SD(l.config)&&(f.automaticFunctionCallingHistory=h),f},this.generateContentStream=async t=>{var r,i,o,s,a;if(this.maybeMoveToResponseJsonSchem(t),CD(t.config)){let p=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(p)}let l=DD(t);if(l.length>0){let p=l.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let u=(o=(i=(r=t?.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,f=(a=(s=t?.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(u&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(r=>{var i;let o,s=[];if(r?.generatedImages)for(let l of r.generatedImages)l&&l?.safetyAttributes&&((i=l?.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=l?.safetyAttributes:s.push(l);let a;return o?a={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async t=>{var r;let s={config:Object.assign(Object.assign({},{queryBase:!0}),t?.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Gn(fr.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async t=>{let r={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(r.referenceImages=t.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async t=>{let r={numberOfImages:1,mode:"upscale"};t.config&&(r=Object.assign(Object.assign({},r),t.config));let i={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async t=>{var r,i,o,s,a,l;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=t.video)===null||r===void 0)&&r.uri&&(!((i=t.video)===null||i===void 0)&&i.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((s=(o=t.source)===null||o===void 0?void 0:o.video)===null||s===void 0)&&s.uri&&(!((l=(a=t.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,r,i;let o=(t=e.config)===null||t===void 0?void 0:t.tools;if(!o)return e;let s=await Promise.all(o.map(async l=>po(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(a.config.tools=s,e.config&&e.config.tools&&nS(e.config.tools)){let l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{},u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),rS(u),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return a}async initAfcToolsMap(e){var t,r,i;let o=new Map;for(let s of(r=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&r!==void 0?r:[])if(po(s)){let a=s,l=await a.tool();for(let u of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!u.name)throw new Error("Function declaration name is required.");if(o.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);o.set(u.name,a)}}return o}async processAfcStream(e){var t,r,i;let o=(i=(r=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:ED,s=!1,a=0,l=await this.initAfcToolsMap(e);return(function(u,f,p){return on(this,arguments,function*(){for(var h,g,m,y,_,E;a<o;){s&&(a++,s=!1);let w=yield j(u.processParamsMaybeAddMcpUsage(p)),H=yield j(u.generateContentStreamInternal(w)),k=[],Q=[];try{for(var I=!0,A=(g=void 0,sn(H)),b;b=yield j(A.next()),h=b.done,!h;I=!0){y=b.value,I=!1;let B=y;if(yield yield j(B),B.candidates&&(!((_=B.candidates[0])===null||_===void 0)&&_.content)){Q.push(B.candidates[0].content);for(let K of(E=B.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(a<o&&K.functionCall){if(!K.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(K.functionCall.name)){let Re=yield j(f.get(K.functionCall.name).callTool([K.functionCall]));k.push(...Re)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${K.functionCall.name}`)}}}}catch(B){g={error:B}}finally{try{!I&&!h&&(m=A.return)&&(yield j(m.call(A)))}finally{if(g)throw g.error}}if(k.length>0){s=!0;let B=new ai;B.candidates=[{content:{role:"user",parts:k}}],yield yield j(B);let K=[];K.push(...Q),K.push({role:"user",parts:k});let Re=$t(p.contents).concat(K);p.contents=Re}else break}})})(this,l,e)}async generateContentInternal(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=mD(this.apiClient,e);return a=x("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=vD(f),h=new ai;return Object.assign(h,p),h})}else{let u=gD(this.apiClient,e);return a=x("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=yD(f),h=new ai;return Object.assign(h,p),h})}}async generateContentStreamInternal(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=mD(this.apiClient,e);return a=x("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return on(this,arguments,function*(){var h,g,m,y;try{for(var _=!0,E=sn(p),I;I=yield j(E.next()),h=I.done,!h;_=!0){y=I.value,_=!1;let A=y,b=vD(yield j(A.json()),e);b.sdkHttpResponse={headers:A.headers};let w=new ai;Object.assign(w,b),yield yield j(w)}}catch(A){g={error:A}}finally{try{!_&&!h&&(m=E.return)&&(yield j(m.call(E)))}finally{if(g)throw g.error}}})})}else{let u=gD(this.apiClient,e);return a=x("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(p){return on(this,arguments,function*(){var h,g,m,y;try{for(var _=!0,E=sn(p),I;I=yield j(E.next()),h=I.done,!h;_=!0){y=I.value,_=!1;let A=y,b=yD(yield j(A.json()),e);b.sdkHttpResponse={headers:A.headers};let w=new ai;Object.assign(w,b),yield yield j(w)}}catch(A){g={error:A}}finally{try{!_&&!h&&(m=E.return)&&(yield j(m.call(E)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=j1(this.apiClient,e);return a=x("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=J1(f),h=new Xc;return Object.assign(h,p),h})}else{let u=W1(this.apiClient,e);return a=x("{model}:batchEmbedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=K1(f),h=new Xc;return Object.assign(h,p),h})}}async generateImagesInternal(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=sF(this.apiClient,e);return a=x("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=lF(f),h=new eu;return Object.assign(h,p),h})}else{let u=oF(this.apiClient,e);return a=x("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=aF(f),h=new eu;return Object.assign(h,p),h})}}async editImageInternal(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI()){let a=$1(this.apiClient,e);return o=x("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:l.headers},f})),i.then(l=>{let u=G1(l),f=new rg;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI()){let a=sO(this.apiClient,e);return o=x("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:l.headers},f})),i.then(l=>{let u=aO(l),f=new ig;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI()){let a=HF(this.apiClient,e);return o=x("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let u=$F(l),f=new og;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI()){let a=KF(this.apiClient,e);return o=x("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let u=JF(l),f=new sg;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=TF(this.apiClient,e);return a=x("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>bg(f))}else{let u=wF(this.apiClient,e);return a=x("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Ig(f))}}async listInternal(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=PF(this.apiClient,e);return a=x("{models_url}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=OF(f),h=new tu;return Object.assign(h,p),h})}else{let u=kF(this.apiClient,e);return a=x("{models_url}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=FF(f),h=new tu;return Object.assign(h,p),h})}}async update(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=iO(this.apiClient,e);return a=x("{model}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>bg(f))}else{let u=rO(this.apiClient,e);return a=x("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Ig(f))}}async delete(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=V1(this.apiClient,e);return a=x("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=U1(f),h=new nu;return Object.assign(h,p),h})}else{let u=L1(this.apiClient,e);return a=x("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=B1(f),h=new nu;return Object.assign(h,p),h})}}async countTokens(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=P1(this.apiClient,e);return a=x("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=O1(f),h=new ru;return Object.assign(h,p),h})}else{let u=k1(this.apiClient,e);return a=x("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=F1(f),h=new ru;return Object.assign(h,p),h})}}async computeTokens(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI()){let a=I1(this.apiClient,e);return o=x("{model}:computeTokens",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:l.headers},f})),i.then(l=>{let u=b1(l),f=new ag;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=hF(this.apiClient,e);return a=x("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{let p=fF(f),h=new iu;return Object.assign(h,p),h})}else{let u=pF(this.apiClient,e);return a=x("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{let p=dF(f),h=new iu;return Object.assign(h,p),h})}}};var Og=class extends an{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let i=t.name.split("/operations/")[0],o;r&&"httpOptions"in r&&(o=r.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let i=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){let t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let i=t.name.split("/operations/")[0],o;r&&"httpOptions"in r&&(o=r.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let i=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=sk(e);return a=x("{operationName}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s}else{let u=ok(e);return a=x("{operationName}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI()){let a=QN(e);return o=x("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}};function KO(n){let e={},t=c(n,["data"]);if(t!=null&&d(e,["data"],t),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=c(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function JO(n){let e={},t=c(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>iL(o))),d(e,["parts"],i)}let r=c(n,["role"]);return r!=null&&d(e,["role"],r),e}function YO(n,e,t){let r={},i=c(e,["expireTime"]);t!==void 0&&i!=null&&d(t,["expireTime"],i);let o=c(e,["newSessionExpireTime"]);t!==void 0&&o!=null&&d(t,["newSessionExpireTime"],o);let s=c(e,["uses"]);t!==void 0&&s!=null&&d(t,["uses"],s);let a=c(e,["liveConnectConstraints"]);t!==void 0&&a!=null&&d(t,["bidiGenerateContentSetup"],rL(n,a));let l=c(e,["lockAdditionalFields"]);return t!==void 0&&l!=null&&d(t,["fieldMask"],l),r}function ZO(n,e){let t={},r=c(e,["config"]);return r!=null&&d(t,["config"],YO(n,r,t)),t}function QO(n){let e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=c(n,["fileUri"]);t!=null&&d(e,["fileUri"],t);let r=c(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function XO(n){let e={},t=c(n,["id"]);t!=null&&d(e,["id"],t);let r=c(n,["args"]);r!=null&&d(e,["args"],r);let i=c(n,["name"]);if(i!=null&&d(e,["name"],i),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function eL(n){let e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=c(n,["enableWidget"]);return t!=null&&d(e,["enableWidget"],t),e}function tL(n){let e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=c(n,["timeRangeFilter"]);return t!=null&&d(e,["timeRangeFilter"],t),e}function nL(n,e){let t={},r=c(n,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],r);let i=c(n,["responseModalities"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig","responseModalities"],i);let o=c(n,["temperature"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","temperature"],o);let s=c(n,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);let a=c(n,["topK"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","topK"],a);let l=c(n,["maxOutputTokens"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","maxOutputTokens"],l);let u=c(n,["mediaResolution"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","mediaResolution"],u);let f=c(n,["seed"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","seed"],f);let p=c(n,["speechConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","speechConfig"],im(p));let h=c(n,["thinkingConfig"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","thinkingConfig"],h);let g=c(n,["enableAffectiveDialog"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],g);let m=c(n,["systemInstruction"]);e!==void 0&&m!=null&&d(e,["setup","systemInstruction"],JO(nt(m)));let y=c(n,["tools"]);if(e!==void 0&&y!=null){let H=yo(y);Array.isArray(H)&&(H=H.map(k=>sL(mo(k)))),d(e,["setup","tools"],H)}let _=c(n,["sessionResumption"]);e!==void 0&&_!=null&&d(e,["setup","sessionResumption"],oL(_));let E=c(n,["inputAudioTranscription"]);e!==void 0&&E!=null&&d(e,["setup","inputAudioTranscription"],E);let I=c(n,["outputAudioTranscription"]);e!==void 0&&I!=null&&d(e,["setup","outputAudioTranscription"],I);let A=c(n,["realtimeInputConfig"]);e!==void 0&&A!=null&&d(e,["setup","realtimeInputConfig"],A);let b=c(n,["contextWindowCompression"]);e!==void 0&&b!=null&&d(e,["setup","contextWindowCompression"],b);let w=c(n,["proactivity"]);if(e!==void 0&&w!=null&&d(e,["setup","proactivity"],w),c(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function rL(n,e){let t={},r=c(e,["model"]);r!=null&&d(t,["setup","model"],pe(n,r));let i=c(e,["config"]);return i!=null&&d(t,["config"],nL(i,t)),t}function iL(n){let e={},t=c(n,["mediaResolution"]);t!=null&&d(e,["mediaResolution"],t);let r=c(n,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);let i=c(n,["executableCode"]);i!=null&&d(e,["executableCode"],i);let o=c(n,["fileData"]);o!=null&&d(e,["fileData"],QO(o));let s=c(n,["functionCall"]);s!=null&&d(e,["functionCall"],XO(s));let a=c(n,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);let l=c(n,["inlineData"]);l!=null&&d(e,["inlineData"],KO(l));let u=c(n,["text"]);u!=null&&d(e,["text"],u);let f=c(n,["thought"]);f!=null&&d(e,["thought"],f);let p=c(n,["thoughtSignature"]);p!=null&&d(e,["thoughtSignature"],p);let h=c(n,["videoMetadata"]);return h!=null&&d(e,["videoMetadata"],h),e}function oL(n){let e={},t=c(n,["handle"]);if(t!=null&&d(e,["handle"],t),c(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function sL(n){let e={};if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let t=c(n,["computerUse"]);t!=null&&d(e,["computerUse"],t);let r=c(n,["fileSearch"]);r!=null&&d(e,["fileSearch"],r);let i=c(n,["codeExecution"]);if(i!=null&&d(e,["codeExecution"],i),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let o=c(n,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(p=>p)),d(e,["functionDeclarations"],f)}let s=c(n,["googleMaps"]);s!=null&&d(e,["googleMaps"],eL(s));let a=c(n,["googleSearch"]);a!=null&&d(e,["googleSearch"],tL(a));let l=c(n,["googleSearchRetrieval"]);l!=null&&d(e,["googleSearchRetrieval"],l);let u=c(n,["urlContext"]);return u!=null&&d(e,["urlContext"],u),e}function aL(n){let e=[];for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t)){let r=n[t];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){let i=Object.keys(r).map(o=>`${t}.${o}`);e.push(...i)}else e.push(t)}return e.join(",")}function lL(n,e){let t=null,r=n.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){let o=r.setup;typeof o=="object"&&o!==null?(n.bidiGenerateContentSetup=o,t=o):delete n.bidiGenerateContentSetup}else r!==void 0&&delete n.bidiGenerateContentSetup;let i=n.fieldMask;if(t){let o=aL(t);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)o?n.fieldMask=o:delete n.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){let s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],a=[];i.length>0&&(a=i.map(u=>s.includes(u)?`generationConfig.${u}`:u));let l=[];o&&l.push(o),a.length>0&&l.push(...a),l.length>0?n.fieldMask=l.join(","):delete n.fieldMask}else delete n.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?n.fieldMask=i.join(","):delete n.fieldMask;return n}var Lg=class extends an{constructor(e){super(),this.apiClient=e}async create(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let a=ZO(this.apiClient,e);o=x("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;let l=lL(a,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}};function cL(n,e){let t={},r=c(n,["force"]);return e!==void 0&&r!=null&&d(e,["_query","force"],r),t}function uL(n){let e={},t=c(n,["name"]);t!=null&&d(e,["_url","name"],t);let r=c(n,["config"]);return r!=null&&cL(r,e),e}function dL(n){let e={},t=c(n,["name"]);return t!=null&&d(e,["_url","name"],t),e}function fL(n,e){let t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);let i=c(n,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),t}function pL(n){let e={},t=c(n,["parent"]);t!=null&&d(e,["_url","parent"],t);let r=c(n,["config"]);return r!=null&&fL(r,e),e}function hL(n){let e={},t=c(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let r=c(n,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);let i=c(n,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["documents"],o)}return e}var Vg=class extends an{constructor(e){super(),this.apiClient=e,this.list=async t=>new Gn(fr.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:t.parent,config:r.config}),await this.listInternal(t),t)}async get(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=dL(e);return o=x("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var t,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=uL(e);i=x("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=pL(e);return o=x("{parent}/documents",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let u=hL(l),f=new lg;return Object.assign(f,u),f})}}};var Bg=class extends an{constructor(e,t=new Vg(e)){super(),this.apiClient=e,this.documents=t,this.list=async(r={})=>new Gn(fr.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=hO(e);return o=x("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async get(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=yO(e);return o=x("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var t,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=mO(e);i=x("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=SO(e);return o=x("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let u=wO(l),f=new cg;return Object.assign(f,u),f})}}async uploadToFileSearchStoreInternal(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=TO(e);return o=x("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let u=IO(l),f=new ug;return Object.assign(f,u),f})}}async importFile(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=EO(e);return o=x("{file_search_store_name}:importFile",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let u=_O(l),f=new dg;return Object.assign(f,u),f})}}};var iS=function(){let{crypto:n}=globalThis;if(n?.randomUUID)return iS=n.randomUUID.bind(n),n.randomUUID();let e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^t()&15>>+r/4).toString(16))},gL=()=>iS();function Ug(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}var Hg=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){let e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};var St=class extends Error{},wt=class n extends St{constructor(e,t,r,i){super(`${n.makeMessage(e,t,r)}`),this.status=e,this.headers=i,this.error=t}static makeMessage(e,t,r){let i=t?.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,t,r,i){if(!e||!i)return new ho({message:r,cause:Hg(t)});let o=t;return e===400?new pu(e,o,r,i):e===401?new hu(e,o,r,i):e===403?new gu(e,o,r,i):e===404?new mu(e,o,r,i):e===409?new yu(e,o,r,i):e===422?new vu(e,o,r,i):e===429?new _u(e,o,r,i):e>=500?new Eu(e,o,r,i):new n(e,o,r,i)}},js=class extends wt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},ho=class extends wt{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}},fu=class extends ho{constructor({message:e}={}){super({message:e??"Request timed out."})}},pu=class extends wt{},hu=class extends wt{},gu=class extends wt{},mu=class extends wt{},yu=class extends wt{},vu=class extends wt{},_u=class extends wt{},Eu=class extends wt{};var mL=/^[a-z][a-z0-9+.-]*:/i,yL=n=>mL.test(n),$g=n=>($g=Array.isArray,$g(n)),vL=$g,_L=vL,wD=_L;function EL(n){if(!n)return!0;for(let e in n)return!1;return!0}function CL(n,e){return Object.prototype.hasOwnProperty.call(n,e)}var DL=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new St(`${n} must be an integer`);if(e<0)throw new St(`${n} must be a positive integer`);return e},SL=n=>{try{return JSON.parse(n)}catch{return}};var wL=n=>new Promise(e=>setTimeout(e,n));var uo="0.0.1";function TL(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}var IL=()=>{var n,e,t,r,i;let o=TL();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":uo,"X-Stainless-OS":ID(Deno.build.os),"X-Stainless-Arch":TD(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":uo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":uo,"X-Stainless-OS":ID((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":TD((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};let s=bL();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":uo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":uo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function bL(){if(typeof navigator>"u"||!navigator)return null;let n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:t}of n){let r=t.exec(navigator.userAgent);if(r){let i=r[1]||0,o=r[2]||0,s=r[3]||0;return{browser:e,version:`${i}.${o}.${s}`}}}return null}var TD=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",ID=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown"),Wc,AL=()=>Wc??(Wc=IL());function ML(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function oS(...n){let e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function xL(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return oS({start(){},async pull(t){let{done:r,value:i}=await e.next();r?t.close():t.enqueue(i)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function sS(n){if(n[Symbol.asyncIterator])return n;let e=n.getReader();return{async next(){try{let t=await e.read();return t?.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){let t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function RL(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}let r=n.getReader(),i=r.cancel();r.releaseLock(),await i}var NL=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});var aS=()=>{var n;if(typeof File>"u"){let{process:e}=globalThis,t=typeof((n=e?.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Qh(n,e,t){return aS(),new File(n,e??"unknown_file",t)}function kL(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}var PL=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";var lS=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",FL=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&lS(n),OL=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function LL(n,e,t){if(aS(),n=await n,FL(n))return n instanceof File?n:Qh([await n.arrayBuffer()],n.name);if(OL(n)){let i=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Qh(await Gg(i),e,t)}let r=await Gg(n);if(e||(e=kL(n)),!t?.type){let i=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(t=Object.assign(Object.assign({},t),{type:i}))}return Qh(r,e,t)}async function Gg(n){var e,t,r,i,o;let s=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)s.push(n);else if(lS(n))s.push(n instanceof Blob?n:await n.arrayBuffer());else if(PL(n))try{for(var a=!0,l=sn(n),u;u=await l.next(),e=u.done,!e;a=!0){i=u.value,a=!1;let f=i;s.push(...await Gg(f))}}catch(f){t={error:f}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(t)throw t.error}}else{let f=(o=n?.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof n}${f?`; constructor: ${f}`:""}${VL(n)}`)}return s}function VL(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}var BL=(()=>{class n{constructor(t){this._client=t}}n._key=[];return n})();function cS(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var bD=Object.freeze(Object.create(null)),UL=(n=cS)=>function(t,...r){if(t.length===1)return t[0];let i=!1,o=[],s=t.reduce((f,p,h)=>{var g,m,y;/[?#]/.test(p)&&(i=!0);let _=r[h],E=(i?encodeURIComponent:n)(""+_);return h!==r.length&&(_==null||typeof _=="object"&&_.toString===((y=Object.getPrototypeOf((m=Object.getPrototypeOf((g=_.hasOwnProperty)!==null&&g!==void 0?g:bD))!==null&&m!==void 0?m:bD))===null||y===void 0?void 0:y.toString))&&(E=_+"",o.push({start:f.length+p.length,length:E.length,error:`Value of type ${Object.prototype.toString.call(_).slice(8,-1)} is not a valid path parameter`})),f+p+(h===r.length?"":E)},""),a=s.split(/[?#]/,1)[0],l=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,u;for(;(u=l.exec(a))!==null;)o.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(o.sort((f,p)=>f.start-p.start),o.length>0){let f=0,p=o.reduce((h,g)=>{let m=" ".repeat(g.start-f),y="^".repeat(g.length);return f=g.start+g.length,h+m+y},"");throw new St(`Path parameters result in path with invalid segments:
${o.map(h=>h.error).join(`
`)}
${s}
${p}`)}return s},jc=UL(cS);var Cu=class extends BL{create(e,t){var r;let{api_version:i=this._client.apiVersion}=e,o=du(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new St("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new St("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(jc`/${i}/interactions`,Object.assign(Object.assign({body:o},t),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,t={},r){let{api_version:i=this._client.apiVersion}=t??{};return this._client.delete(jc`/${i}/interactions/${e}`,r)}cancel(e,t={},r){let{api_version:i=this._client.apiVersion}=t??{};return this._client.post(jc`/${i}/interactions/${e}/cancel`,r)}get(e,t={},r){var i;let o=t??{},{api_version:s=this._client.apiVersion}=o,a=du(o,["api_version"]);return this._client.get(jc`/${s}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(i=t?.stream)!==null&&i!==void 0?i:!1}))}};Cu._key=Object.freeze(["interactions"]);var Du=class extends Cu{};function HL(n){let e=0;for(let i of n)e+=i.length;let t=new Uint8Array(e),r=0;for(let i of n)t.set(i,r),r+=i.length;return t}var Kc;function om(n){let e;return(Kc??(e=new globalThis.TextEncoder,Kc=e.encode.bind(e)))(n)}var Jc;function AD(n){let e;return(Jc??(e=new globalThis.TextDecoder,Jc=e.decode.bind(e)))(n)}var go=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];let t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?om(e):e;this.buffer=HL([this.buffer,t]);let r=[],i;for(;(i=$L(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(AD(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}let o=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,s=AD(this.buffer.subarray(0,o));r.push(s),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}};go.NEWLINE_CHARS=new Set([`
`,"\r"]);go.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function $L(n,e){for(let i=e??0;i<n.length;i++){if(n[i]===10)return{preceding:i,index:i+1,carriage:!1};if(n[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function GL(n){for(let r=0;r<n.length-1;r++){if(n[r]===10&&n[r+1]===10||n[r]===13&&n[r+1]===13)return r+2;if(n[r]===13&&n[r+1]===10&&r+3<n.length&&n[r+2]===13&&n[r+3]===10)return r+4}return-1}var Su={off:0,error:200,warn:300,info:400,debug:500},MD=(n,e,t)=>{if(n){if(CL(Su,n))return n;pt(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Su))}`)}};function qs(){}function Yc(n,e,t){return!e||Su[n]>Su[t]?qs:e[n].bind(e)}var qL={error:qs,warn:qs,info:qs,debug:qs},xD=new WeakMap;function pt(n){var e;let t=n.logger,r=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return qL;let i=xD.get(t);if(i&&i[0]===r)return i[1];let o={error:Yc("error",t,r),warn:Yc("warn",t,r),info:Yc("info",t,r),debug:Yc("debug",t,r)};return xD.set(t,[r,o]),o}var si=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);var qg=class n{constructor(e,t,r){this.iterator=e,this.controller=t,this.client=r}static fromSSEResponse(e,t,r){let i=!1,o=r?pt(r):console;function s(){return on(this,arguments,function*(){var l,u,f,p;if(i)throw new St("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let h=!1;try{try{for(var g=!0,m=sn(zL(e,t)),y;y=yield j(m.next()),l=y.done,!l;g=!0){p=y.value,g=!1;let _=p;if(!h)if(_.data.startsWith("[DONE]")){h=!0;continue}else try{yield yield j(JSON.parse(_.data))}catch(E){throw o.error("Could not parse message into JSON:",_.data),o.error("From chunk:",_.raw),E}}}catch(_){u={error:_}}finally{try{!g&&!l&&(f=m.return)&&(yield j(f.call(m)))}finally{if(u)throw u.error}}h=!0}catch(_){if(Ug(_))return yield j(void 0);throw _}finally{h||t.abort()}})}return new n(s,t,r)}static fromReadableStream(e,t,r){let i=!1;function o(){return on(this,arguments,function*(){var l,u,f,p;let h=new go,g=sS(e);try{for(var m=!0,y=sn(g),_;_=yield j(y.next()),l=_.done,!l;m=!0){p=_.value,m=!1;let E=p;for(let I of h.decode(E))yield yield j(I)}}catch(E){u={error:E}}finally{try{!m&&!l&&(f=y.return)&&(yield j(f.call(y)))}finally{if(u)throw u.error}}for(let E of h.flush())yield yield j(E)})}function s(){return on(this,arguments,function*(){var l,u,f,p;if(i)throw new St("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let h=!1;try{try{for(var g=!0,m=sn(o()),y;y=yield j(m.next()),l=y.done,!l;g=!0){p=y.value,g=!1;let _=p;h||_&&(yield yield j(JSON.parse(_)))}}catch(_){u={error:_}}finally{try{!g&&!l&&(f=m.return)&&(yield j(f.call(m)))}finally{if(u)throw u.error}}h=!0}catch(_){if(Ug(_))return yield j(void 0);throw _}finally{h||t.abort()}})}return new n(s,t,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],t=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){let s=r.next();e.push(s),t.push(s)}return o.shift()}});return[new n(()=>i(e),this.controller,this.client),new n(()=>i(t),this.controller,this.client)]}toReadableStream(){let e=this,t;return oS({async start(){t=e[Symbol.asyncIterator]()},async pull(r){try{let{value:i,done:o}=await t.next();if(o)return r.close();let s=om(JSON.stringify(i)+`
`);r.enqueue(s)}catch(i){r.error(i)}},async cancel(){var r;await((r=t.return)===null||r===void 0?void 0:r.call(t))}})}};function zL(n,e){return on(this,arguments,function*(){var r,i,o,s;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new St("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new St("Attempted to iterate over a response with no body");let a=new zg,l=new go,u=sS(n.body);try{for(var f=!0,p=sn(WL(u)),h;h=yield j(p.next()),r=h.done,!r;f=!0){s=h.value,f=!1;let g=s;for(let m of l.decode(g)){let y=a.decode(m);y&&(yield yield j(y))}}}catch(g){i={error:g}}finally{try{!f&&!r&&(o=p.return)&&(yield j(o.call(p)))}finally{if(i)throw i.error}}for(let g of l.flush()){let m=a.decode(g);m&&(yield yield j(m))}})}function WL(n){return on(this,arguments,function*(){var t,r,i,o;let s=new Uint8Array;try{for(var a=!0,l=sn(n),u;u=yield j(l.next()),t=u.done,!t;a=!0){o=u.value,a=!1;let f=o;if(f==null)continue;let p=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?om(f):f,h=new Uint8Array(s.length+p.length);h.set(s),h.set(p,s.length),s=h;let g;for(;(g=GL(s))!==-1;)yield yield j(s.slice(0,g)),s=s.slice(g)}}catch(f){r={error:f}}finally{try{!a&&!t&&(i=l.return)&&(yield j(i.call(l)))}finally{if(r)throw r.error}}s.length>0&&(yield yield j(s))})}var zg=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,i]=jL(e,":");return i.startsWith(" ")&&(i=i.substring(1)),t==="event"?this.event=i:t==="data"&&this.data.push(i),null}};function jL(n,e){let t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}async function KL(n,e){let{response:t,requestLogID:r,retryOfRequestLogID:i,startTime:o}=e,s=await(async()=>{var a;if(e.options.stream)return pt(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):qg.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;let l=t.headers.get("content-type"),u=(a=l?.split(";")[0])===null||a===void 0?void 0:a.trim();return u?.includes("application/json")||u?.endsWith("+json")?await t.json():await t.text()})();return pt(n).debug(`[${r}] response parsed`,si({retryOfRequestLogID:i,url:t.url,status:t.status,body:s,durationMs:Date.now()-o})),s}var Wg=class n extends Promise{constructor(e,t,r=KL){super(i=>{i(null)}),this.responsePromise=t,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new n(this.client,this.responsePromise,async(t,r)=>e(await this.parseResponse(t,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};var uS=Symbol("brand.privateNullableHeaders");function*JL(n){if(!n)return;if(uS in n){let{values:r,nulls:i}=n;yield*r.entries();for(let o of i)yield[o,null];return}let e=!1,t;n instanceof Headers?t=n.entries():wD(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let r of t){let i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");let o=wD(r[1])?r[1]:[r[1]],s=!1;for(let a of o)a!==void 0&&(e&&!s&&(s=!0,yield[i,null]),yield[i,a])}}var $s=n=>{let e=new Headers,t=new Set;for(let r of n){let i=new Set;for(let[o,s]of JL(r)){let a=o.toLowerCase();i.has(a)||(e.delete(o),i.add(a)),s===null?(e.delete(o),t.add(a)):(e.append(o,s),t.delete(a))}}return{[uS]:!0,values:e,nulls:t}};var Xh=n=>{var e,t,r,i,o,s;if(typeof globalThis.process<"u")return(r=(t=(e=globalThis.process.env)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(s=(o=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||o===void 0?void 0:o.call(i,n))===null||s===void 0?void 0:s.trim()};var dS,YL=(()=>{class n{constructor(t){var r,i,o,s,a,l,u,{baseURL:f=Xh("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:p=(r=Xh("GEMINI_API_KEY"))!==null&&r!==void 0?r:null,apiVersion:h="v1beta"}=t,g=du(t,["baseURL","apiKey","apiVersion"]);let m=Object.assign(Object.assign({apiKey:p,apiVersion:h},g),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=m.baseURL,this.timeout=(i=m.timeout)!==null&&i!==void 0?i:n.DEFAULT_TIMEOUT,this.logger=(o=m.logger)!==null&&o!==void 0?o:console;let y="warn";this.logLevel=y,this.logLevel=(a=(s=MD(m.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:MD(Xh("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:y,this.fetchOptions=m.fetchOptions,this.maxRetries=(l=m.maxRetries)!==null&&l!==void 0?l:2,this.fetch=(u=m.fetch)!==null&&u!==void 0?u:ML(),this.encoder=NL,this._options=m,this.apiKey=p,this.apiVersion=h,this.clientAdapter=m.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:r}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!r.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){let r=$s([t.headers]);if(!(r.values.has("authorization")||r.values.has("x-goog-api-key"))){if(this.apiKey)return $s([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return $s([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([r,i])=>typeof i<"u").map(([r,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(r)}=`;throw new St(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${uo}`}defaultIdempotencyKey(){return`stainless-node-retry-${gL()}`}makeStatusError(t,r,i,o){return wt.generate(t,r,i,o)}buildURL(t,r,i){let o=!this.baseURLOverridden()&&i||this.baseURL,s=yL(t)?new URL(t):new URL(o+(o.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),a=this.defaultQuery();return EL(a)||(r=Object.assign(Object.assign({},a),r)),typeof r=="object"&&r&&!Array.isArray(r)&&(s.search=this.stringifyQuery(r)),s.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){let r=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${r}`}}async prepareRequest(t,{url:r,options:i}){}get(t,r){return this.methodRequest("get",t,r)}post(t,r){return this.methodRequest("post",t,r)}patch(t,r){return this.methodRequest("patch",t,r)}put(t,r){return this.methodRequest("put",t,r)}delete(t,r){return this.methodRequest("delete",t,r)}methodRequest(t,r,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:t,path:r},o)))}request(t,r=null){return new Wg(this,this.makeRequest(t,r,void 0))}async makeRequest(t,r,i){var o,s,a;let l=await t,u=(o=l.maxRetries)!==null&&o!==void 0?o:this.maxRetries;r==null&&(r=u),await this.prepareOptions(l);let{req:f,url:p,timeout:h}=await this.buildRequest(l,{retryCount:u-r});await this.prepareRequest(f,{url:p,options:l});let g="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=i===void 0?"":`, retryOf: ${i}`,y=Date.now();if(pt(this).debug(`[${g}] sending request`,si({retryOfRequestLogID:i,method:l.method,url:p,options:l,headers:f.headers})),!((s=l.signal)===null||s===void 0)&&s.aborted)throw new js;let _=new AbortController,E=await this.fetchWithTimeout(p,f,h,_).catch(Hg),I=Date.now();if(E instanceof globalThis.Error){let b=`retrying, ${r} attempts remaining`;if(!((a=l.signal)===null||a===void 0)&&a.aborted)throw new js;let w=Ug(E)||/timed? ?out/i.test(String(E)+("cause"in E?String(E.cause):""));if(r)return pt(this).info(`[${g}] connection ${w?"timed out":"failed"} - ${b}`),pt(this).debug(`[${g}] connection ${w?"timed out":"failed"} (${b})`,si({retryOfRequestLogID:i,url:p,durationMs:I-y,message:E.message})),this.retryRequest(l,r,i??g);throw pt(this).info(`[${g}] connection ${w?"timed out":"failed"} - error; no more retries left`),pt(this).debug(`[${g}] connection ${w?"timed out":"failed"} (error; no more retries left)`,si({retryOfRequestLogID:i,url:p,durationMs:I-y,message:E.message})),w?new fu:new ho({cause:E})}let A=`[${g}${m}] ${f.method} ${p} ${E.ok?"succeeded":"failed"} with status ${E.status} in ${I-y}ms`;if(!E.ok){let b=await this.shouldRetry(E);if(r&&b){let K=`retrying, ${r} attempts remaining`;return await RL(E.body),pt(this).info(`${A} - ${K}`),pt(this).debug(`[${g}] response error (${K})`,si({retryOfRequestLogID:i,url:E.url,status:E.status,headers:E.headers,durationMs:I-y})),this.retryRequest(l,r,i??g,E.headers)}let w=b?"error; no more retries left":"error; not retryable";pt(this).info(`${A} - ${w}`);let H=await E.text().catch(K=>Hg(K).message),k=SL(H),Q=k?void 0:H;throw pt(this).debug(`[${g}] response error (${w})`,si({retryOfRequestLogID:i,url:E.url,status:E.status,headers:E.headers,message:Q,durationMs:Date.now()-y})),this.makeStatusError(E.status,k,Q,E.headers)}return pt(this).info(A),pt(this).debug(`[${g}] response start`,si({retryOfRequestLogID:i,url:E.url,status:E.status,headers:E.headers,durationMs:I-y})),{response:E,options:l,controller:_,requestLogID:g,retryOfRequestLogID:i,startTime:y}}async fetchWithTimeout(t,r,i,o){let s=r||{},{signal:a,method:l}=s,u=du(s,["signal","method"]);a&&a.addEventListener("abort",()=>o.abort());let f=setTimeout(()=>o.abort(),i),p=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,h=Object.assign(Object.assign(Object.assign({signal:o.signal},p?{duplex:"half"}:{}),{method:"GET"}),u);l&&(h.method=l.toUpperCase());try{return await this.fetch.call(void 0,t,h)}finally{clearTimeout(f)}}async shouldRetry(t){let r=t.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,r,i,o){var s;let a,l=o?.get("retry-after-ms");if(l){let f=parseFloat(l);Number.isNaN(f)||(a=f)}let u=o?.get("retry-after");if(u&&!a){let f=parseFloat(u);Number.isNaN(f)?a=Date.parse(u)-Date.now():a=f*1e3}if(!(a&&0<=a&&a<60*1e3)){let f=(s=t.maxRetries)!==null&&s!==void 0?s:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(r,f)}return await wL(a),this.makeRequest(t,r-1,i)}calculateDefaultRetryTimeoutMillis(t,r){let s=r-t,a=Math.min(.5*Math.pow(2,s),8),l=1-Math.random()*.25;return a*l*1e3}async buildRequest(t,{retryCount:r=0}={}){var i,o,s;let a=Object.assign({},t),{method:l,path:u,query:f,defaultBaseURL:p}=a,h=this.buildURL(u,f,p);"timeout"in a&&DL("timeout",a.timeout),a.timeout=(i=a.timeout)!==null&&i!==void 0?i:this.timeout;let{bodyHeaders:g,body:m}=this.buildBody({options:a}),y=await this.buildHeaders({options:t,method:l,bodyHeaders:g,retryCount:r});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:l,headers:y},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"}),m&&{body:m}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(s=a.fetchOptions)!==null&&s!==void 0?s:{}),url:h,timeout:a.timeout}}async buildHeaders({options:t,method:r,bodyHeaders:i,retryCount:o}){let s={};this.idempotencyHeader&&r!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=t.idempotencyKey);let a=await this.authHeaders(t),l=$s([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),AL()),this._options.defaultHeaders,i,t.headers,a]);return this.validateHeaders(l),l.values}buildBody({options:{body:t,headers:r}}){if(!t)return{bodyHeaders:void 0,body:void 0};let i=$s([r]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&i.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:xL(t)}:this.encoder({body:t,headers:i})}}return n.DEFAULT_TIMEOUT=6e4,n})(),Ue=class extends YL{constructor(){super(...arguments),this.interactions=new Du(this)}};dS=Ue;Ue.GeminiNextGenAPIClient=dS;Ue.GeminiNextGenAPIClientError=St;Ue.APIError=wt;Ue.APIConnectionError=ho;Ue.APIConnectionTimeoutError=fu;Ue.APIUserAbortError=js;Ue.NotFoundError=mu;Ue.ConflictError=yu;Ue.RateLimitError=_u;Ue.BadRequestError=pu;Ue.AuthenticationError=hu;Ue.InternalServerError=Eu;Ue.PermissionDeniedError=gu;Ue.UnprocessableEntityError=vu;Ue.toFile=LL;Ue.Interactions=Du;function ZL(n,e){let t={},r=c(n,["name"]);return r!=null&&d(t,["_url","name"],r),t}function QL(n,e){let t={},r=c(n,["name"]);return r!=null&&d(t,["_url","name"],r),t}function XL(n,e){let t={},r=c(n,["sdkHttpResponse"]);return r!=null&&d(t,["sdkHttpResponse"],r),t}function eV(n,e){let t={},r=c(n,["sdkHttpResponse"]);return r!=null&&d(t,["sdkHttpResponse"],r),t}function tV(n,e,t){let r={};if(c(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let i=c(n,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&d(e,["displayName"],i),c(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let o=c(n,["epochCount"]);e!==void 0&&o!=null&&d(e,["tuningTask","hyperparameters","epochCount"],o);let s=c(n,["learningRateMultiplier"]);if(s!=null&&d(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),c(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(c(n,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(c(n,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");let a=c(n,["batchSize"]);e!==void 0&&a!=null&&d(e,["tuningTask","hyperparameters","batchSize"],a);let l=c(n,["learningRate"]);if(e!==void 0&&l!=null&&d(e,["tuningTask","hyperparameters","learningRate"],l),c(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(c(n,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(c(n,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(c(n,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(c(n,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return r}function nV(n,e,t){let r={},i=c(t,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){let w=c(n,["validationDataset"]);e!==void 0&&w!=null&&d(e,["supervisedTuningSpec"],eg(w))}else if(i==="PREFERENCE_TUNING"){let w=c(n,["validationDataset"]);e!==void 0&&w!=null&&d(e,["preferenceOptimizationSpec"],eg(w))}else if(i==="DISTILLATION"){let w=c(n,["validationDataset"]);e!==void 0&&w!=null&&d(e,["distillationSpec"],eg(w))}let o=c(n,["tunedModelDisplayName"]);e!==void 0&&o!=null&&d(e,["tunedModelDisplayName"],o);let s=c(n,["description"]);e!==void 0&&s!=null&&d(e,["description"],s);let a=c(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){let w=c(n,["epochCount"]);e!==void 0&&w!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(a==="PREFERENCE_TUNING"){let w=c(n,["epochCount"]);e!==void 0&&w!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}else if(a==="DISTILLATION"){let w=c(n,["epochCount"]);e!==void 0&&w!=null&&d(e,["distillationSpec","hyperParameters","epochCount"],w)}let l=c(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){let w=c(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(l==="PREFERENCE_TUNING"){let w=c(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}else if(l==="DISTILLATION"){let w=c(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&d(e,["distillationSpec","hyperParameters","learningRateMultiplier"],w)}let u=c(t,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){let w=c(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(u==="PREFERENCE_TUNING"){let w=c(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}else if(u==="DISTILLATION"){let w=c(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&d(e,["distillationSpec","exportLastCheckpointOnly"],w)}let f=c(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){let w=c(n,["adapterSize"]);e!==void 0&&w!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(f==="PREFERENCE_TUNING"){let w=c(n,["adapterSize"]);e!==void 0&&w!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}else if(f==="DISTILLATION"){let w=c(n,["adapterSize"]);e!==void 0&&w!=null&&d(e,["distillationSpec","hyperParameters","adapterSize"],w)}let p=c(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){let w=c(n,["tuningMode"]);e!==void 0&&w!=null&&d(e,["supervisedTuningSpec","tuningMode"],w)}let h=c(n,["customBaseModel"]);e!==void 0&&h!=null&&d(e,["customBaseModel"],h);let g=c(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){let w=c(n,["batchSize"]);e!==void 0&&w!=null&&d(e,["supervisedTuningSpec","hyperParameters","batchSize"],w)}let m=c(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){let w=c(n,["learningRate"]);e!==void 0&&w!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRate"],w)}let y=c(n,["labels"]);e!==void 0&&y!=null&&d(e,["labels"],y);let _=c(n,["beta"]);e!==void 0&&_!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],_);let E=c(n,["baseTeacherModel"]);e!==void 0&&E!=null&&d(e,["distillationSpec","baseTeacherModel"],E);let I=c(n,["tunedTeacherModelSource"]);e!==void 0&&I!=null&&d(e,["distillationSpec","tunedTeacherModelSource"],I);let A=c(n,["sftLossWeightMultiplier"]);e!==void 0&&A!=null&&d(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],A);let b=c(n,["outputUri"]);return e!==void 0&&b!=null&&d(e,["outputUri"],b),r}function rV(n,e){let t={},r=c(n,["baseModel"]);r!=null&&d(t,["baseModel"],r);let i=c(n,["preTunedModel"]);i!=null&&d(t,["preTunedModel"],i);let o=c(n,["trainingDataset"]);o!=null&&hV(o);let s=c(n,["config"]);return s!=null&&tV(s,t),t}function iV(n,e){let t={},r=c(n,["baseModel"]);r!=null&&d(t,["baseModel"],r);let i=c(n,["preTunedModel"]);i!=null&&d(t,["preTunedModel"],i);let o=c(n,["trainingDataset"]);o!=null&&gV(o,t,e);let s=c(n,["config"]);return s!=null&&nV(s,t,e),t}function oV(n,e){let t={},r=c(n,["name"]);return r!=null&&d(t,["_url","name"],r),t}function sV(n,e){let t={},r=c(n,["name"]);return r!=null&&d(t,["_url","name"],r),t}function aV(n,e,t){let r={},i=c(n,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);let o=c(n,["pageToken"]);e!==void 0&&o!=null&&d(e,["_query","pageToken"],o);let s=c(n,["filter"]);return e!==void 0&&s!=null&&d(e,["_query","filter"],s),r}function lV(n,e,t){let r={},i=c(n,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);let o=c(n,["pageToken"]);e!==void 0&&o!=null&&d(e,["_query","pageToken"],o);let s=c(n,["filter"]);return e!==void 0&&s!=null&&d(e,["_query","filter"],s),r}function cV(n,e){let t={},r=c(n,["config"]);return r!=null&&aV(r,t),t}function uV(n,e){let t={},r=c(n,["config"]);return r!=null&&lV(r,t),t}function dV(n,e){let t={},r=c(n,["sdkHttpResponse"]);r!=null&&d(t,["sdkHttpResponse"],r);let i=c(n,["nextPageToken"]);i!=null&&d(t,["nextPageToken"],i);let o=c(n,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>fS(a))),d(t,["tuningJobs"],s)}return t}function fV(n,e){let t={},r=c(n,["sdkHttpResponse"]);r!=null&&d(t,["sdkHttpResponse"],r);let i=c(n,["nextPageToken"]);i!=null&&d(t,["nextPageToken"],i);let o=c(n,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>jg(a))),d(t,["tuningJobs"],s)}return t}function pV(n,e){let t={},r=c(n,["name"]);r!=null&&d(t,["model"],r);let i=c(n,["name"]);return i!=null&&d(t,["endpoint"],i),t}function hV(n,e){let t={};if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let r=c(n,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),d(t,["examples","examples"],i)}return t}function gV(n,e,t){let r={},i=c(t,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){let s=c(n,["gcsUri"]);e!==void 0&&s!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){let s=c(n,["gcsUri"]);e!==void 0&&s!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(i==="DISTILLATION"){let s=c(n,["gcsUri"]);e!==void 0&&s!=null&&d(e,["distillationSpec","promptDatasetUri"],s)}let o=c(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let s=c(n,["vertexDatasetResource"]);e!==void 0&&s!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){let s=c(n,["vertexDatasetResource"]);e!==void 0&&s!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(o==="DISTILLATION"){let s=c(n,["vertexDatasetResource"]);e!==void 0&&s!=null&&d(e,["distillationSpec","promptDatasetUri"],s)}if(c(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function fS(n,e){let t={},r=c(n,["sdkHttpResponse"]);r!=null&&d(t,["sdkHttpResponse"],r);let i=c(n,["name"]);i!=null&&d(t,["name"],i);let o=c(n,["state"]);o!=null&&d(t,["state"],UD(o));let s=c(n,["createTime"]);s!=null&&d(t,["createTime"],s);let a=c(n,["tuningTask","startTime"]);a!=null&&d(t,["startTime"],a);let l=c(n,["tuningTask","completeTime"]);l!=null&&d(t,["endTime"],l);let u=c(n,["updateTime"]);u!=null&&d(t,["updateTime"],u);let f=c(n,["description"]);f!=null&&d(t,["description"],f);let p=c(n,["baseModel"]);p!=null&&d(t,["baseModel"],p);let h=c(n,["_self"]);return h!=null&&d(t,["tunedModel"],pV(h)),t}function jg(n,e){let t={},r=c(n,["sdkHttpResponse"]);r!=null&&d(t,["sdkHttpResponse"],r);let i=c(n,["name"]);i!=null&&d(t,["name"],i);let o=c(n,["state"]);o!=null&&d(t,["state"],UD(o));let s=c(n,["createTime"]);s!=null&&d(t,["createTime"],s);let a=c(n,["startTime"]);a!=null&&d(t,["startTime"],a);let l=c(n,["endTime"]);l!=null&&d(t,["endTime"],l);let u=c(n,["updateTime"]);u!=null&&d(t,["updateTime"],u);let f=c(n,["error"]);f!=null&&d(t,["error"],f);let p=c(n,["description"]);p!=null&&d(t,["description"],p);let h=c(n,["baseModel"]);h!=null&&d(t,["baseModel"],h);let g=c(n,["tunedModel"]);g!=null&&d(t,["tunedModel"],g);let m=c(n,["preTunedModel"]);m!=null&&d(t,["preTunedModel"],m);let y=c(n,["supervisedTuningSpec"]);y!=null&&d(t,["supervisedTuningSpec"],y);let _=c(n,["preferenceOptimizationSpec"]);_!=null&&d(t,["preferenceOptimizationSpec"],_);let E=c(n,["distillationSpec"]);E!=null&&d(t,["distillationSpec"],E);let I=c(n,["tuningDataStats"]);I!=null&&d(t,["tuningDataStats"],I);let A=c(n,["encryptionSpec"]);A!=null&&d(t,["encryptionSpec"],A);let b=c(n,["partnerModelTuningSpec"]);b!=null&&d(t,["partnerModelTuningSpec"],b);let w=c(n,["customBaseModel"]);w!=null&&d(t,["customBaseModel"],w);let H=c(n,["experiment"]);H!=null&&d(t,["experiment"],H);let k=c(n,["labels"]);k!=null&&d(t,["labels"],k);let Q=c(n,["outputUri"]);Q!=null&&d(t,["outputUri"],Q);let B=c(n,["pipelineJob"]);B!=null&&d(t,["pipelineJob"],B);let K=c(n,["serviceAccount"]);K!=null&&d(t,["serviceAccount"],K);let Re=c(n,["tunedModelDisplayName"]);Re!=null&&d(t,["tunedModelDisplayName"],Re);let Fe=c(n,["veoTuningSpec"]);return Fe!=null&&d(t,["veoTuningSpec"],Fe),t}function mV(n,e){let t={},r=c(n,["sdkHttpResponse"]);r!=null&&d(t,["sdkHttpResponse"],r);let i=c(n,["name"]);i!=null&&d(t,["name"],i);let o=c(n,["metadata"]);o!=null&&d(t,["metadata"],o);let s=c(n,["done"]);s!=null&&d(t,["done"],s);let a=c(n,["error"]);return a!=null&&d(t,["error"],a),t}function eg(n,e){let t={},r=c(n,["gcsUri"]);r!=null&&d(t,["validationDatasetUri"],r);let i=c(n,["vertexDatasetResource"]);return i!=null&&d(t,["validationDatasetUri"],i),t}var Kg=class extends an{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Gn(fr.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var r;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){let i={tunedModelName:t.baseModel};!((r=t.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=t.config.preTunedModelCheckpointId);let o=Object.assign(Object.assign({},t),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{let i=Object.assign({},t);return await this.tuneInternal(i)}else{let i=Object.assign({},t),o=await this.tuneMldevInternal(i),s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:kD.JOB_STATE_QUEUED}}}}async getInternal(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=sV(e);return a=x("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>jg(f))}else{let u=oV(e);return a=x("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>fS(f))}}async listInternal(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=uV(e);return a=x("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=fV(f),h=new ou;return Object.assign(h,p),h})}else{let u=cV(e);return a=x("tunedModels",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=dV(f),h=new ou;return Object.assign(h,p),h})}}async cancel(e){var t,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=QL(e);return a=x("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=eV(f),h=new su;return Object.assign(h,p),h})}else{let u=ZL(e);return a=x("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=XL(f),h=new su;return Object.assign(h,p),h})}}async tuneInternal(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI()){let a=iV(e,e);return o=x("tuningJobs",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:l.headers},f})),i.then(l=>jg(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=rV(e);return o=x("tunedModels",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:l.headers},f})),i.then(l=>mV(l))}}};var Jg=class{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}},yV=1024*1024*8,vV=3,_V=1e3,EV=2,wu="x-goog-upload-status";async function CV(n,e,t){var r;let i=await pS(n,e,t),o=await i?.json();if(((r=i?.headers)===null||r===void 0?void 0:r[wu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function DV(n,e,t){var r;let i=await pS(n,e,t),o=await i?.json();if(((r=i?.headers)===null||r===void 0?void 0:r[wu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");let s=ND(o),a=new vg;return Object.assign(a,s),a}async function pS(n,e,t){var r,i;let o=0,s=0,a=new zs(new Response),l="upload";for(o=n.size;s<o;){let u=Math.min(yV,o-s),f=n.slice(s,s+u);s+u>=o&&(l+=", finalize");let p=0,h=_V;for(;p<vV&&(a=await t.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(s),"Content-Length":String(u)}}}),!(!((r=a?.headers)===null||r===void 0)&&r[wu]));)p++,await wV(h),h=h*EV;if(s+=u,((i=a?.headers)===null||i===void 0?void 0:i[wu])!=="active")break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function SV(n){return{size:n.size,type:n.type}}function wV(n){return new Promise(e=>setTimeout(e,n))}var Yg=class{async upload(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await CV(e,t,r)}async uploadToFileSearchStore(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await DV(e,t,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await SV(e)}};var Zg=class{create(e,t,r){return new Qg(e,t,r)}},Qg=class{constructor(e,t,r){this.url=e,this.headers=t,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};var RD="x-goog-api-key",Xg=class{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(RD)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(RD,this.apiKey)}}};var TV="gl-node/",Tu=class{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");let e=this.httpOptions;e?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");let t=new Ue({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e?.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;let r=YN(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;let i=new Xg(this.apiKey);this.apiClient=new Mg({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:TV+"web",uploader:new Yg,downloader:new Jg}),this.models=new Fg(this.apiClient),this.live=new kg(this.apiClient,i,new Zg),this.batches=new Cg(this.apiClient),this.chats=new Sg(this.models,this.apiClient),this.caches=new Dg(this.apiClient),this.files=new Tg(this.apiClient),this.operations=new Og(this.apiClient),this.authTokens=new Lg(this.apiClient),this.tunings=new Kg(this.apiClient),this.fileSearchStores=new Bg(this.apiClient)}};var Mu=class n{constructor(){this.ai=new Tu({apiKey:process.env.API_KEY||""})}async generateTasks(e,t){let r=`
      Voc\xEA \xE9 um Desenvolvedor Agile especialista.
      T\xEDtulo da User Story: ${e}
      Descri\xE7\xE3o: ${t}
      
      Por favor, sugira de 3 a 5 sub-tarefas t\xE9cnicas distintas necess\xE1rias para completar esta User Story.
      Responda em Portugu\xEAs (PT-BR).
      Foque em tarefas de codifica\xE7\xE3o, testes e configura\xE7\xE3o.
    `;try{let o=(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:r,config:{responseMimeType:"application/json",responseSchema:{type:xt.ARRAY,items:{type:xt.OBJECT,properties:{title:{type:xt.STRING,description:"T\xEDtulo da tarefa"},description:{type:xt.STRING,description:"Breve descri\xE7\xE3o do que precisa ser feito"},activity:{type:xt.STRING,description:"Tipo de atividade, ex: Desenvolvimento, Design, Testes"}},required:["title","description"]}}}})).text;return o?JSON.parse(o):[]}catch(i){return console.error("Gemini Error:",i),[]}}async refineDescription(e){let t=`
      Refine a seguinte descri\xE7\xE3o de User Story para ser mais profissional, clara e seguir o formato padr\xE3o "Como um... eu quero... para que..." se poss\xEDvel.
      Responda em Portugu\xEAs (PT-BR).
      Mantenha as tags HTML se presentes ou retorne texto simples com markdown.
      
      Descri\xE7\xE3o Atual:
      ${e}
    `;try{return(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:t})).text||e}catch(r){return console.error(r),e}}async summarizeDescription(e){let t=`
      Forne\xE7a um resumo executivo e conciso da seguinte User Story em portugu\xEAs (PT-BR).
      Destaque o objetivo principal e os pontos chave.
      Use bullet points se necess\xE1rio.
      
      Descri\xE7\xE3o:
      ${e}
    `;try{return(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:t})).text||"N\xE3o foi poss\xEDvel gerar um resumo."}catch(r){return console.error(r),"Erro ao gerar resumo via IA."}}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}};var hS=(n,e)=>e.id,IV=(n,e)=>e.title;function bV(n,e){if(n&1&&(v(0,"div",5)(1,"span"),T(2),C(),v(3,"span",43),T(4,"/"),C(),v(5,"span"),T(6),C(),v(7,"span",44),T(8,"Total"),C()()),n&2){let t=V();D(2),ie("",t.totalHours(),"h"),D(4),ie("",t.totalEstimated(),"h")}}function AV(n,e){n&1&&(ae(),v(0,"svg",12),q(1,"circle",45)(2,"path",46),C())}function MV(n,e){n&1&&(ae(),v(0,"svg",9),q(1,"path",47),C())}function xV(n,e){n&1&&(ae(),v(0,"svg",12),q(1,"circle",45)(2,"path",46),C())}function RV(n,e){n&1&&(ae(),v(0,"svg",18),q(1,"path",48),C())}function NV(n,e){if(n&1&&(v(0,"div")(1,"h4",27),T(2,"Crit\xE9rios de Aceite"),C(),q(3,"div",28),C()),n&2){let t=V();D(3),J("innerHTML",t.renderMarkdown(t.getField(t.workItem(),"Microsoft.VSTS.Common.AcceptanceCriteria")),Hi)}}function kV(n,e){if(n&1){let t=ut();v(0,"button",49),P("click",function(){let i=ue(t).$implicit,o=V();return de(o.toggleTaskStatusFilter(i))}),T(1),C()}if(n&2){let t=e.$implicit,r=V();tt("text-[9px] px-2 py-0.5 rounded-full border transition-all "+(r.taskStatusFilters().includes(t)?"bg-blue-600 border-blue-600 text-white shadow-sm":"bg-white dark:bg-slate-800 border-gray-100 dark:border-slate-700 text-gray-500 dark:text-slate-400 hover:border-blue-300")),D(),ie(" ",t," ")}}function PV(n,e){if(n&1&&(v(0,"span",54),T(1),C()),n&2){let t=V().$implicit,r=V(2);D(),ie("",r.getField(t,"Microsoft.VSTS.Scheduling.CompletedWork"),"h")}}function FV(n,e){if(n&1&&q(0,"div",56),n&2){let t=V().$implicit,r=V(2);J("innerHTML",r.renderMarkdown(r.getField(t,"System.Description")),Hi)}}function OV(n,e){if(n&1){let t=ut();v(0,"div",49),P("click",function(){let i=ue(t).$implicit,o=V(2);return de(o.openTaskModal(i))}),v(1,"button",50),P("click",function(i){let o=ue(t).$implicit,s=V(2);return i.stopPropagation(),de(s.openEditModal(o))}),ae(),v(2,"svg",9),q(3,"path",51),C()(),Ae(),v(4,"div",52)(5,"div",13)(6,"span"),T(7),C(),v(8,"span",53),T(9),C(),ge(10,PV,2,1,"span",54),C(),v(11,"span"),T(12),C()(),v(13,"h4",55),T(14),C(),ge(15,FV,1,1,"div",56),C()}if(n&2){let t=e.$implicit,r=V(2);tt("p-3 border rounded-lg shadow-sm transition-colors cursor-pointer group dark:bg-slate-800 dark:border-slate-700 dark:hover:border-blue-500 relative "+(r.getField(t,"System.WorkItemType")==="Bug"?"bg-red-50/30 border-red-100 hover:border-red-300":"bg-white border-gray-200 hover:border-blue-300")),D(6),tt("text-[9px] font-bold px-1 rounded uppercase "+(r.getField(t,"System.WorkItemType")==="Bug"?"bg-red-600 text-white":"bg-slate-600 text-white")),D(),ie(" ",r.getField(t,"System.WorkItemType")," "),D(2),ie("#",t.id),D(),me(r.getField(t,"Microsoft.VSTS.Scheduling.CompletedWork")?10:-1),D(),tt("text-[10px] uppercase font-bold px-1.5 rounded "+r.getStateColor(r.getField(t,"System.State")||"")),D(),ie(" ",r.getField(t,"System.State")," "),D(2),Pe(r.getField(t,"System.Title")),D(),me(r.getField(t,"System.Description")?15:-1)}}function LV(n,e){if(n&1&&(v(0,"div",31),Xe(1,OV,16,12,"div",33,hS),C()),n&2){let t=V();D(),et(t.filteredTasks())}}function VV(n,e){n&1&&(v(0,"div",34)(1,"p",57),T(2,"Nenhuma tarefa criada para esta US ainda."),C()())}function BV(n,e){n&1&&(ae(),v(0,"svg",12),q(1,"circle",45)(2,"path",46),C())}function UV(n,e){n&1&&(ae(),v(0,"svg",9),q(1,"path",58),C())}function HV(n,e){if(n&1&&(v(0,"div",59)(1,"h4",60),T(2),C(),v(3,"p",61),T(4),C()()),n&2){let t=e.$implicit;D(2),Pe(t.title),D(2),Pe(t.description)}}function $V(n,e){if(n&1&&(v(0,"div",31),Xe(1,HV,5,2,"div",59,IV),C()),n&2){let t=V();D(),et(t.tasks())}}function GV(n,e){n&1&&(v(0,"p",38),T(1,"Clique no \xEDcone para sugest\xF5es IA."),C())}function qV(n,e){if(n&1&&(v(0,"div",39)(1,"div",62),ae(),v(2,"svg",63),q(3,"path",64),C(),Ae(),v(4,"span",65),T(5),C()()()),n&2){let t=V();D(5),Pe(t.toastMessage())}}function zV(n,e){if(n&1){let t=ut();v(0,"app-modal",66),P("close",function(){ue(t);let i=V();return de(i.summaryContent.set(""))}),ae(),v(1,"svg",67),q(2,"path",47),C(),Ae(),v(3,"div",68),T(4),C(),v(5,"div",69)(6,"button",70),P("click",function(){ue(t);let i=V();return de(i.summaryContent.set(""))}),T(7,"Fechar"),C()()()}if(n&2){let t=V();D(4),ie(" ",t.summaryContent()," ")}}function WV(n,e){if(n&1&&(v(0,"option",75),T(1),C()),n&2){let t=e.$implicit,r=V(2);J("value",t.id),D(),fs("#",t.id," - ",r.getField(t,"System.Title"))}}function jV(n,e){if(n&1){let t=ut();v(0,"app-modal",71),P("close",function(){ue(t);let i=V();return i.showDailyModal.set(!1),de(i.closeDaily.emit())}),ae(),v(1,"svg",67),q(2,"path",72),C(),Ae(),v(3,"div",26)(4,"div")(5,"label",73),T(6,"Selecione a US"),C(),v(7,"select",74),P("ngModelChange",function(i){ue(t);let o=V();return de(o.onUSChange(i))}),Xe(8,WV,2,3,"option",75,hS),C()(),v(10,"div",76)(11,"div",77)(12,"span",78),T(13,"Real Acumulado"),C(),v(14,"span",79),T(15),C()(),v(16,"div",77)(17,"span",78),T(18,"Estimado Story Points"),C(),v(19,"span",80),T(20),C()()(),v(21,"div",81)(22,"div",82)(23,"label",73),T(24,"Horas Hoje"),C(),v(25,"input",83),Dn("ngModelChange",function(i){ue(t);let o=V();return Vn(o.dailyHoursToday,i)||(o.dailyHoursToday=i),de(i)}),C()(),v(26,"div",84)(27,"label",73),T(28,"Observa\xE7\xF5es"),C(),v(29,"textarea",85),Dn("ngModelChange",function(i){ue(t);let o=V();return Vn(o.dailyNotes,i)||(o.dailyNotes=i),de(i)}),C()()(),v(30,"div")(31,"label",73),T(32,"Pend\xEAncias ou Bloqueios"),C(),v(33,"textarea",86),Dn("ngModelChange",function(i){ue(t);let o=V();return Vn(o.dailyPending,i)||(o.dailyPending=i),de(i)}),C()(),v(34,"div",87),T(35),C()(),v(36,"div",88)(37,"button",89),P("click",function(){ue(t);let i=V();return de(i.addDemand())}),ae(),v(38,"svg",9),q(39,"path",90),C(),T(40," PR\xD3XIMA DEMANDA "),C(),Ae(),v(41,"div",91)(42,"button",92),P("click",function(){ue(t);let i=V();return i.showDailyModal.set(!1),de(i.closeDaily.emit())}),T(43,"Fechar"),C(),v(44,"button",93),P("click",function(){ue(t);let i=V();return de(i.copyDaily())}),ae(),v(45,"svg",9),q(46,"path",94),C(),T(47," Gerar Relat\xF3rio Daily "),C()()()()}if(n&2){let t=V();J("fullHeight",!0),D(7),J("ngModel",t.dailyUSId()),D(),et(t.filteredDailyStories()),D(7),ie(" ",t.getSelectedUSHours(),"h "),D(5),ie(" ",t.getSelectedUSEstimatedPoints()," pts "),D(5),Cn("ngModel",t.dailyHoursToday),D(4),Cn("ngModel",t.dailyNotes),D(4),Cn("ngModel",t.dailyPending),D(2),ie(`
`,t.getDailyPreview()," "),D(2),J("disabled",!t.dailyHoursToday)}}function KV(n,e){if(n&1&&(v(0,"span"),T(1),C()),n&2){let t=V(2);tt("px-2 py-1 text-[10px] font-bold rounded "+t.getStateColor(t.getField(t.selectedTask(),"System.State")||"")),D(),ie(" ",t.getField(t.selectedTask(),"System.State")," ")}}function JV(n,e){if(n&1&&(v(0,"option",75),T(1),C()),n&2){let t=e.$implicit;J("value",t),D(),Pe(t)}}function YV(n,e){if(n&1){let t=ut();v(0,"div",98)(1,"div")(2,"label",101),T(3,"T\xEDtulo"),C(),v(4,"input",102),Dn("ngModelChange",function(i){ue(t);let o=V(2);return Vn(o.editTaskTitle,i)||(o.editTaskTitle=i),de(i)}),C()(),v(5,"div",76)(6,"div")(7,"label",101),T(8,"Status"),C(),v(9,"select",74),Dn("ngModelChange",function(i){ue(t);let o=V(2);return Vn(o.editTaskState,i)||(o.editTaskState=i),de(i)}),Xe(10,JV,2,2,"option",75,zi),C()(),v(12,"div")(13,"label",101),T(14,"Trabalho Conclu\xEDdo (h)"),C(),v(15,"input",83),Dn("ngModelChange",function(i){ue(t);let o=V(2);return Vn(o.editTaskCompletedWork,i)||(o.editTaskCompletedWork=i),de(i)}),C()()(),v(16,"div")(17,"label",101),T(18,"Descri\xE7\xE3o"),C(),v(19,"textarea",103),Dn("ngModelChange",function(i){ue(t);let o=V(2);return Vn(o.editTaskDesc,i)||(o.editTaskDesc=i),de(i)}),C()()()}if(n&2){let t=V(2);D(4),Cn("ngModel",t.editTaskTitle),D(5),Cn("ngModel",t.editTaskState),D(),et(t.taskStatusOptions),D(5),Cn("ngModel",t.editTaskCompletedWork),D(4),Cn("ngModel",t.editTaskDesc)}}function ZV(n,e){if(n&1&&(v(0,"div")(1,"h3",114),T(2,"Descri\xE7\xE3o"),C(),q(3,"div",115),C()),n&2){let t=V(3);D(3),J("innerHTML",t.renderMarkdown(t.getField(t.selectedTask(),"System.Description")),Hi)}}function QV(n,e){if(n&1&&(v(0,"div",99),ge(1,ZV,4,1,"div"),v(2,"div",104)(3,"div")(4,"h3",105),T(5,"Esfor\xE7o"),C(),v(6,"div",106)(7,"div",107)(8,"span",108),T(9,"Conclu\xEDdo"),C(),v(10,"span",109),T(11),C()(),v(12,"div",107)(13,"span",108),T(14,"Restante"),C(),v(15,"span",110),T(16),C()()()(),v(17,"div")(18,"h3",105),T(19,"Atribu\xEDdo a"),C(),v(20,"div",111)(21,"div",112),T(22),C(),v(23,"span",113),T(24),C()()()()()),n&2){let t,r,i=V(2);D(),me(i.getField(i.selectedTask(),"System.Description")?1:-1),D(10),ie("",i.getField(i.selectedTask(),"Microsoft.VSTS.Scheduling.CompletedWork")||0,"h"),D(5),ie("",i.getField(i.selectedTask(),"Microsoft.VSTS.Scheduling.RemainingWork")||0,"h"),D(6),ie(" ",(((t=i.getField(i.selectedTask(),"System.AssignedTo"))==null?null:t.displayName)||"?")[0]," "),D(2),Pe(((r=i.getField(i.selectedTask(),"System.AssignedTo"))==null?null:r.displayName)||"N\xE3o atribu\xEDdo")}}function XV(n,e){if(n&1){let t=ut();v(0,"button",116),P("click",function(){ue(t);let i=V(2);return de(i.openEditModal(i.selectedTask()))}),ae(),v(1,"svg",9),q(2,"path",51),C(),T(3," EDITAR TAREFA "),C(),Ae(),v(4,"button",117),P("click",function(){ue(t);let i=V(2);return de(i.closeTaskModal())}),T(5," Fechar "),C()}}function e2(n,e){if(n&1){let t=ut();v(0,"button",118),P("click",function(){ue(t);let i=V(2);return de(i.isEditingTask.set(!1))}),T(1,"CANCELAR"),C(),v(2,"button",119),P("click",function(){ue(t);let i=V(2);return de(i.saveTask())}),T(3," SALVAR ALTERA\xC7\xD5ES "),C()}}function t2(n,e){if(n&1){let t=ut();v(0,"app-modal",95),P("close",function(){ue(t);let i=V();return de(i.closeTaskModal())}),v(1,"div",96)(2,"span",97),T(3),C(),ge(4,KV,2,3,"span",33),C(),ge(5,YV,20,4,"div",98)(6,QV,25,5,"div",99),v(7,"div",100),ge(8,XV,6,0)(9,e2,4,0),C()()}if(n&2){let t=V();J("title",t.isEditingTask()?"Editar Tarefa":t.getField(t.selectedTask(),"System.Title")),D(3),ie("TASK #",t.selectedTask().id),D(),me(t.isEditingTask()?-1:4),D(),me(t.isEditingTask()?5:6),D(3),me(t.isEditingTask()?9:8)}}var xu=class n{constructor(){this.workItem=_t.required();this.availableStories=_t([]);this.triggerDaily=_t(0);this.closeDaily=ji();this.azure=S(ur);this.injector=S(Ve);this.tasks=G([]);this.realTasks=G([]);this.isGenerating=G(!1);this.isRefining=G(!1);this.isUSContentVisible=G(!0);this.isRealTasksVisible=G(!0);this.isAISuggestionsVisible=G(!0);this.selectedTask=G(null);this.isRefreshingDetails=G(!1);this.generatedBranch=G("");this.toastMessage=G("");this.summaryContent=G("");this.isGeneratingSummary=G(!1);this.showDailyModal=G(!1);this.dailyHoursToday=0;this.dailyNotes="";this.dailyPending="";this.dailyUSId=G(0);this.dailyUSHours=G(0);this.dailyReports=G([]);this.filteredDailyStories=qe(()=>this.availableStories().filter(e=>{let t=(this.getField(e,"System.State")||"").toLowerCase();return t==="new"||t==="to do"||t==="para fazer"||t==="novo"||t==="active"||t==="in progress"||t==="em desenvolvimento"||t==="review"||t==="revis\xE3o"}));this.taskStatusFilters=G(["novo","em desenvolvimento","testes","revis\xE3o"]);this.taskStatusOptions=["novo","em desenvolvimento","testes","revis\xE3o","fechado"];this.filteredTasks=qe(()=>{let e=this.taskStatusFilters();return e.length===0?this.realTasks():this.realTasks().filter(t=>{let r=(this.getField(t,"System.State")||"").toLowerCase();return e.some(i=>i==="novo"?r==="new"||r==="to do"||r==="para fazer"||r==="novo":i==="em desenvolvimento"?r==="active"||r==="in progress"||r==="em desenvolvimento":i==="revis\xE3o"?r==="review"||r==="revis\xE3o":i==="testes"?r==="testing"||r==="testes":i==="resolvido"?r==="resolved"||r==="resolvido":i==="fechado"?r==="closed"||r==="fechado":r===i)})});this.totalHours=qe(()=>this.realTasks().reduce((e,t)=>e+(this.getField(t,"Microsoft.VSTS.Scheduling.CompletedWork")||0),0));this.totalEstimated=qe(()=>{let e=this.workItem();return e&&(this.getField(e,"Microsoft.VSTS.Scheduling.StoryPoints")||this.getField(e,"Microsoft.VSTS.Scheduling.Effort"))||0});this.isEditingTask=G(!1);this.editTaskTitle="";this.editTaskDesc="";this.editTaskState="";this.editTaskCompletedWork=0;ki(()=>{let e=this.workItem();e&&(this.tasks.set([]),this.isGenerating.set(!1),this.isRefining.set(!1),this.generatedBranch.set(""),this.loadRealTasks(e))}),ki(()=>{this.triggerDaily()>0&&this.openDailyModal()})}get gemini(){return this._gemini||(this._gemini=this.injector.get(Mu)),this._gemini}onEscKey(){this.closeTaskModal()}toggleUSContent(){this.isUSContentVisible.update(e=>!e)}toggleRealTasks(){this.isRealTasksVisible.update(e=>!e)}toggleAISuggestions(){this.isAISuggestionsVisible.update(e=>!e)}toggleTaskStatusFilter(e){this.taskStatusFilters.update(t=>t.includes(e)?t.filter(r=>r!==e):[...t,e])}openTaskModal(e){this.selectedTask.set(e)}closeTaskModal(){this.selectedTask.set(null)}refreshDetails(){let e=this.workItem();e&&(this.isRefreshingDetails.set(!0),this.azure.getWorkItem(e.id,!0).subscribe({next:t=>{Object.assign(e,t),this.loadRealTasks(t),this.isRefreshingDetails.set(!1),this.showToast("Dados atualizados!")},error:()=>{this.isRefreshingDetails.set(!1),this.showToast("Erro ao atualizar!")}}))}async generateSummary(){let e=this.workItem();if(!e)return;let t=(this.getField(e,"System.Description")||"").replace(/<[^>]*>/g,"")||"";if(!t)return;this.isGeneratingSummary.set(!0);let r=await this.gemini.summarizeDescription(t);this.summaryContent.set(r),this.isGeneratingSummary.set(!1)}generateBranchName(){let e=this.workItem();if(!e)return;let t=e.id,i=(this.getField(e,"System.Title")||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-"),o=`feature/${t}-${i}`;navigator.clipboard.writeText(o).then(()=>{this.showToast("Nome da branch copiado!")})}openDailyModal(){let e=this.workItem();this.dailyHoursToday=0,this.dailyNotes="",this.dailyPending="";let t=e?.id||(this.availableStories().length>0?this.availableStories()[0].id:0);if(this.dailyUSId.set(t),this.dailyReports.set([]),t===e?.id)this.dailyUSHours.set(this.totalHours());else{let r=this.availableStories().find(i=>i.id===t);r&&this.loadUSHours(r)}this.showDailyModal.set(!0)}onUSChange(e){let t=+e;this.dailyUSId.set(t),this.dailyHoursToday=0,this.dailyNotes="";let r=this.workItem()?.id;if(t===r)this.dailyUSHours.set(this.totalHours());else{let i=this.availableStories().find(o=>o.id===t);i&&this.loadUSHours(i)}}loadUSHours(e){let r=(e.relations||e.relations||[])?.filter(i=>i.rel==="System.LinkTypes.Hierarchy-Forward"||i.url.includes("/workItems/")).map(i=>{let o=i.url.split("/");return parseInt(o[o.length-1],10)}).filter(i=>!isNaN(i))||[];r.length>0?this.azure.getWorkItemsByIds(r).subscribe(i=>{let o=i.filter(s=>this.getField(s,"System.WorkItemType")==="Task"||this.getField(s,"System.WorkItemType")==="Bug").reduce((s,a)=>s+(this.getField(a,"Microsoft.VSTS.Scheduling.CompletedWork")||0),0);this.dailyUSHours.set(o)}):this.dailyUSHours.set(0)}getSelectedUSHours(){return this.dailyUSHours()}getSelectedUSEstimatedPoints(){let e=this.workItem()?.id,t=Number(this.dailyUSId()),r=t===e?this.workItem():this.availableStories().find(i=>i.id===t);return r&&(this.getField(r,"Microsoft.VSTS.Scheduling.StoryPoints")||this.getField(r,"Microsoft.VSTS.Scheduling.Effort"))||0}addDemand(){let e=this.availableStories().find(t=>t.id===Number(this.dailyUSId()))||this.workItem();e&&(this.dailyReports.update(t=>[...t,{us:e,hours:this.dailyHoursToday,notes:this.dailyNotes}]),this.dailyHoursToday=0,this.dailyNotes="")}getDailyPreview(){let t=`Relat\xF3rio Di\xE1rio - ${new Date().toLocaleDateString("pt-BR")}
#### Planejamento do Dia

`,r=`

#### Pend\xEAncias ou Bloqueios:
${this.dailyPending||"Nenhuma."}`,i=this.availableStories().find(a=>a.id===Number(this.dailyUSId()))||this.workItem();if(!i)return"";let o=`#US ${i.id} - ${this.getField(i,"System.Title")}
Real/ Est /Varia\xE7\xE3o: ${this.getUSRealHours(i)}h / ${this.getUSEstimatedHours(i)}h +${this.dailyHoursToday}h
Observa\xE7\xF5es: ${this.dailyNotes}`,s="";return this.dailyReports().length>0?s=`${this.dailyReports().map(l=>`#US ${l.us.id} - ${this.getField(l.us,"System.Title")}
Real/ Est /Varia\xE7\xE3o: ${this.getUSRealHours(l.us)}h / ${this.getUSEstimatedHours(l.us)}h +${l.hours}h
Observa\xE7\xF5es: ${l.notes}`).join(`

`)}

${o}`:s=o,`${t}${s}${r}`}getUSRealHours(e){let t=this.workItem();return t&&e.id===t.id?this.totalHours():this.getField(e,"Microsoft.VSTS.Scheduling.CompletedWork")||0}getUSEstimatedHours(e){return this.getField(e,"Custom.StoryPointsHours")||this.getField(e,"Microsoft.VSTS.Scheduling.Effort")||0}copyDaily(){navigator.clipboard.writeText(this.getDailyPreview()).then(()=>{this.showToast("Daily copiada!")})}renderMarkdown(e){if(!e)return"";let t=e.replace(/<[^>]*>/g,r=>r.startsWith("<br")||r.startsWith("</p")?`
`:r.startsWith("<li")?`
- `:"");return ye.parse(t,{gfm:!0,breaks:!0})}showToast(e){this.toastMessage.set(e),setTimeout(()=>this.toastMessage.set(""),3e3)}loadRealTasks(e){if(this.realTasks.set([]),!e)return;let r=(e.relations||e.relations||[])?.filter(i=>i.rel==="System.LinkTypes.Hierarchy-Forward"||i.url.includes("/workItems/")).map(i=>{let o=i.url.split("/");return parseInt(o[o.length-1],10)}).filter(i=>!isNaN(i))||[];r.length>0&&this.azure.getWorkItemsByIds(r).subscribe(i=>{let o=i.filter(s=>this.getField(s,"System.WorkItemType")==="Task"||this.getField(s,"System.WorkItemType")==="Bug").sort((s,a)=>s.id-a.id);this.realTasks.set(o)})}async generateTasks(){this.isGenerating.set(!0);let e=this.workItem();if(!e)return;let t=(this.getField(e,"System.Description")||"").replace(/<[^>]*>/g,"")||"",r=await this.gemini.generateTasks(this.getField(e,"System.Title")||"",t);this.tasks.set(r),this.isGenerating.set(!1)}async refineStory(){this.isRefining.set(!0);let e=this.workItem();if(!e){this.isRefining.set(!1);return}let t=(this.getField(e,"System.Description")||"").replace(/<[^>]*>/g,"")||"",r=await this.gemini.refineDescription(t);"fields"in e?e.fields["System.Description"]=r.replace(/\n/g,"<br>"):e.description=r.replace(/\n/g,"<br>"),this.isRefining.set(!1)}getField(e,t){if(!e)return null;if("fields"in e)return e.fields[t];let r=e;switch(t){case"System.Title":return r.title;case"System.WorkItemType":return r.type;case"System.State":return r.state;case"System.Description":return r.description;case"Microsoft.VSTS.Common.AcceptanceCriteria":return r.acceptanceCriteria;case"Microsoft.VSTS.Scheduling.StoryPoints":case"Microsoft.VSTS.Scheduling.Effort":case"Custom.StoryPointsHours":return r.storyPoints||r.effort||0;case"Microsoft.VSTS.Scheduling.CompletedWork":return r.completedWork||0;case"Microsoft.VSTS.Scheduling.RemainingWork":return r.remainingWork||0;default:return null}}getStateColor(e){let t=(e||"").toLowerCase();if(t==="closed"||t==="fechado")return"bg-green-800 text-green-100 dark:bg-green-900 dark:text-green-200";if(t==="testes"||t==="testing"||t==="resolved")return"bg-yellow-400 text-yellow-900 dark:bg-yellow-600 dark:text-yellow-100";if(t==="para fazer"||t==="to do"||t==="new")return"bg-green-500 text-white dark:bg-green-700 dark:text-green-100";if(t==="revis\xE3o"||t==="review")return"bg-red-600 text-white dark:bg-red-800 dark:text-red-100";switch(t){case"active":return"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300";case"removed":return"bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-slate-700 dark:text-slate-300"}}openEditModal(e){this.selectedTask.set(e),this.editTaskTitle=this.getField(e,"System.Title"),this.editTaskDesc=this.getField(e,"System.Description"),this.editTaskState=this.getField(e,"System.State"),this.editTaskCompletedWork=this.getField(e,"Microsoft.VSTS.Scheduling.CompletedWork")||0,this.isEditingTask.set(!0)}saveTask(){let e=this.selectedTask();if(!e)return;let t=[{op:"replace",path:"/fields/System.Title",value:this.editTaskTitle},{op:"replace",path:"/fields/System.Description",value:this.editTaskDesc},{op:"replace",path:"/fields/System.State",value:this.editTaskState},{op:"replace",path:"/fields/Microsoft.VSTS.Scheduling.CompletedWork",value:this.editTaskCompletedWork}];this.azure.updateWorkItem(e.id,t).subscribe({next:r=>{this.showToast("Tarefa atualizada!"),this.isEditingTask.set(!1),this.refreshDetails()},error:()=>this.showToast("Erro ao atualizar tarefa")})}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=yt({type:n,selectors:[["app-detail-view"]],hostBindings:function(t,r){t&1&&P("keydown.escape",function(){return r.onEscKey()},ss)},inputs:{workItem:[1,"workItem"],availableStories:[1,"availableStories"],triggerDaily:[1,"triggerDaily"]},outputs:{closeDaily:"closeDaily"},decls:78,vars:39,consts:[[1,"h-full","flex","flex-col","bg-white","rounded-lg","shadow-sm","border","border-gray-200","overflow-hidden","dark:bg-slate-800","dark:border-slate-700"],[1,"p-6","border-b","border-gray-100","flex","justify-between","items-start","dark:border-slate-700"],[1,"flex-1"],[1,"flex","items-center","gap-3","mb-2"],[1,"px-2","py-1","text-xs","font-semibold","rounded","bg-blue-100","text-blue-800","dark:bg-blue-900/40","dark:text-blue-300"],[1,"flex","items-center","gap-1","px-2","py-1","text-xs","font-bold","rounded","bg-indigo-100","text-indigo-700","dark:bg-indigo-900/40","dark:text-indigo-300"],[1,"text-2xl","font-bold","text-gray-900","leading-tight","dark:text-slate-100"],[1,"flex","items-center","gap-3","mt-4"],[1,"flex","items-center","gap-2","px-3","py-1.5","text-xs","font-medium","text-blue-700","bg-blue-50","hover:bg-blue-100","rounded-md","transition-colors","dark:bg-blue-900/20","dark:text-blue-400","dark:hover:bg-blue-900/30",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"],[1,"flex","items-center","gap-2","px-3","py-1.5","text-xs","font-medium","text-indigo-700","bg-indigo-50","hover:bg-indigo-100","rounded-md","transition-colors","dark:bg-indigo-900/20","dark:text-indigo-400","dark:hover:bg-indigo-900/30",3,"click","disabled"],["viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],[1,"flex","items-center","gap-2"],["title","For\xE7ar Atualiza\xE7\xE3o",1,"p-2","hover:bg-gray-100","rounded-full","transition-colors","text-gray-500","dark:hover:bg-slate-700",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"flex","items-center","gap-2","px-3","py-1.5","text-sm","font-medium","text-purple-700","bg-purple-50","hover:bg-purple-100","rounded-md","transition-colors","dark:bg-purple-900/20","dark:text-purple-400","dark:hover:bg-purple-900/30",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-4","w-4"],[1,"flex-1","overflow-hidden","flex","flex-col","md:flex-row"],[1,"flex-1","overflow-y-auto","p-6","space-y-8","border-r","border-gray-100","dark:border-slate-700"],[1,"flex","items-center","justify-between","mb-4"],[1,"p-1","hover:bg-gray-100","rounded","dark:hover:bg-slate-700","transition-colors",3,"click","title"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","transition-transform","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"text-lg","font-bold","text-gray-900","dark:text-slate-100"],[1,"space-y-6"],[1,"text-xs","font-bold","text-gray-500","uppercase","tracking-wider","mb-2","dark:text-slate-400"],[1,"prose","prose-sm","max-w-none","text-gray-700","bg-gray-50","p-4","rounded-lg","border","border-gray-100","dark:bg-slate-900/50","dark:text-slate-300","dark:border-slate-700",3,"innerHTML"],[1,"w-full","md:w-96","bg-slate-50/50","overflow-y-auto","p-6","space-y-8","dark:bg-slate-900/20"],[1,"px-2","py-0.5","text-xs","font-bold","bg-gray-200","text-gray-600","rounded-full","dark:bg-slate-700","dark:text-slate-400"],[1,"space-y-3"],[1,"flex","flex-wrap","gap-1","mb-4"],[3,"class"],[1,"text-center","py-6","px-4","bg-white","border-2","border-dashed","border-gray-200","rounded-lg","dark:bg-slate-800/50","dark:border-slate-700"],[1,"pt-6","border-t","border-gray-200","dark:border-slate-700"],[1,"text-sm","font-bold","text-gray-500","uppercase","tracking-wider","dark:text-slate-400"],["title","Gerar sugest\xF5es",1,"p-1.5","text-blue-600","hover:bg-blue-50","rounded-md","transition-colors","disabled:opacity-50","dark:text-blue-400","dark:hover:bg-blue-900/30",3,"click","disabled"],[1,"text-[11px]","text-gray-400","text-center","dark:text-slate-500","italic"],[1,"fixed","top-20","left-1/2","transform","-translate-x-1/2","z-[100]","animate-bounce"],["title","Resumo IA","maxWidth","max-w-lg","headerClass","bg-indigo-50 dark:bg-indigo-900/20","titleClass","text-indigo-900 dark:text-indigo-300"],["title","Gerar Relat\xF3rio Daily","maxWidth","max-w-2xl","headerClass","bg-blue-50 dark:bg-blue-900/20","titleClass","text-blue-900 dark:text-blue-300",3,"fullHeight"],["maxWidth","max-w-2xl","headerClass","bg-slate-50/50 dark:bg-slate-900/20",3,"title"],[1,"opacity-50"],[1,"ml-1","opacity-75"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z","clip-rule","evenodd"],[3,"click"],[1,"absolute","top-2","right-2","p-1","text-slate-400","hover:text-blue-600","opacity-0","group-hover:opacity-100","transition-opacity",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"flex","justify-between","items-start","mb-2","pr-6"],[1,"text-[10px]","font-mono","text-gray-500","dark:text-slate-500"],[1,"text-[10px]","font-bold","text-indigo-600","dark:text-indigo-400"],[1,"text-sm","font-semibold","text-gray-900","leading-snug","group-hover:text-blue-600","transition-colors","dark:text-slate-100","dark:group-hover:text-blue-400"],[1,"text-[10px]","text-gray-500","mt-1","line-clamp-1","dark:text-slate-400",3,"innerHTML"],[1,"text-xs","text-gray-400","dark:text-slate-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 10V3L4 14h7v7l9-11h-7z"],[1,"p-3","bg-purple-50/50","border","border-purple-100","rounded-lg","dark:bg-purple-900/10","dark:border-purple-900/20"],[1,"text-sm","font-semibold","text-purple-900","dark:text-purple-300"],[1,"text-xs","text-purple-700","mt-1","line-clamp-2","dark:text-purple-400/80"],[1,"bg-gray-900","text-white","px-6","py-3","rounded-full","shadow-2xl","flex","items-center","gap-3"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-green-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"text-sm","font-bold"],["title","Resumo IA","maxWidth","max-w-lg","headerClass","bg-indigo-50 dark:bg-indigo-900/20","titleClass","text-indigo-900 dark:text-indigo-300",3,"close"],["header-icon","","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],[1,"prose","prose-sm","dark:prose-invert","max-w-none","text-gray-700","dark:text-slate-300","whitespace-pre-line"],["footer","",1,"text-right"],[1,"px-6","py-2","bg-indigo-600","text-white","text-sm","font-bold","rounded-lg","hover:bg-indigo-700","transition-colors",3,"click"],["title","Gerar Relat\xF3rio Daily","maxWidth","max-w-2xl","headerClass","bg-blue-50 dark:bg-blue-900/20","titleClass","text-blue-900 dark:text-blue-300",3,"close","fullHeight"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"block","text-xs","font-bold","text-gray-500","uppercase","mb-2"],[1,"w-full","bg-gray-50","dark:bg-slate-900","border","border-gray-200","dark:border-slate-700","rounded-lg","px-4","py-2","focus:ring-2","focus:ring-blue-500","outline-none","transition-all","dark:text-white",3,"ngModelChange","ngModel"],[3,"value"],[1,"grid","grid-cols-2","gap-4"],[1,"bg-gray-50","dark:bg-slate-900","p-4","rounded-lg","border","border-gray-100","dark:border-slate-700"],[1,"block","text-[10px]","text-gray-500","uppercase","font-bold","mb-1"],[1,"text-xl","font-bold","text-indigo-600"],[1,"text-xl","font-bold","text-amber-600"],[1,"grid","grid-cols-3","gap-4"],[1,"col-span-1"],["type","number",1,"w-full","bg-gray-50","dark:bg-slate-900","border","border-gray-200","dark:border-slate-700","rounded-lg","px-4","py-2","focus:ring-2","focus:ring-blue-500","outline-none","transition-all","dark:text-white",3,"ngModelChange","ngModel"],[1,"col-span-2"],["rows","1","placeholder","O que foi feito...",1,"w-full","bg-gray-50","dark:bg-slate-900","border","border-gray-200","dark:border-slate-700","rounded-lg","px-4","py-2","focus:ring-2","focus:ring-blue-500","outline-none","transition-all","dark:text-white","resize-none",3,"ngModelChange","ngModel"],["rows","2","placeholder","Informe aqui se houver pend\xEAncias...",1,"w-full","bg-gray-50","dark:bg-slate-900","border","border-gray-200","dark:border-slate-700","rounded-lg","px-4","py-2","focus:ring-2","focus:ring-blue-500","outline-none","transition-all","dark:text-white","resize-none",3,"ngModelChange","ngModel"],[1,"bg-slate-900","text-blue-400","p-4","rounded-lg","font-mono","text-xs","whitespace-pre-wrap","border","border-blue-900/50"],["footer","",1,"flex","justify-between","items-center","gap-3"],[1,"flex","items-center","gap-2","px-4","py-2","bg-indigo-50","text-indigo-700","hover:bg-indigo-100","rounded-full","text-xs","font-bold","transition-all","dark:bg-indigo-900/20","dark:text-indigo-400",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"flex","gap-3"],[1,"px-6","py-2","text-sm","font-bold","text-gray-500","hover:text-gray-700","dark:text-slate-400",3,"click"],[1,"px-6","py-2","bg-blue-600","text-white","text-sm","font-bold","rounded-lg","hover:bg-blue-700","transition-colors","flex","items-center","gap-2","shadow-lg","shadow-blue-500/20",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"],["maxWidth","max-w-2xl","headerClass","bg-slate-50/50 dark:bg-slate-900/20",3,"close","title"],["header-icon","",1,"flex","items-center","gap-3"],[1,"px-2","py-1","text-[10px]","font-bold","rounded","bg-blue-100","text-blue-700","dark:bg-blue-900/40","dark:text-blue-300"],[1,"space-y-4"],[1,"space-y-8"],["footer","",1,"flex","justify-between","items-center"],[1,"block","text-xs","font-bold","text-gray-500","uppercase","mb-1"],["type","text",1,"w-full","bg-gray-50","dark:bg-slate-900","border","border-gray-200","dark:border-slate-700","rounded-lg","px-4","py-2","focus:ring-2","focus:ring-blue-500","outline-none","transition-all","dark:text-white",3,"ngModelChange","ngModel"],["rows","5",1,"w-full","bg-gray-50","dark:bg-slate-900","border","border-gray-200","dark:border-slate-700","rounded-lg","px-4","py-2","focus:ring-2","focus:ring-blue-500","outline-none","transition-all","dark:text-white",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-2","gap-6","pt-6","border-t","border-gray-100","dark:border-slate-700"],[1,"text-xs","font-bold","text-gray-400","uppercase","tracking-widest","mb-2"],[1,"flex","items-center","gap-4"],[1,"bg-slate-50","dark:bg-slate-900/50","p-3","rounded-lg","border","border-gray-100","dark:border-slate-700","flex-1"],[1,"block","text-[10px]","text-gray-500","uppercase"],[1,"text-lg","font-bold","text-indigo-600","dark:text-indigo-400"],[1,"text-lg","font-bold","text-amber-600","dark:text-amber-400"],[1,"flex","items-center","gap-3","bg-slate-50","dark:bg-slate-900/50","p-3","rounded-lg","border","border-gray-100","dark:border-slate-700"],[1,"w-8","h-8","rounded-full","bg-blue-600","flex","items-center","justify-center","text-white","font-bold","text-xs"],[1,"text-sm","font-medium","text-gray-700","dark:text-slate-200"],[1,"text-xs","font-bold","text-gray-400","uppercase","tracking-widest","mb-4"],[1,"prose","prose-sm","max-w-none","text-gray-700","dark:text-slate-300",3,"innerHTML"],[1,"flex","items-center","gap-2","text-blue-600","hover:text-blue-800","font-bold","text-sm",3,"click"],[1,"px-6","py-2","bg-white","dark:bg-slate-800","border","border-gray-200","dark:border-slate-600","text-sm","font-bold","text-gray-600","dark:text-slate-300","rounded-lg","hover:bg-gray-50","dark:hover:bg-slate-700","transition-colors",3,"click"],[1,"text-gray-500","hover:text-gray-700","text-sm","font-bold",3,"click"],[1,"px-6","py-2","bg-blue-600","text-white","font-bold","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"]],template:function(t,r){if(t&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),T(5),C(),v(6,"span"),T(7),C(),ge(8,bV,9,2,"div",5),C(),v(9,"h1",6),T(10),C(),v(11,"div",7)(12,"button",8),P("click",function(){return r.generateBranchName()}),ae(),v(13,"svg",9),q(14,"path",10),C(),T(15," Gerar Branch "),C(),Ae(),v(16,"button",11),P("click",function(){return r.generateSummary()}),ge(17,AV,3,0,":svg:svg",12)(18,MV,2,0,":svg:svg",9),T(19," Resumo IA "),C()()(),v(20,"div",13)(21,"button",14),P("click",function(){return r.refreshDetails()}),ae(),v(22,"svg",15),q(23,"path",16),C()(),Ae(),v(24,"button",17),P("click",function(){return r.refineStory()}),ge(25,xV,3,0,":svg:svg",12)(26,RV,2,0,":svg:svg",18),T(27," Refinar IA "),C()()(),v(28,"div",19)(29,"div",20)(30,"section")(31,"div",21)(32,"div",13)(33,"button",22),P("click",function(){return r.toggleUSContent()}),ae(),v(34,"svg",23),q(35,"path",24),C()(),Ae(),v(36,"h3",25),T(37,"User Story"),C()()(),v(38,"div",26)(39,"div")(40,"h4",27),T(41,"Descri\xE7\xE3o"),C(),q(42,"div",28),C(),ge(43,NV,4,1,"div"),C()()(),v(44,"div",29)(45,"section")(46,"div",21)(47,"div",13)(48,"button",22),P("click",function(){return r.toggleRealTasks()}),ae(),v(49,"svg",23),q(50,"path",24),C()(),Ae(),v(51,"h3",25),T(52,"Tarefas"),C()(),v(53,"span",30),T(54),C()(),v(55,"div",31)(56,"div",32),Xe(57,kV,2,3,"button",33,zi),C(),ge(59,LV,3,0,"div",31)(60,VV,3,0,"div",34),C()(),v(61,"section",35)(62,"div",21)(63,"div",13)(64,"button",22),P("click",function(){return r.toggleAISuggestions()}),ae(),v(65,"svg",23),q(66,"path",24),C()(),Ae(),v(67,"h3",36),T(68,"Sugest\xF5es IA"),C()(),v(69,"button",37),P("click",function(){return r.generateTasks()}),ge(70,BV,3,0,":svg:svg",12)(71,UV,2,0,":svg:svg",9),C()(),ge(72,$V,3,0,"div",31)(73,GV,2,0,"p",38),C()()(),ge(74,qV,6,1,"div",39),ge(75,zV,8,1,"app-modal",40),ge(76,jV,48,9,"app-modal",41),ge(77,t2,10,5,"app-modal",42),C()),t&2){let i,o;J("@fadeInSlideIn",(i=r.workItem())==null?null:i.id),D(5),fs(" ",r.getField(r.workItem(),"System.WorkItemType")," ",(o=r.workItem())==null?null:o.id," "),D(),tt("px-2 py-1 text-xs font-semibold rounded "+r.getStateColor(r.getField(r.workItem(),"System.State")||"")),D(),ie(" ",r.getField(r.workItem(),"System.State")," "),D(),me(r.totalHours()>0||r.totalEstimated()>0?8:-1),D(2),Pe(r.getField(r.workItem(),"System.Title")),D(6),J("disabled",r.isGeneratingSummary()),D(),me(r.isGeneratingSummary()?17:18),D(4),J("disabled",r.isRefreshingDetails()),D(),Be("animate-spin",r.isRefreshingDetails()),D(2),J("disabled",r.isRefining()),D(),me(r.isRefining()?25:26),D(8),J("title",r.isUSContentVisible()?"Esconder US":"Mostrar US"),D(),Be("rotate-180",!r.isUSContentVisible()),D(4),Be("hidden",!r.isUSContentVisible()),D(4),J("innerHTML",r.renderMarkdown(r.getField(r.workItem(),"System.Description")||"Nenhuma descri\xE7\xE3o fornecida."),Hi),D(),me(r.getField(r.workItem(),"Microsoft.VSTS.Common.AcceptanceCriteria")?43:-1),D(5),J("title",r.isRealTasksVisible()?"Esconder Tarefas":"Mostrar Tarefas"),D(),Be("rotate-180",!r.isRealTasksVisible()),D(5),ie(" ",r.filteredTasks().length," "),D(),Be("hidden",!r.isRealTasksVisible()),D(2),et(r.taskStatusOptions),D(2),me(r.filteredTasks().length>0?59:60),D(5),J("title",r.isAISuggestionsVisible()?"Esconder Sugest\xF5es":"Mostrar Sugest\xF5es"),D(),Be("rotate-180",!r.isAISuggestionsVisible()),D(4),J("disabled",r.isGenerating()),D(),me(r.isGenerating()?70:71),D(2),me(r.tasks().length>0&&r.isAISuggestionsVisible()?72:!r.isGenerating()&&r.isAISuggestionsVisible()?73:-1),D(2),me(r.toastMessage()?74:-1),D(),me(r.summaryContent()?75:-1),D(),me(r.showDailyModal()?76:-1),D(),me(r.selectedTask()?77:-1)}},dependencies:[Vt,Oc,BC,HC,cr,Oh,Fc,ao,Os,co],encapsulation:2,data:{animation:[Qi("fadeInSlideIn",[sr(":enter, * => *",[Et({opacity:0,transform:"translateY(10px)"}),or("300ms ease-out",Et({opacity:1,transform:"translateY(0)"}))])])]}})}};var sm;function n2(){if(sm==null){let n=typeof document<"u"?document.head:null;sm=!!(n&&(n.createShadowRoot||n.attachShadow))}return sm}function Ru(n){if(n2()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Ks(n){return n.composedPath?n.composedPath()[0]:n.target}var Nu=new WeakMap,gS=(()=>{class n{_appRef;_injector=S(Ve);_environmentInjector=S(Je);load(t){let r=this._appRef=this._appRef||this._injector.get(Ln),i=Nu.get(r);i||(i={loaders:new Set,refs:[]},Nu.set(r,i),r.onDestroy(()=>{Nu.get(r)?.refs.forEach(o=>o.destroy()),Nu.delete(r)})),i.loaders.has(t)||(i.loaders.add(t),i.refs.push(V0(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mS(n){return n.buttons===0||n.detail===0}function yS(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}function ku(n,e=0){return r2(n)?Number(n):arguments.length===2?e:0}function r2(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function cn(n){return n instanceof ct?n.nativeElement:n}var am;try{am=typeof Intl<"u"&&Intl.v8BreakIterator}catch{am=!1}var lm=(()=>{class n{_platformId=S(zr);isBrowser=this._platformId?G0(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||am)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var i2=new F("cdk-dir-doc",{providedIn:"root",factory:()=>S(Me)}),o2=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function s2(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?o2.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var cm=(()=>{class n{get value(){return this.valueSignal()}valueSignal=G("ltr");change=new ve;constructor(){let t=S(i2,{optional:!0});if(t){let r=t.body?t.body.dir:null,i=t.documentElement?t.documentElement.dir:null;this.valueSignal.set(s2(r||i||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var a2=20,vS=(()=>{class n{_ngZone=S(xe);_platform=S(lm);_renderer=S(lt).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new se;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=a2){return this._platform.isBrowser?new ce(r=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let i=t>0?this._scrolled.pipe(ka(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):Ee()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){let i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(xo(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(t){let r=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,t)&&r.push(o)}),r}_scrollableContainsElement(t,r){let i=cn(r),o=t.getElementRef().nativeElement;do if(i==o)return!0;while(i=i.parentElement);return!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var l2=20,um=(()=>{class n{_platform=S(lm);_listeners;_viewportSize=null;_change=new se;_document=S(Me);constructor(){let t=S(xe),r=S(lt).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let i=o=>this._change.next(o);this._listeners=[r.listen("window","resize",i),r.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,r=this._getWindow(),i=t.documentElement,o=i.getBoundingClientRect(),s=-o.top||t.body?.scrollTop||r.scrollY||i.scrollTop||0,a=-o.left||t.body?.scrollLeft||r.scrollX||i.scrollLeft||0;return{top:s,left:a}}change(t=l2){return t>0?this._change.pipe(ka(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var _S=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=vt({type:n});static \u0275inj=ot({})}return n})();var dm={},Pu=class n{_appId=S(Ui);static _infix=`a${Math.floor(Math.random()*1e5).toString()}`;getId(e,t=!1){return this._appId!=="ng"&&(e+=this._appId),dm.hasOwnProperty(e)||(dm[e]=0),`${e}${t?n._infix+"-":""}${dm[e]++}`}static \u0275fac=function(t){return new(t||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};function ES(n){return Array.isArray(n)?n:[n]}function hm(n){let e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return r==="canvas"?SS(n,e):(r==="input"||r==="select"||r==="textarea")&&DS(n,e),CS("canvas",n,e,SS),CS("input, textarea, select",n,e,DS),e}function CS(n,e,t,r){let i=e.querySelectorAll(n);if(i.length){let o=t.querySelectorAll(n);for(let s=0;s<i.length;s++)r(i[s],o[s])}}var c2=0;function DS(n,e){e.type!=="file"&&(e.value=n.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${c2++}`)}function SS(n,e){let t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}function Cm(n){let e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function gm(n,e,t){let{top:r,bottom:i,left:o,right:s}=n;return t>=r&&t<=i&&e>=o&&e<=s}function u2(n,e){let t=e.left<n.left,r=e.left+e.width>n.right,i=e.top<n.top,o=e.top+e.height>n.bottom;return t||r||i||o}function Zs(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function wS(n,e,t,r){let{top:i,right:o,bottom:s,left:a,width:l,height:u}=n,f=l*e,p=u*e;return r>i-p&&r<s+p&&t>a-f&&t<o+f}var Fu=class{_document;positions=new Map;constructor(e){this._document=e}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:Cm(t)})})}handleScroll(e){let t=Ks(e),r=this.positions.get(t);if(!r)return null;let i=r.scrollPosition,o,s;if(t===this._document){let u=this.getViewportScrollPosition();o=u.top,s=u.left}else o=t.scrollTop,s=t.scrollLeft;let a=i.top-o,l=i.left-s;return this.positions.forEach((u,f)=>{u.clientRect&&t!==f&&t.contains(f)&&Zs(u.clientRect,a,l)}),i.top=o,i.left=s,{top:a,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function FS(n,e){let t=n.rootNodes;if(t.length===1&&t[0].nodeType===e.ELEMENT_NODE)return t[0];let r=e.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function Dm(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];i?n.setProperty(r,i,t?.has(r)?"important":""):n.removeProperty(r)}return n}function _o(n,e){let t=e?"":"none";Dm(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function TS(n,e,t){Dm(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function Ou(n,e){return e&&e!="none"?n+" "+e:n}function IS(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=Qs(e.left,e.top)}function Qs(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}var Js={capture:!0},fm={passive:!1,capture:!0},d2=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=yt({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(r,i){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return n})(),Sm=(()=>{class n{_ngZone=S(xe);_document=S(Me);_styleLoader=S(gS);_renderer=S(lt).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new se;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=G([]);_globalListeners;_draggingPredicate=t=>t.isDragging();_domNodesToDirectives=null;pointerMove=new se;pointerUp=new se;constructor(){}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,fm)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(t,r){if(!(this._activeDragInstances().indexOf(t)>-1)&&(this._styleLoader.load(d2),this._activeDragInstances.update(i=>[...i,t]),this._activeDragInstances().length===1)){let i=r.type.startsWith("touch"),o=a=>this.pointerUp.next(a),s=[["scroll",a=>this._scroll.next(a),Js],["selectstart",this._preventDefaultWhileDragging,fm]];i?s.push(["touchend",o,Js],["touchcancel",o,Js]):s.push(["mouseup",o,Js]),i||s.push(["mousemove",a=>this.pointerMove.next(a),fm]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=s.map(([a,l,u])=>this._renderer.listen(this._document,a,l,u))})}}stopDragging(t){this._activeDragInstances.update(r=>{let i=r.indexOf(t);return i>-1?(r.splice(i,1),[...r]):r}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances().indexOf(t)>-1}scrolled(t){let r=[this._scroll];return t&&t!==this._document&&r.push(new ce(i=>this._ngZone.runOutsideAngular(()=>{let o=this._renderer.listen(t,"scroll",s=>{this._activeDragInstances().length&&i.next(s)},Js);return()=>{o()}}))),Mo(...r)}registerDirectiveNode(t,r){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(t,r)}removeDirectiveNode(t){this._domNodesToDirectives?.delete(t)}getDragDirectiveForNode(t){return this._domNodesToDirectives?.get(t)||null}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=t=>{this._activeDragInstances().length>0&&t.preventDefault()};_persistentTouchmoveListener=t=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&t.preventDefault(),this.pointerMove.next(t))};_clearGlobalListeners(){this._globalListeners?.forEach(t=>t()),this._globalListeners=void 0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bS(n){let e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function f2(n){let e=getComputedStyle(n),t=pm(e,"transition-property"),r=t.find(a=>a==="transform"||a==="all");if(!r)return 0;let i=t.indexOf(r),o=pm(e,"transition-duration"),s=pm(e,"transition-delay");return bS(o[i])+bS(s[i])}function pm(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}var p2=new Set(["position"]),mm=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView=null;_preview;get element(){return this._preview}constructor(e,t,r,i,o,s,a,l,u,f){this._document=e,this._rootElement=t,this._direction=r,this._initialDomRect=i,this._previewTemplate=o,this._previewClass=s,this._pickupPositionOnPage=a,this._initialTransform=l,this._zIndex=u,this._renderer=f}attach(e){this._preview=this._createPreview(),e.appendChild(this._preview),AS(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(e){this._preview.style.transform=e}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(e){this._preview.classList.add(e)}getTransitionDuration(){return f2(this._preview)}addEventListener(e,t){return this._renderer.listen(this._preview,e,t)}_createPreview(){let e=this._previewTemplate,t=this._previewClass,r=e?e.template:null,i;if(r&&e){let o=e.matchSize?this._initialDomRect:null,s=e.viewContainer.createEmbeddedView(r,e.context);s.detectChanges(),i=FS(s,this._document),this._previewEmbeddedView=s,e.matchSize?IS(i,o):i.style.transform=Qs(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=hm(this._rootElement),IS(i,this._initialDomRect),this._initialTransform&&(i.style.transform=this._initialTransform);return Dm(i.style,{"pointer-events":"none",margin:AS(i)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},p2),_o(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("popover","manual"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(o=>i.classList.add(o)):i.classList.add(t)),i}};function AS(n){return"showPopover"in n}var h2={passive:!0},MS={passive:!1},g2={passive:!1,capture:!0},m2=800,xS="cdk-drag-placeholder",RS=new Set(["position"]);function OS(n,e,t={dragStartThreshold:5,pointerDirectionChangeThreshold:5}){let r=n.get(Qt,null,{optional:!0})||n.get(lt).createRenderer(null,null);return new ym(e,t,n.get(Me),n.get(xe),n.get(um),n.get(Sm),r)}var ym=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview=null;_previewContainer;_placeholderRef=null;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=G(!1);_hasMoved=!1;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new se;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement=null;_rootElementTapHighlight;_pointerMoveSubscription=De.EMPTY;_pointerUpSubscription=De.EMPTY;_scrollSubscription=De.EMPTY;_resizeSubscription=De.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef=null;_cachedShadowRoot;lockAxis=null;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>_o(t,e)))}_disabled=!1;beforeStarted=new se;started=new se;released=new se;ended=new se;entered=new se;exited=new se;dropped=new se;moved=this._moveEvents;data;constrainPosition;constructor(e,t,r,i,o,s,a){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=o,this._dragDropRegistry=s,this._renderer=a,this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new Fu(r),s.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>cn(r)),this._handles.forEach(r=>_o(r,this.disabled)),this._toggleNativeDragInteractions();let t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){let t=cn(e);if(t!==this._rootElement){this._removeRootElementListeners();let r=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[r.listen(t,"mousedown",this._pointerDown,MS),r.listen(t,"touchstart",this._pointerDown,h2),r.listen(t,"dragstart",this._nativeDragStart,MS)]),this._initialTransform=void 0,this._rootElement=t}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?cn(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&u2(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let e=this._boundaryElement.getBoundingClientRect(),t=this._rootElement.getBoundingClientRect(),r=0,i=0;t.left<e.left?r=e.left-t.left:t.right>e.right&&(r=e.right-t.right),t.top<e.top?i=e.top-t.top:t.bottom>e.bottom&&(i=e.bottom-t.bottom);let o=this._activeTransform.x,s=this._activeTransform.y,a=o+r,l=s+i;this._rootElement.style.transform=Qs(a,l),this._activeTransform={x:a,y:l},this._passiveTransform={x:a,y:l}}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),_o(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),_o(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){let e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){let e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)};_pointerMove=e=>{let t=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging()){let i=Math.abs(t.x-this._pickupPositionOnPage.x),o=Math.abs(t.y-this._pickupPositionOnPage.y);if(i+o>=this._config.dragStartThreshold){let a=Date.now()>=this._dragStartTime+this._getDragStartDelay(e),l=this._dropContainer;if(!a){this._endDragSequence(e);return}(!l||!l.isDragging()&&!l.isReceiving())&&(e.cancelable&&e.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(e)))}return}e.cancelable&&e.preventDefault();let r=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._lastKnownPointerPosition=t,this._updatePointerDirectionDelta(r),this._dropContainer)this._updateActiveDropContainer(r,t);else{let i=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,o=this._activeTransform;o.x=r.x-i.x+this._passiveTransform.x,o.y=r.y-i.y+this._passiveTransform.y,this._applyRootElementTransform(o.x,o.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:r,event:e,distance:this._getDragDistance(r),delta:this._pointerDirectionDelta})})};_pointerUp=e=>{this._endDragSequence(e)};_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){Ys(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let t=this._getShadowRoot(),r=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(t,"selectstart",y2,g2)}),r){let i=this._rootElement,o=i.parentNode,s=this._placeholder=this._createPlaceholderElement(),a=this._marker=this._marker||this._document.createComment("");o.insertBefore(a,i),this._initialTransform=i.style.transform||"",this._preview=new mm(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(o,t)),TS(i,!1,RS),this._document.body.appendChild(o.replaceChild(s,i)),this.started.next({source:this,event:e}),r.start(),this._initialContainer=r,this._initialIndex=r.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(r?r.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();let r=this.isDragging(),i=Ys(t),o=!i&&t.button!==0,s=this._rootElement,a=Ks(t),l=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+m2>Date.now(),u=i?yS(t):mS(t);if(a&&a.draggable&&t.type==="mousedown"&&t.preventDefault(),r||o||l||u)return;if(this._handles.length){let h=s.style;this._rootElementTapHighlight=h.webkitTapHighlightColor||"",h.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(h=>this._updateOnScroll(h)),this._boundaryElement&&(this._boundaryRect=Cm(this._boundaryElement));let f=this._previewTemplate;this._pickupPositionInElement=f&&f.template&&!f.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,t);let p=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:p.x,y:p.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){TS(this._rootElement,!0,RS),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),o=this._getDragDistance(i),s=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:o,dropPoint:i,event:e}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:o,dropPoint:i,event:e}),t.drop(this,r,this._initialIndex,this._initialContainer,s,o,i,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:i}){let o=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{let s=this._dropContainer.getItemIndex(this),a=this._dropContainer.getItemAtIndex(s+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(o,this._dropContainer,a),this._dropContainer=o,this._dropContainer.enter(this,e,t,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let e=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);let t=this._preview.getTransitionDuration();return t===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{let i=a=>{(!a||this._preview&&Ks(a)===this._preview.element&&a.propertyName==="transform")&&(s(),r(),clearTimeout(o))},o=setTimeout(i,t*1.5),s=this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){let e=this._placeholderTemplate,t=e?e.template:null,r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=FS(this._placeholderRef,this._document)):r=hm(this._rootElement),r.style.pointerEvents="none",r.classList.add(xS),r}_getPointerPositionInElement(e,t,r){let i=t===this._rootElement?null:t,o=i?i.getBoundingClientRect():e,s=Ys(r)?r.targetTouches[0]:r,a=this._getViewportScrollPosition(),l=s.pageX-o.left-a.left,u=s.pageY-o.top-a.top;return{x:o.left-e.left+l,y:o.top-e.top+u}}_getPointerPositionOnPage(e){let t=this._getViewportScrollPosition(),r=Ys(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=r.pageX-t.left,o=r.pageY-t.top;if(this._ownerSVGElement){let s=this._ownerSVGElement.getScreenCTM();if(s){let a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=o,a.matrixTransform(s.inverse())}}return{x:i,y:o}}_getConstrainedPointerPosition(e){let t=this._dropContainer?this._dropContainer.lockAxis:null,{x:r,y:i}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if(this.lockAxis==="x"||t==="x"?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||t==="y")&&(r=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:o,y:s}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:l,height:u}=this._getPreviewRect(),f=a.top+s,p=a.bottom-(u-s),h=a.left+o,g=a.right-(l-o);r=NS(r,h,g),i=NS(i,f,p)}return{x:r,y:i}}_updatePointerDirectionDelta(e){let{x:t,y:r}=e,i=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,s=Math.abs(t-o.x),a=Math.abs(r-o.y);return s>this._config.pointerDirectionChangeThreshold&&(i.x=t>o.x?1:-1,o.x=t),a>this._config.pointerDirectionChangeThreshold&&(i.y=r>o.y?1:-1,o.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,_o(this._rootElement,e))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(e=>e()),this._rootElementCleanups=void 0}_applyRootElementTransform(e,t){let r=1/this.scale,i=Qs(e*r,t*r),o=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=o.transform&&o.transform!="none"?o.transform:""),o.transform=Ou(i,this._initialTransform)}_applyPreviewTransform(e,t){let r=this._previewTemplate?.template?void 0:this._initialTransform,i=Qs(e,t);this._preview.setTransform(Ou(i,r))}_getDragDistance(e){let t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(e===0&&t===0||this.isDragging()||!this._boundaryElement)return;let r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(i.width===0&&i.height===0||r.width===0&&r.height===0)return;let o=i.left-r.left,s=r.right-i.right,a=i.top-r.top,l=r.bottom-i.bottom;i.width>r.width?(o>0&&(e+=o),s>0&&(e-=s)):e=0,i.height>r.height?(a>0&&(t+=a),l>0&&(t-=l)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){let t=this.dragStartDelay;return typeof t=="number"?t:Ys(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){let t=this._parentPositions.handleScroll(e);if(t){let r=Ks(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&Zs(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=Ru(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){let r=this._previewContainer||"global";if(r==="parent")return e;if(r==="global"){let i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return cn(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=e=>{if(this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&e.preventDefault()}else this.disabled||e.preventDefault()};_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}_conditionallyInsertAnchor(e,t,r){if(e===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(t===this._initialContainer&&t.hasAnchor){let i=this._anchor??=hm(this._placeholder);i.classList.remove(xS),i.classList.add("cdk-drag-anchor"),i.style.transform="",r?r.before(i):cn(t.element).appendChild(i)}}};function NS(n,e,t){return Math.max(e,Math.min(t,n))}function Ys(n){return n.type[0]==="t"}function y2(n){n.preventDefault()}function Bu(n,e,t){let r=Lu(e,n.length-1),i=Lu(t,n.length-1);if(r===i)return;let o=n[r],s=i<r?-1:1;for(let a=r;a!==i;a+=s)n[a]=n[a+s];n[i]=o}function LS(n,e,t,r){let i=Lu(t,n.length-1),o=Lu(r,e.length);n.length&&e.splice(o,0,n.splice(i,1)[0])}function Lu(n,e){return Math.max(0,Math.min(e,n))}var Vu=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction="ltr";constructor(e){this._dragDropRegistry=e}_previousSwap={drag:null,delta:0,overlaps:!1};start(e){this.withItems(e)}sort(e,t,r,i){let o=this._itemPositions,s=this._getItemIndexFromPointerPosition(e,t,r,i);if(s===-1&&o.length>0)return null;let a=this.orientation==="horizontal",l=o.findIndex(_=>_.drag===e),u=o[s],f=o[l].clientRect,p=u.clientRect,h=l>s?1:-1,g=this._getItemOffsetPx(f,p,h),m=this._getSiblingOffsetPx(l,o,h),y=o.slice();return Bu(o,l,s),o.forEach((_,E)=>{if(y[E]===_)return;let I=_.drag===e,A=I?g:m,b=I?e.getPlaceholderElement():_.drag.getRootElement();_.offset+=A;let w=Math.round(_.offset*(1/_.drag.scale));a?(b.style.transform=Ou(`translate3d(${w}px, 0, 0)`,_.initialTransform),Zs(_.clientRect,0,A)):(b.style.transform=Ou(`translate3d(0, ${w}px, 0)`,_.initialTransform),Zs(_.clientRect,A,0))}),this._previousSwap.overlaps=gm(p,t,r),this._previousSwap.drag=u.drag,this._previousSwap.delta=a?i.x:i.y,{previousIndex:l,currentIndex:s}}enter(e,t,r,i){let o=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i,s=this._activeDraggables,a=s.indexOf(e),l=e.getPlaceholderElement(),u=s[o];if(u===e&&(u=s[o+1]),!u&&(o==null||o===-1||o<s.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(u=s[0]),a>-1&&s.splice(a,1),u&&!this._dragDropRegistry.isDragging(u)){let f=u.getRootElement();f.parentElement.insertBefore(l,f),s.splice(o,0,e)}else this._element.appendChild(l),s.push(e);l.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables?.forEach(e=>{let t=e.getRootElement();if(t){let r=this._itemPositions.find(i=>i.drag===e)?.initialTransform;t.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return this._getVisualItemPositions().findIndex(t=>t.drag===e)}getItemAtIndex(e){return this._getVisualItemPositions()[e]?.drag||null}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:r})=>{Zs(r,e,t)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}withElementContainer(e){this._element=e}_cacheItemPositions(){let e=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(t=>{let r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:Cm(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_getVisualItemPositions(){return this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(e,t,r){let i=this.orientation==="horizontal",o=i?t.left-e.left:t.top-e.top;return r===-1&&(o+=i?t.width-e.width:t.height-e.height),o}_getSiblingOffsetPx(e,t,r){let i=this.orientation==="horizontal",o=t[e].clientRect,s=t[e+r*-1],a=o[i?"width":"height"]*r;if(s){let l=i?"left":"top",u=i?"right":"bottom";r===-1?a-=s.clientRect[l]-o[u]:a+=o[l]-s.clientRect[u]}return a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;let r=this._itemPositions,i=this.orientation==="horizontal";if(r[0].drag!==this._activeDraggables[0]){let s=r[r.length-1].clientRect;return i?e>=s.right:t>=s.bottom}else{let s=r[0].clientRect;return i?e<=s.left:t<=s.top}}_getItemIndexFromPointerPosition(e,t,r,i){let o=this.orientation==="horizontal",s=this._itemPositions.findIndex(({drag:a,clientRect:l})=>{if(a===e)return!1;if(i){let u=o?i.x:i.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&u===this._previousSwap.delta)return!1}return o?t>=Math.floor(l.left)&&t<Math.floor(l.right):r>=Math.floor(l.top)&&r<Math.floor(l.bottom)});return s===-1||!this._sortPredicate(s,e)?-1:s}},vm=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(e,t){this._document=e,this._dragDropRegistry=t}start(e){let t=this._element.childNodes;this._relatedNodes=[];for(let r=0;r<t.length;r++){let i=t[r];this._relatedNodes.push([i,i.nextSibling])}this.withItems(e)}sort(e,t,r,i){let o=this._getItemIndexFromPointerPosition(e,t,r),s=this._previousSwap;if(o===-1||this._activeItems[o]===e)return null;let a=this._activeItems[o];if(s.drag===a&&s.overlaps&&s.deltaX===i.x&&s.deltaY===i.y)return null;let l=this.getItemIndex(e),u=e.getPlaceholderElement(),f=a.getRootElement();o>l?f.after(u):f.before(u),Bu(this._activeItems,l,o);let p=this._getRootNode().elementFromPoint(t,r);return s.deltaX=i.x,s.deltaY=i.y,s.drag=a,s.overlaps=f===p||f.contains(p),{previousIndex:l,currentIndex:o}}enter(e,t,r,i){let o=this._activeItems.indexOf(e);o>-1&&this._activeItems.splice(o,1);let s=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i;s===-1&&(s=this._getClosestItemIndexToPointer(e,t,r));let a=this._activeItems[s];a&&!this._dragDropRegistry.isDragging(a)?(this._activeItems.splice(s,0,e),a.getRootElement().before(e.getPlaceholderElement())):(this._activeItems.push(e),this._element.appendChild(e.getPlaceholderElement()))}withItems(e){this._activeItems=e.slice()}withSortPredicate(e){this._sortPredicate=e}reset(){let e=this._element,t=this._previousSwap;for(let r=this._relatedNodes.length-1;r>-1;r--){let[i,o]=this._relatedNodes[r];i.parentNode===e&&i.nextSibling!==o&&(o===null?e.appendChild(i):o.parentNode===e&&e.insertBefore(i,o))}this._relatedNodes=[],this._activeItems=[],t.drag=null,t.deltaX=t.deltaY=0,t.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(e){return this._activeItems.indexOf(e)}getItemAtIndex(e){return this._activeItems[e]||null}updateOnScroll(){this._activeItems.forEach(e=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})}withElementContainer(e){e!==this._element&&(this._element=e,this._rootNode=void 0)}_getItemIndexFromPointerPosition(e,t,r){let i=this._getRootNode().elementFromPoint(Math.floor(t),Math.floor(r)),o=i?this._activeItems.findIndex(s=>{let a=s.getRootElement();return i===a||a.contains(i)}):-1;return o===-1||!this._sortPredicate(o,e)?-1:o}_getRootNode(){return this._rootNode||(this._rootNode=Ru(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(e,t,r){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let i=1/0,o=-1;for(let s=0;s<this._activeItems.length;s++){let a=this._activeItems[s];if(a!==e){let{x:l,y:u}=a.getRootElement().getBoundingClientRect(),f=Math.hypot(t-l,r-u);f<i&&(i=f,o=s)}}return o}},kS=.05,VS=.05,Gt=(function(n){return n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n})(Gt||{}),ht=(function(n){return n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n})(ht||{});function BS(n,e){return new _m(e,n.get(Sm),n.get(Me),n.get(xe),n.get(um))}var _m=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis=null;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new se;entered=new se;exited=new se;dropped=new se;sorted=new se;receivingStarted=new se;receivingStopped=new se;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=De.EMPTY;_verticalScrollDirection=Gt.NONE;_horizontalScrollDirection=ht.NONE;_scrollNode;_stopScrollTimers=new se;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(e,t,r,i,o){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=o;let s=this.element=cn(e);this._document=r,this.withOrientation("vertical").withElementContainer(s),t.registerDropContainer(this),this._parentPositions=new Fu(r)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,i){this._draggingStarted(),i==null&&this.sortingDisabled&&(i=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,i,o,s,a,l={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:o,distance:s,dropPoint:a,event:l})}withItems(e){let t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>e.indexOf(i)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._direction=e,this._sortStrategy instanceof Vu&&(this._sortStrategy.direction=e),this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){if(e==="mixed")this._sortStrategy=new vm(this._document,this._dragDropRegistry);else{let t=new Vu(this._dragDropRegistry);t.direction=this._direction,t.orientation=e,this._sortStrategy=t}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((t,r)=>this.sortPredicate(t,r,this)),this}withScrollableParents(e){let t=this._container;return this._scrollableElements=e.indexOf(t)===-1?[t,...e]:e.slice(),this}withElementContainer(e){if(e===this._container)return this;let t=cn(this.element),r=this._scrollableElements.indexOf(this._container),i=this._scrollableElements.indexOf(e);return r>-1&&this._scrollableElements.splice(r,1),i>-1&&this._scrollableElements.splice(i,1),this._sortStrategy&&this._sortStrategy.withElementContainer(e),this._cachedShadowRoot=null,this._scrollableElements.unshift(e),this._container=e,this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}getItemAtIndex(e){return this._isDragging?this._sortStrategy.getItemAtIndex(e):this._draggables[e]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,i){if(this.sortingDisabled||!this._domRect||!wS(this._domRect,kS,t,r))return;let o=this._sortStrategy.sort(e,t,r,i);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,i=Gt.NONE,o=ht.NONE;if(this._parentPositions.positions.forEach((s,a)=>{a===this._document||!s.clientRect||r||wS(s.clientRect,kS,e,t)&&([i,o]=v2(a,s.clientRect,this._direction,e,t),(i||o)&&(r=a))}),!i&&!o){let{width:s,height:a}=this._viewportRuler.getViewportSize(),l={width:s,height:a,top:0,right:s,bottom:a,left:0};i=US(l,t),o=HS(l,e),r=window}r&&(i!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=o,this._scrollNode=r,(i||o)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let e=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let e=this._container.style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),yd(0,ma).pipe(Cr(this._stopScrollTimers)).subscribe(()=>{let e=this._scrollNode,t=this.autoScrollStep;this._verticalScrollDirection===Gt.UP?e.scrollBy(0,-t):this._verticalScrollDirection===Gt.DOWN&&e.scrollBy(0,t),this._horizontalScrollDirection===ht.LEFT?e.scrollBy(-t,0):this._horizontalScrollDirection===ht.RIGHT&&e.scrollBy(t,0)})};_isOverContainer(e,t){return this._domRect!=null&&gm(this._domRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(i=>i._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._domRect||!gm(this._domRect,t,r)||!this.enterPredicate(e,this))return!1;let i=this._getShadowRoot().elementFromPoint(t,r);return i?i===this._container||this._container.contains(i):!1}_startReceiving(e,t){let r=this._activeSiblings;!r.has(e)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){let t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let e=Ru(this._container);this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}};function US(n,e){let{top:t,bottom:r,height:i}=n,o=i*VS;return e>=t-o&&e<=t+o?Gt.UP:e>=r-o&&e<=r+o?Gt.DOWN:Gt.NONE}function HS(n,e){let{left:t,right:r,width:i}=n,o=i*VS;return e>=t-o&&e<=t+o?ht.LEFT:e>=r-o&&e<=r+o?ht.RIGHT:ht.NONE}function v2(n,e,t,r,i){let o=US(e,i),s=HS(e,r),a=Gt.NONE,l=ht.NONE;if(o){let u=n.scrollTop;o===Gt.UP?u>0&&(a=Gt.UP):n.scrollHeight-u>n.clientHeight&&(a=Gt.DOWN)}if(s){let u=n.scrollLeft;t==="rtl"?s===ht.RIGHT?u<0&&(l=ht.RIGHT):n.scrollWidth+u>n.clientWidth&&(l=ht.LEFT):s===ht.LEFT?u>0&&(l=ht.LEFT):n.scrollWidth-u>n.clientWidth&&(l=ht.RIGHT)}return[a,l]}var _2=(()=>{class n{_injector=S(Ve);constructor(){}createDrag(t,r){return OS(this._injector,t,r)}createDropList(t){return BS(this._injector,t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),PS=new F("CDK_DRAG_PARENT");var E2=new F("CdkDragHandle");var $S=new F("CDK_DRAG_CONFIG"),GS=new F("CdkDropList"),qS=(()=>{class n{element=S(ct);dropContainer=S(GS,{optional:!0,skipSelf:!0});_ngZone=S(xe);_viewContainerRef=S(Wr);_dir=S(cm,{optional:!0});_changeDetectorRef=S(ir);_selfHandle=S(E2,{optional:!0,self:!0});_parentDrag=S(PS,{optional:!0,skipSelf:!0});_dragDropRegistry=S(Sm);_destroyed=new se;_handles=new _r([]);_previewTemplate=null;_placeholderTemplate=null;_dragRef;data;lockAxis=null;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(t){this._disabled=t,this._dragRef.disabled=this._disabled}_disabled=!1;constrainPosition;previewClass;previewContainer;scale=1;started=new ve;released=new ve;ended=new ve;entered=new ve;exited=new ve;dropped=new ve;moved=new ce(t=>{let r=this._dragRef.moved.pipe(Ie(i=>({source:this,pointerPosition:i.pointerPosition,event:i.event,delta:i.delta,distance:i.distance}))).subscribe(t);return()=>{r.unsubscribe()}});_injector=S(Ve);constructor(){let t=this.dropContainer,r=S($S,{optional:!0});this._dragRef=OS(this._injector,this.element,{dragStartThreshold:r&&r.dragStartThreshold!=null?r.dragStartThreshold:5,pointerDirectionChangeThreshold:r&&r.pointerDirectionChangeThreshold!=null?r.pointerDirectionChangeThreshold:5,zIndex:r?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),r&&this._assignDefaults(r),t&&(t.addItem(this),t._dropListRef.beforeStarted.pipe(Cr(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){$i(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(t){let r=t.rootElementSelector,i=t.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(t){let r=this._handles.getValue();r.push(t),this._handles.next(r)}_removeHandle(t){let r=this._handles.getValue(),i=r.indexOf(t);i>-1&&(r.splice(i,1),this._handles.next(r))}_setPreviewTemplate(t){this._previewTemplate=t}_resetPreviewTemplate(t){t===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(t){this._placeholderTemplate=t}_resetPlaceholderTemplate(t){t===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let t=this.element.nativeElement,r=t;this.rootElementSelector&&(r=t.closest!==void 0?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||t)}_getBoundaryElement(){let t=this.boundaryElement;return t?typeof t=="string"?this.element.nativeElement.closest(t):cn(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){let r=this._dir,i=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,s=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.scale=this.scale,t.dragStartDelay=typeof i=="object"&&i?i:ku(i),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(s).withPreviewContainer(this.previewContainer||"global"),r&&t.withDirection(r.value)}}),t.beforeStarted.pipe(_d(1)).subscribe(()=>{if(this._parentDrag){t.withParent(this._parentDrag._dragRef);return}let r=this.element.nativeElement.parentElement;for(;r;){let i=this._dragDropRegistry.getDragDirectiveForNode(r);if(i){t.withParent(i._dragRef);break}r=r.parentElement}})}_handleEvents(t){t.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),t.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(t){let{lockAxis:r,dragStartDelay:i,constrainPosition:o,previewClass:s,boundaryElement:a,draggingDisabled:l,rootElementSelector:u,previewContainer:f}=t;this.disabled=l??!1,this.dragStartDelay=i||0,this.lockAxis=r||null,o&&(this.constrainPosition=o),s&&(this.previewClass=s),a&&(this.boundaryElement=a),u&&(this.rootElementSelector=u),f&&(this.previewContainer=f)}_setupHandlesListener(){this._handles.pipe(Ci(t=>{let r=t.map(i=>i.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),Mn(t=>Mo(...t.map(r=>r._stateChanges.pipe(Ro(r))))),Cr(this._destroyed)).subscribe(t=>{let r=this._dragRef,i=t.element.nativeElement;t.disabled?r.disableHandle(i):r.enableHandle(i)})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=we({type:n,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(r,i){r&2&&Be("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",Sn],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",L0]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[dt([{provide:PS,useExisting:n}]),Pn]})}return n})(),Em=new F("CdkDropListGroup"),zS=(()=>{class n{_items=new Set;disabled=!1;ngOnDestroy(){this._items.clear()}static \u0275fac=function(r){return new(r||n)};static \u0275dir=we({type:n,selectors:[["","cdkDropListGroup",""]],inputs:{disabled:[2,"cdkDropListGroupDisabled","disabled",Sn]},exportAs:["cdkDropListGroup"],features:[dt([{provide:Em,useExisting:n}])]})}return n})(),WS=(()=>{class n{element=S(ct);_changeDetectorRef=S(ir);_scrollDispatcher=S(vS);_dir=S(cm,{optional:!0});_group=S(Em,{optional:!0,skipSelf:!0});_latestSortedRefs;_destroyed=new se;_scrollableParentsResolved=!1;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation="vertical";id=S(Pu).getId("cdk-drop-list-");lockAxis=null;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=t}_disabled=!1;sortingDisabled=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled=!1;autoScrollStep;elementContainerSelector=null;hasAnchor=!1;dropped=new ve;entered=new ve;exited=new ve;sorted=new ve;_unsortedItems=new Set;constructor(){let t=S($S,{optional:!0}),r=S(Ve);this._dropListRef=BS(r,this.element),this._dropListRef.data=this,t&&this._assignDefaults(t),this._dropListRef.enterPredicate=(i,o)=>this.enterPredicate(i.data,o.data),this._dropListRef.sortPredicate=(i,o,s)=>this.sortPredicate(i,o.data,s.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),n._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(t){this._unsortedItems.add(t),t._dragRef._withDropContainer(this._dropListRef),this._dropListRef.isDragging()&&this._syncItemsWithRef(this.getSortedItems().map(r=>r._dragRef))}removeItem(t){if(this._unsortedItems.delete(t),this._latestSortedRefs){let r=this._latestSortedRefs.indexOf(t._dragRef);r>-1&&(this._latestSortedRefs.splice(r,1),this._syncItemsWithRef(this._latestSortedRefs))}}getSortedItems(){return Array.from(this._unsortedItems).sort((t,r)=>t._dragRef.getVisibleElement().compareDocumentPosition(r._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let t=n._dropLists.indexOf(this);t>-1&&n._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._latestSortedRefs=void 0,this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe(Ro(this._dir.value),Cr(this._destroyed)).subscribe(r=>t.withDirection(r)),t.beforeStarted.subscribe(()=>{let r=ES(this.connectedTo).map(i=>{if(typeof i=="string"){let o=n._dropLists.find(s=>s.id===i);return o}return i});if(this._group&&this._group._items.forEach(i=>{r.indexOf(i)===-1&&r.push(i)}),!this._scrollableParentsResolved){let i=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(o=>o.getElementRef().nativeElement);this._dropListRef.withScrollableParents(i),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let i=this.element.nativeElement.querySelector(this.elementContainerSelector);t.withElementContainer(i)}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=this.sortingDisabled,t.autoScrollDisabled=this.autoScrollDisabled,t.autoScrollStep=ku(this.autoScrollStep,2),t.hasAnchor=this.hasAnchor,t.connectedTo(r.filter(i=>i&&i!==this).map(i=>i._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(this.getSortedItems().map(r=>r._dragRef)),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:this,item:r.item.data,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:this,item:r.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(r=>{this.sorted.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:r.item.data})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,item:r.item.data,isPointerOverContainer:r.isPointerOverContainer,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),Mo(t.receivingStarted,t.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(t){let{lockAxis:r,draggingDisabled:i,sortingDisabled:o,listAutoScrollDisabled:s,listOrientation:a}=t;this.disabled=i??!1,this.sortingDisabled=o??!1,this.autoScrollDisabled=s??!1,this.orientation=a||"vertical",this.lockAxis=r||null}_syncItemsWithRef(t){this._latestSortedRefs=t,this._dropListRef.withItems(t)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=we({type:n,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(r,i){r&2&&(us("id",i.id),Be("cdk-drop-list-disabled",i.disabled)("cdk-drop-list-dragging",i._dropListRef.isDragging())("cdk-drop-list-receiving",i._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",Sn],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",Sn],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",Sn],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"],hasAnchor:[2,"cdkDropListHasAnchor","hasAnchor",Sn]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[dt([{provide:Em,useValue:void 0},{provide:GS,useExisting:n}])]})}return n})();var jS=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=vt({type:n});static \u0275inj=ot({providers:[_2],imports:[_S]})}return n})();var Xs=(n,e)=>e.id;function D2(n,e){if(n&1&&(v(0,"div",5)(1,"span",7),T(2),C(),v(3,"p",8),T(4),C()()),n&2){let t=e.$implicit;D(2),ie("#",t.id),D(2),Pe(t.title)}}function S2(n,e){if(n&1&&(v(0,"div",5)(1,"span",7),T(2),C(),v(3,"p",8),T(4),C()()),n&2){let t=e.$implicit;D(2),ie("#",t.id),D(2),Pe(t.title)}}function w2(n,e){if(n&1&&(v(0,"div",5)(1,"span",7),T(2),C(),v(3,"p",8),T(4),C()()),n&2){let t=e.$implicit;D(2),ie("#",t.id),D(2),Pe(t.title)}}function T2(n,e){if(n&1&&(v(0,"div",5)(1,"span",7),T(2),C(),v(3,"p",8),T(4),C()()),n&2){let t=e.$implicit;D(2),ie("#",t.id),D(2),Pe(t.title)}}function I2(n,e){if(n&1&&(v(0,"div",6)(1,"span",7),T(2),C(),v(3,"p",8),T(4),C()()),n&2){let t=e.$implicit;D(2),ie("#",t.id),D(2),Pe(t.title)}}var Uu=class n{constructor(){this.stories=_t.required();this.azure=S(ur);this.todo=this.filterByState(["new","to do","para fazer","novo"]);this.inProgress=this.filterByState(["active","in progress","em desenvolvimento"]);this.testing=this.filterByState(["testing","testes","resolved","resolvido"]);this.review=this.filterByState(["review","revis\xE3o"]);this.done=this.filterByState(["closed","fechado"])}filterByState(e){return qe(()=>this.stories().filter(t=>e.includes(t.state.toLowerCase())))}drop(e,t){if(e.previousContainer===e.container)Bu(e.container.data,e.previousIndex,e.currentIndex);else{let r=e.previousContainer.data[e.previousIndex],i=[{op:"replace",path:"/fields/System.State",value:t}];this.azure.updateWorkItem(r.id,i).subscribe({next:()=>{r.state=t},error:()=>{console.error("Erro ao mover item")}}),LS(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex)}}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=yt({type:n,selectors:[["app-kanban-board"]],inputs:{stories:[1,"stories"]},decls:32,vars:5,consts:[[1,"h-full","w-full","bg-slate-100","dark:bg-slate-900","p-4","overflow-x-auto"],["cdkDropListGroup","",1,"flex","gap-4","h-full"],[1,"bg-slate-200","dark:bg-slate-800","rounded-lg","shadow","p-4","w-72","flex-shrink-0","flex","flex-col"],[1,"font-bold","text-lg","mb-4","text-slate-700","dark:text-slate-200"],["cdkDropList","",1,"flex-1","space-y-3","min-h-[100px]",3,"cdkDropListDropped","cdkDropListData"],["cdkDrag","",1,"bg-white","dark:bg-slate-700","rounded-lg","p-3","shadow-sm","border","border-slate-200","dark:border-slate-600","cursor-move","active:shadow-lg"],["cdkDrag","",1,"bg-white","dark:bg-slate-700","rounded-lg","p-3","shadow-sm","border","border-slate-200","dark:border-slate-600","opacity-70","cursor-move","active:shadow-lg"],[1,"text-xs","font-mono","text-slate-500","dark:text-slate-400"],[1,"font-semibold","text-sm","mt-1","text-slate-800","dark:text-slate-100"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),T(4,"Para Fazer"),C(),v(5,"div",4),P("cdkDropListDropped",function(o){return r.drop(o,"New")}),Xe(6,D2,5,2,"div",5,Xs),C()(),v(8,"div",2)(9,"h3",3),T(10,"Em Desenvolvimento"),C(),v(11,"div",4),P("cdkDropListDropped",function(o){return r.drop(o,"Active")}),Xe(12,S2,5,2,"div",5,Xs),C()(),v(14,"div",2)(15,"h3",3),T(16,"Testes"),C(),v(17,"div",4),P("cdkDropListDropped",function(o){return r.drop(o,"Testing")}),Xe(18,w2,5,2,"div",5,Xs),C()(),v(20,"div",2)(21,"h3",3),T(22,"Revis\xE3o"),C(),v(23,"div",4),P("cdkDropListDropped",function(o){return r.drop(o,"Review")}),Xe(24,T2,5,2,"div",5,Xs),C()(),v(26,"div",2)(27,"h3",3),T(28,"Fechado"),C(),v(29,"div",4),P("cdkDropListDropped",function(o){return r.drop(o,"Closed")}),Xe(30,I2,5,2,"div",6,Xs),C()()()()),t&2&&(D(5),J("cdkDropListData",r.todo()),D(),et(r.todo()),D(5),J("cdkDropListData",r.inProgress()),D(),et(r.inProgress()),D(5),J("cdkDropListData",r.testing()),D(),et(r.testing()),D(5),J("cdkDropListData",r.review()),D(),et(r.review()),D(5),J("cdkDropListData",r.done()),D(),et(r.done()))},dependencies:[Vt,jS,WS,zS,qS],encapsulation:2})}};var Eo=class n{constructor(){this.CACHE_KEY_PREFIX="azure_api_cache_";this.DEFAULT_MAX_AGE=18e5;this.cleanExpired()}createKey(e){let t=e.urlWithParams,r=e.body?JSON.stringify(e.body):"";try{let i=r?"_"+btoa(r):"";return this.CACHE_KEY_PREFIX+t+i}catch{return this.CACHE_KEY_PREFIX+t+"_"+r.length}}put(e,t,r=this.DEFAULT_MAX_AGE){let i=this.createKey(e),o={body:t.body,status:t.status,statusText:t.statusText,url:t.url,expiry:Date.now()+r};try{localStorage.setItem(i,JSON.stringify(o))}catch(s){console.warn("Cache storage full, clearing old entries",s),this.clear()}}get(e){let t=this.createKey(e),r=localStorage.getItem(t);if(r)try{let i=JSON.parse(r);if(i.expiry<Date.now()){localStorage.removeItem(t);return}return new Un({body:i.body,status:i.status,statusText:i.statusText,url:i.url})}catch{localStorage.removeItem(t);return}}delete(e){let t=[];for(let r=0;r<localStorage.length;r++){let i=localStorage.key(r);i&&i.startsWith(this.CACHE_KEY_PREFIX)&&i.includes(e)&&t.push(i)}t.forEach(r=>localStorage.removeItem(r))}clear(){let e=[];for(let t=0;t<localStorage.length;t++){let r=localStorage.key(t);r&&r.startsWith(this.CACHE_KEY_PREFIX)&&e.push(r)}e.forEach(t=>localStorage.removeItem(t))}cleanExpired(){let e=Date.now(),t=[];for(let r=0;r<localStorage.length;r++){let i=localStorage.key(r);if(i&&i.startsWith(this.CACHE_KEY_PREFIX))try{JSON.parse(localStorage.getItem(i)).expiry<e&&t.push(i)}catch{t.push(i)}}t.forEach(r=>localStorage.removeItem(r))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}};var b2=(n,e)=>e.id;function A2(n,e){n&1&&(v(0,"span",23),T(1,"Demo Mode"),C())}function M2(n,e){n&1&&(ae(),v(0,"svg",25),q(1,"path",37),C())}function x2(n,e){n&1&&(ae(),v(0,"svg",25),q(1,"path",38),C())}function R2(n,e){if(n&1&&(v(0,"div",44),T(1),v(2,"div",56),T(3,"Verifique as configura\xE7\xF5es ou use o Modo Demo."),C()()),n&2){let t=V(2);D(),ie(" ",t.errorMessage()," ")}}function N2(n,e){if(n&1){let t=ut();v(0,"button",10),P("click",function(){let i=ue(t).$implicit,o=V(2);return de(o.toggleStatusFilter(i))}),T(1),C()}if(n&2){let t=e.$implicit,r=V(2);tt("text-[10px] px-2 py-1 rounded-full border transition-all "+(r.statusFilters().includes(t)?"bg-blue-600 border-blue-600 text-white shadow-sm":"bg-gray-50 dark:bg-slate-800 border-gray-100 dark:border-slate-700 text-gray-500 dark:text-slate-400 hover:border-blue-300")),D(),ie(" ",t," ")}}function k2(n,e){if(n&1){let t=ut();v(0,"div",10),P("click",function(){let i=ue(t).$implicit,o=V(2);return de(o.selectStory(i))}),v(1,"div",57)(2,"div",58)(3,"span",59),T(4),C()(),v(5,"span"),T(6),C()(),v(7,"h3",60),T(8),C()()}if(n&2){let t,r=e.$implicit,i=V(2);tt("p-3 rounded-lg cursor-pointer border transition-all duration-200 "+(((t=i.selectedStory())==null?null:t.id)===r.id?"bg-blue-50 border-blue-300 ring-1 ring-blue-300 shadow-sm dark:bg-blue-900/20 dark:border-blue-800 dark:ring-blue-800":"bg-white border-gray-100 hover:border-blue-200 hover:bg-gray-50 dark:bg-slate-800 dark:border-slate-700 dark:hover:bg-slate-750 dark:hover:border-slate-600")),D(4),ie("#",r.id),D(),tt("text-[10px] uppercase font-bold px-1.5 rounded "+i.getStateColor(r.state)),D(),ie(" ",r.state," "),D(2),Pe(r.title)}}function P2(n,e){n&1&&(v(0,"div",61),T(1,"Nenhuma hist\xF3ria encontrada."),C())}function F2(n,e){if(n&1&&ge(0,P2,2,0,"div",61),n&2){let t=V(2);me(!t.isLoading()&&!t.errorMessage()?0:-1)}}function O2(n,e){n&1&&(v(0,"div",55)(1,"div",62),ae(),v(2,"svg",63),q(3,"path",64),C()(),Ae(),v(4,"p",65),T(5,"Selecione uma User Story para ver os detalhes"),C(),v(6,"p",66),T(7,"Configure sua conex\xE3o nas Configura\xE7\xF5es para buscar dados reais do Azure DevOps."),C()())}function L2(n,e){if(n&1){let t=ut();v(0,"aside",39)(1,"div",40)(2,"h2",41),T(3,"User Stories"),C(),v(4,"button",42),P("click",function(){ue(t);let i=V();return de(i.refresh())}),T(5),C()(),v(6,"div",43),ge(7,R2,4,1,"div",44),v(8,"div",45)(9,"div",46)(10,"input",47),P("ngModelChange",function(i){ue(t);let o=V();return de(o.searchQuery.set(i))}),C(),ae(),v(11,"svg",48),q(12,"path",49),C()(),Ae(),v(13,"div",50),Xe(14,N2,2,3,"button",51,zi),C()(),Xe(16,k2,9,7,"div",51,b2,!1,F2,1,1),C()(),v(19,"main",52)(20,"div",53)(21,"app-detail-view",54),P("closeDaily",function(){ue(t);let i=V();return de(i.dailyTrigger.set(0))}),C()(),ge(22,O2,8,0,"div",55),C()}if(n&2){let t=V();Be("w-0",!t.isSidebarOpen())("opacity-0",!t.isSidebarOpen())("w-80",t.isSidebarOpen()),D(4),J("disabled",t.isLoading()),D(),ie(" ",t.isLoading()?"Carregando...":"Atualizar"," "),D(2),me(t.errorMessage()?7:-1),D(3),J("ngModel",t.searchQuery()),D(4),et(t.availableStatus),D(2),et(t.filteredStories()),D(4),Be("hidden",!t.selectedStory()&&t.dailyTrigger()===0),D(),J("workItem",t.selectedStory())("availableStories",t.activeStories())("triggerDaily",t.dailyTrigger()),D(),me(!t.selectedStory()&&t.dailyTrigger()===0?22:-1)}}function V2(n,e){if(n&1&&q(0,"app-kanban-board",35),n&2){let t=V();J("stories",t.stories())}}function B2(n,e){if(n&1){let t=ut();v(0,"app-settings",67),P("close",function(){ue(t);let i=V();return de(i.closeSettings())}),C()}}function U2(n,e){n&1&&(v(0,"div",36)(1,"div",68)(2,"div",69),q(3,"div",70)(4,"div",71),C(),v(5,"div",12)(6,"p",72),T(7,"Buscando dados..."),C(),v(8,"p",73),T(9,"Sincronizando com Azure DevOps"),C()()()())}var Hu=class n{constructor(){this.configService=S(In);this.searchMyStoriesUseCase=S(Lc);this.getWorkItemUseCase=S(Vc);this.cache=S(Eo);this.showSettings=G(!1);this.isSidebarOpen=G(!0);this.viewMode=G("split");this.dailyTrigger=G(0);this.isDarkMode=G(this.loadTheme());this.stories=G([]);this.activeStories=qe(()=>{let e=["testes","em desenvolvimento","revis\xE3o","para fazer","novo"];return this.stories().filter(t=>{let r=t.state.toLowerCase();return e.some(i=>i==="para fazer"||i==="novo"?r==="new"||r==="to do"||r==="para fazer"||r==="novo":i==="em desenvolvimento"?r==="active"||r==="in progress"||r==="em desenvolvimento":i==="revis\xE3o"?r==="review"||r==="revis\xE3o":i==="testes"?r==="testing"||r==="testes":r===i)})});this.selectedStory=G(null);this.stats=qe(()=>{let e=this.stories(),t=0,r=0,i=0,o=0;return e.forEach(s=>{let a=s.state.toLowerCase();a==="new"||a==="to do"||a==="para fazer"||a==="novo"?t++:a==="active"||a==="in progress"||a==="em desenvolvimento"?r++:a==="testing"||a==="testes"||a==="resolved"||a==="resolvido"?i++:(a==="review"||a==="revis\xE3o")&&o++}),{todo:t,development:r,testing:i,review:o}});this.searchQuery=G("");this.statusFilters=G(["para fazer","em desenvolvimento","testes","revis\xE3o"]);this.availableStatus=["para fazer","em desenvolvimento","testes","revis\xE3o","fechado"];this.filteredStories=qe(()=>{let e=this.stories(),t=this.searchQuery().trim().toLowerCase(),r=this.statusFilters();return t&&(e=e.filter(i=>i.id.toString().includes(t)||i.title.toLowerCase().includes(t))),r.length>0&&(e=e.filter(i=>{let o=i.state.toLowerCase();return r.some(s=>s==="para fazer"||s==="novo"?o==="new"||o==="to do"||o==="para fazer"||o==="novo":s==="em desenvolvimento"?o==="active"||o==="in progress"||o==="em desenvolvimento":s==="revis\xE3o"?o==="review"||o==="revis\xE3o":s==="testes"?o==="testing"||o==="testes":s==="resolvido"?o==="resolved"||o==="resolvido":s==="fechado"?o==="closed"||o==="fechado":o===s)})),e});this.isLoading=G(!1);this.errorMessage=G("");let e=this.configService.config();!e.pat&&!e.isDemoMode?this.showSettings.set(!0):this.refresh()}closeSettings(){this.showSettings.set(!1),this.refresh()}refreshAll(){this.cache.clear(),this.refresh()}toggleSidebar(){this.isSidebarOpen.update(e=>!e)}toggleStatusFilter(e){this.statusFilters.update(t=>t.includes(e)?t.filter(r=>r!==e):[...t,e])}toggleDarkMode(){this.isDarkMode.update(t=>!t);let e=this.isDarkMode()?"dark":"light";localStorage.setItem("theme",e),this.applyTheme(e)}triggerDailyReport(){this.dailyTrigger.set(Date.now())}loadTheme(){let e=localStorage.getItem("theme"),t=e?e==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches;return this.applyTheme(t?"dark":"light"),t}applyTheme(e){e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}refresh(){this.isLoading.set(!0),this.errorMessage.set(""),this.stories.set([]),this.selectedStory.set(null),this.searchMyStoriesUseCase.execute().subscribe({next:e=>{this.stories.set(e),this.isLoading.set(!1)},error:e=>{console.error("SEARCH ERROR:",e),this.handleError(e)}})}selectStory(e){this.isLoading.set(!0),this.getWorkItemUseCase.execute(e.id).subscribe({next:t=>{this.selectedStory.set(t),this.isLoading.set(!1)},error:t=>{console.error("DETAIL ERROR:",t),this.selectedStory.set(e),this.isLoading.set(!1)}})}handleError(e){this.isLoading.set(!1),this.errorMessage.set("Erro ao carregar dados. Verifique sua conex\xE3o e configura\xE7\xF5es.")}getStateColor(e){let t=e.toLowerCase();if(t==="closed"||t==="fechado")return"bg-green-800 text-green-100 dark:bg-green-900 dark:text-green-200";if(t==="testes"||t==="testing"||t==="resolved")return"bg-yellow-400 text-yellow-900 dark:bg-yellow-600 dark:text-yellow-100";if(t==="para fazer"||t==="to do"||t==="new"||t==="novo")return"bg-green-500 text-white dark:bg-green-700 dark:text-green-100";if(t==="revis\xE3o"||t==="review")return"bg-red-600 text-white dark:bg-red-800 dark:text-red-100";switch(t){case"active":return"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300";case"removed":return"bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-slate-700 dark:text-slate-300"}}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=yt({type:n,selectors:[["app-root"]],decls:62,vars:17,consts:[[1,"h-screen","flex","flex-col","bg-slate-50","text-slate-900","dark:bg-slate-950","dark:text-slate-100"],[1,"h-16","bg-slate-900","text-white","flex","items-center","justify-between","px-6","shadow-md","z-10","flex-shrink-0","dark:bg-black"],[1,"flex","items-center","gap-3"],["title","Alternar Barra Lateral",1,"p-2","hover:bg-slate-800","rounded-md","transition-colors","mr-2","text-slate-400","hover:text-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],[1,"w-8","h-8","bg-blue-600","rounded-md","flex","items-center","justify-center","font-bold","text-lg"],[1,"text-lg","font-medium","tracking-tight"],[1,"text-blue-400"],[1,"flex","items-center","gap-2","bg-slate-800/50","p-1","rounded-full","border","border-slate-700/50"],[3,"click"],[1,"hidden","md:flex","items-center","gap-6","px-4","py-1.5","bg-slate-800/50","rounded-full","border","border-slate-700/50"],[1,"flex","flex-col","items-center"],[1,"text-[10px]","text-green-500","dark:text-green-400","uppercase","font-bold","leading-none"],[1,"text-sm","font-mono","font-bold","text-green-500","dark:text-green-400"],[1,"w-px","h-4","bg-slate-700"],[1,"text-[10px]","text-blue-400","dark:text-blue-300","uppercase","font-bold","leading-none"],[1,"text-sm","font-mono","font-bold","text-blue-400","dark:text-blue-300"],[1,"text-[10px]","text-yellow-400","dark:text-yellow-500","uppercase","font-bold","leading-none"],[1,"text-sm","font-mono","font-bold","text-yellow-400","dark:text-yellow-500"],[1,"text-[10px]","text-red-600","dark:text-red-400","uppercase","font-bold","leading-none"],[1,"text-sm","font-mono","font-bold","text-red-600","dark:text-red-400"],[1,"flex","items-center","gap-4"],[1,"px-2","py-1","bg-yellow-600","text-yellow-100","text-xs","rounded","uppercase","font-bold","tracking-wider"],[1,"p-2","hover:bg-slate-800","rounded-full","transition-colors","text-slate-300","hover:text-white",3,"click","title"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["title","Atualizar Tudo",1,"p-2","hover:bg-slate-800","rounded-full","transition-colors","text-slate-300","hover:text-white",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["title","Gerar Daily",1,"flex","items-center","gap-2","px-3","py-1.5","bg-blue-600","hover:bg-blue-700","text-white","rounded","text-sm","font-bold","transition-all",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["title","Configura\xE7\xF5es",1,"p-2","hover:bg-slate-800","rounded-full","transition-colors","text-slate-300","hover:text-white",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543 .826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"flex-1","flex","overflow-hidden","dark:bg-slate-900"],[1,"w-full","h-full",3,"stories"],[1,"fixed","inset-0","bg-slate-900/40","backdrop-blur-sm","z-[100]","flex","items-center","justify-center","transition-all","duration-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 3v1m0 16v1m9-9h-1M4 12H3m15.364-6.364l-.707.707M6.343 17.657l-.707.707M16.243 17.657l.707.707M7.757 7.757l.707-.707M12 8a4 4 0 100 8 4 4 0 000-8z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"],[1,"bg-white","border-r","border-gray-200","flex","flex-col","flex-shrink-0","dark:bg-slate-900","dark:border-slate-800","transition-all","duration-300","ease-in-out","overflow-hidden"],[1,"p-4","border-b","border-gray-100","flex","items-center","justify-between","dark:border-slate-800"],[1,"font-semibold","text-gray-700","dark:text-slate-200"],[1,"text-blue-600","hover:text-blue-800","text-sm","font-medium","dark:text-blue-400","dark:hover:text-blue-300",3,"click","disabled"],[1,"flex-1","overflow-y-auto","p-3","space-y-3"],[1,"p-3","bg-red-50","text-red-700","text-sm","rounded","border","border-red-200","dark:bg-red-900/20","dark:text-red-400","dark:border-red-900/30"],[1,"space-y-2","mb-4"],[1,"relative"],["type","text","placeholder","Buscar #ID ou titulo...",1,"w-full","bg-gray-50","dark:bg-slate-800","border","border-gray-100","dark:border-slate-700","rounded-lg","pl-9","pr-4","py-2","text-sm","outline-none","focus:ring-2","focus:ring-blue-500","transition-all","dark:text-white",3,"ngModelChange","ngModel"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","absolute","left-3","top-2.5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"flex","flex-wrap","gap-1"],[3,"class"],[1,"flex-1","p-6","bg-slate-50","overflow-hidden","dark:bg-slate-900"],[1,"h-full"],[1,"h-full","block",3,"closeDaily","workItem","availableStories","triggerDaily"],[1,"h-full","flex","flex-col","items-center","justify-center","text-gray-400","dark:text-slate-500"],[1,"mt-2","text-xs"],[1,"flex","justify-between","items-start","mb-1"],[1,"flex","items-center","gap-2"],[1,"text-xs","font-mono","text-gray-500","dark:text-slate-400"],[1,"text-sm","font-medium","text-gray-800","line-clamp-2","leading-snug","dark:text-slate-200"],[1,"text-center","py-10","text-gray-400","text-sm","dark:text-slate-500"],[1,"w-24","h-24","bg-gray-200","rounded-full","flex","items-center","justify-center","mb-4","text-gray-400"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-10","w-10"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"],[1,"text-lg","font-medium"],[1,"text-sm","mt-2","max-w-xs","text-center"],[3,"close"],[1,"bg-white","dark:bg-slate-800","p-6","rounded-2xl","shadow-2xl","flex","flex-col","items-center","gap-4","border","border-slate-200","dark:border-slate-700"],[1,"relative","w-16","h-16"],[1,"absolute","inset-0","border-4","border-blue-100","dark:border-blue-900/30","rounded-full"],[1,"absolute","inset-0","border-4","border-blue-600","rounded-full","border-t-transparent","animate-spin"],[1,"text-lg","font-bold","text-slate-800","dark:text-white"],[1,"text-sm","text-slate-500","dark:text-slate-400"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"header",1)(2,"div",2)(3,"button",3),P("click",function(){return r.toggleSidebar()}),ae(),v(4,"svg",4),q(5,"path",5),C()(),Ae(),v(6,"div",6),T(7,"A"),C(),v(8,"h1",7),T(9,"Azure DevOps "),v(10,"span",8),T(11,"AI Manager"),C()()(),v(12,"div",9)(13,"button",10),P("click",function(){return r.viewMode.set("split")}),T(14," Lista "),C(),v(15,"button",10),P("click",function(){return r.viewMode.set("board")}),T(16," Board "),C()(),v(17,"div",11)(18,"div",12)(19,"span",13),T(20,"Para Fazer"),C(),v(21,"span",14),T(22),C()(),q(23,"div",15),v(24,"div",12)(25,"span",16),T(26,"Em Desenvolvimento"),C(),v(27,"span",17),T(28),C()(),q(29,"div",15),v(30,"div",12)(31,"span",18),T(32,"Testes"),C(),v(33,"span",19),T(34),C()(),q(35,"div",15),v(36,"div",12)(37,"span",20),T(38,"Revis\xE3o"),C(),v(39,"span",21),T(40),C()()(),v(41,"div",22),ge(42,A2,2,0,"span",23),v(43,"button",24),P("click",function(){return r.toggleDarkMode()}),ge(44,M2,2,0,":svg:svg",25)(45,x2,2,0,":svg:svg",25),C(),v(46,"button",26),P("click",function(){return r.refreshAll()}),ae(),v(47,"svg",25),q(48,"path",27),C()(),Ae(),v(49,"button",28),P("click",function(){return r.triggerDailyReport()}),ae(),v(50,"svg",29),q(51,"path",30),C(),T(52," Daily "),C(),Ae(),v(53,"button",31),P("click",function(){return r.showSettings.set(!0)}),ae(),v(54,"svg",25),q(55,"path",32)(56,"path",33),C()()()(),Ae(),v(57,"div",34),ge(58,L2,23,17)(59,V2,1,1,"app-kanban-board",35),C(),ge(60,B2,1,0,"app-settings"),ge(61,U2,10,0,"div",36),C()),t&2&&(D(13),tt("px-3 py-1 text-xs font-bold rounded-full transition-colors "+(r.viewMode()==="split"?"bg-blue-600 text-white":"text-slate-400 hover:bg-slate-700")),D(2),tt("px-3 py-1 text-xs font-bold rounded-full transition-colors "+(r.viewMode()==="board"?"bg-blue-600 text-white":"text-slate-400 hover:bg-slate-700")),D(7),Pe(r.stats().todo),D(6),Pe(r.stats().development),D(6),Pe(r.stats().testing),D(6),Pe(r.stats().review),D(2),me(r.configService.isDemoMode()?42:-1),D(),J("title",r.isDarkMode()?"Modo Claro":"Modo Escuro"),D(),me(r.isDarkMode()?44:45),D(2),J("disabled",r.isLoading()),D(),Be("animate-spin",r.isLoading()),D(11),me(r.viewMode()==="split"?58:59),D(2),me(r.showSettings()?60:-1),D(),me(r.isLoading()?61:-1))},dependencies:[Vt,Bc,xu,Oc,cr,ao,Os,Uu],encapsulation:2})}};var pr=class{constructor(e,t,r,i,o,s,a,l=[]){this.id=e;this.rev=t;this.title=r;this.type=i;this.state=o;this.description=s;this.acceptanceCriteria=a;this.relations=l}get isCompleted(){return["Closed","Done","Resolvido","Resolved"].includes(this.state)}};var Co=class{static toDomain(e){return new pr(e.id,e.rev,e.fields["System.Title"],e.fields["System.WorkItemType"],e.fields["System.State"],e.fields["System.Description"],e.fields["Microsoft.VSTS.Common.AcceptanceCriteria"],e.relations||[])}static toDomainList(e){return e.map(t=>this.toDomain(t))}};var $u=class n{constructor(){this.http=S(Zi);this.configService=S(In)}getHeaders(){return new Bt({"Content-Type":"application/json",Authorization:this.configService.getAuthorizationHeader()})}getById(e,t=!1){if(this.configService.isDemoMode())return Ee(this.getMockStories().find(o=>o.id===e)||this.getMockStories()[0]);let r=`${this.configService.getBaseUrl()}/workitems/${e}?$expand=all&api-version=7.0`,i=this.getHeaders();return t&&(i=i.set("x-force-refresh","true")),this.http.get(r,{headers:i}).pipe(Ie(o=>Co.toDomain(o)))}getByIds(e){if(e.length===0)return Ee([]);if(this.configService.isDemoMode())return Ee([]);let t=`${this.configService.getBaseUrl()}/workitems?ids=${e.join(",")}&$expand=all&api-version=7.0`;return this.http.get(t,{headers:this.getHeaders()}).pipe(Ie(r=>Co.toDomainList(r.value)),zt(()=>Ee([])))}search(e){let t=`${this.configService.getBaseUrl()}/wiql?api-version=7.0`;return this.http.post(t,{query:e},{headers:this.getHeaders()}).pipe(Mn(r=>{let i=r.workItems.map(o=>o.id);return this.getByIds(i)}),zt(()=>Ee([])))}searchByDevEmail(e){if(this.configService.isDemoMode())return Ee(this.getMockStories());let t=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = 'User Story' AND [Custom.Dev] = '${e}' ORDER BY [System.ChangedDate] DESC`;return this.search(t)}update(e,t){if(this.configService.isDemoMode())return Ee(this.getMockStories()[0]);let r=`${this.configService.getBaseUrl()}/workitems/${e}?api-version=7.0`,i=this.getHeaders().set("Content-Type","application/json-patch+json");return this.http.patch(r,t,{headers:i}).pipe(Ie(o=>Co.toDomain(o)))}getMockStories(){return[new pr(101,1,"Integrar API do Google Gemini","User Story","Ativo","Desc...","AC..."),new pr(102,1,"Design da UI do Dashboard","User Story","Novo","Desc..."),new pr(103,1,"Implementar Autentica\xE7\xE3o","User Story","Resolvido","Desc...")]}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}};var Gu=class n{constructor(){this.cache=S(Eo)}intercept(e,t){if(!((e.method==="GET"||e.method==="POST"&&e.url.includes("/wiql"))&&e.url.includes("dev.azure.com")))return t.handle(e);if(!(e.headers.get("x-force-refresh")==="true")){let o=this.cache.get(e);if(o)return Ee(o)}return t.handle(e).pipe(Ci(o=>{o instanceof Un&&this.cache.put(e,o)}))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac})}};Vp(Hu,{providers:[wp(),{provide:lo,useClass:$u},sC(),Wp(jp()),{provide:rc,useClass:Gu,multi:!0}]}).catch(n=>console.error(n));
